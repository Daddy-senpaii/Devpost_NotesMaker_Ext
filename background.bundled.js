var Ay=Object.defineProperty;var Sy=(t,e)=>{for(var n in e)Ay(t,n,{get:e[n],enumerable:!0})};var Ry,Py;function Ny(){return{geminiUrl:Ry,vertexUrl:Py}}function Dy(t,e,n,i){var r,a;if(!t?.baseUrl){let l=Ny();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}var it=class{};function F(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(t,e,n){for(let a=0;a<e.length-1;a++){let l=e[a];if(l.endsWith("[]")){let c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){let h=t[c];if(Array.isArray(n))for(let d=0;d<h.length;d++){let f=h[d];s(f,e.slice(a+1),n[d])}else for(let d of h)s(d,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){let c=l.slice(0,-3);c in t||(t[c]=[{}]);let h=t[c];s(h[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}let i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function o(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;let i=e[n];if(i.endsWith("[]")){let r=i.slice(0,-2);if(r in t){let a=t[r];return Array.isArray(a)?a.map(l=>o(l,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}function ha(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function My(t){let e={},n=o(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function by(t){let e={},n=o(t,["operationName"]);n!=null&&s(e,["operationName"],n);let i=o(t,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);let r=o(t,["config"]);return r!=null&&s(e,["config"],r),e}function ky(t){let e={},n=o(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function xy(t){let e={},n=o(t,["video","uri"]);n!=null&&s(e,["uri"],n);let i=o(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],ha(i));let r=o(t,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Vy(t){let e={},n=o(t,["_self"]);return n!=null&&s(e,["video"],xy(n)),e}function Ly(t){let e={},n=o(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Vy(l))),s(e,["generatedVideos"],a)}let i=o(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let r=o(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Fy(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["metadata"]);i!=null&&s(e,["metadata"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);a!=null&&s(e,["error"],a);let l=o(t,["response","generateVideoResponse"]);return l!=null&&s(e,["response"],Ly(l)),e}function Uy(t){let e={},n=o(t,["gcsUri"]);n!=null&&s(e,["uri"],n);let i=o(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],ha(i));let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Oy(t){let e={},n=o(t,["_self"]);return n!=null&&s(e,["video"],Uy(n)),e}function qy(t){let e={},n=o(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Oy(l))),s(e,["generatedVideos"],a)}let i=o(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let r=o(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function By(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["metadata"]);i!=null&&s(e,["metadata"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);a!=null&&s(e,["error"],a);let l=o(t,["response"]);return l!=null&&s(e,["response"],qy(l)),e}var wd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wd||(wd={}));var Cd;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Cd||(Cd={}));var gt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gt||(gt={}));var Ad;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ad||(Ad={}));var Sd;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Sd||(Sd={}));var Rd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Rd||(Rd={}));var Pd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Pd||(Pd={}));var Nd;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Nd||(Nd={}));var Dd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Dd||(Dd={}));var Md;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Md||(Md={}));var bd;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(bd||(bd={}));var kd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(kd||(kd={}));var xd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xd||(xd={}));var Vd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Vd||(Vd={}));var Ld;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ld||(Ld={}));var _r;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(_r||(_r={}));var Fd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Fd||(Fd={}));var Rs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rs||(Rs={}));var Ud;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ud||(Ud={}));var Od;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Od||(Od={}));var qd;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qd||(qd={}));var Bd;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Bd||(Bd={}));var Gd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gd||(Gd={}));var $d;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($d||($d={}));var Hd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Hd||(Hd={}));var zd;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zd||(zd={}));var Wd;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Wd||(Wd={}));var Kd;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Kd||(Kd={}));var Jd;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Jd||(Jd={}));var Yd;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Yd||(Yd={}));var Qd;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Qd||(Qd={}));var Xd;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xd||(Xd={}));var Zd;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Zd||(Zd={}));var jd;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(jd||(jd={}));var eh;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(eh||(eh={}));var th;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(th||(th={}));var nh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nh||(nh={}));var ih;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ih||(ih={}));var rh;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rh||(rh={}));var oh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(oh||(oh={}));var sh;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sh||(sh={}));var ah;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ah||(ah={}));var lh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lh||(lh={}));var uh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uh||(uh={}));var ch;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ch||(ch={}));var dh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(dh||(dh={}));var hh;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(hh||(hh={}));var rn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(rn||(rn={}));var ui=class{constructor(e){let n={};for(let i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var bt=class{get text(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1,m=[];for(let y of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(let[w,N]of Object.entries(y))w!=="text"&&w!=="thought"&&(N!==null||N!==void 0)&&m.push(w);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,d+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",f=[];for(let m of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(let[y,w]of Object.entries(m))y!=="inlineData"&&(w!==null||w!==void 0)&&f.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,a,l,c,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,a,l,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,a,l,c,h,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}},Tr=class{},Ir=class{},Ps=class{},Ns=class{},Ds=class{},Ms=class{},Er=class{},vr=class{},wr=class{},bs=class{};var Cr=class t{_fromAPIResponse({apiResponse:e,isVertexAI:n}){let i=new t,r,a=e;return n?r=By(a):r=Fy(a),Object.assign(i,r),i}},Ar=class{},Sr=class{},Rr=class{},ks=class{},xs=class{},Vs=class{};var Pr=class{};var Ls=class{get text(){var e,n,i;let r="",a=!1,l=[];for(let c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[h,d]of Object.entries(c))h!=="text"&&h!=="thought"&&d!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="",a=[];for(let l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var Fs=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};function Y(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Vh(t,e){let n=Y(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Lh(t){return Array.isArray(t)?t.map(e=>Nr(e)):[Nr(t)]}function Nr(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Fh(t){let e=Nr(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Uh(t){let e=Nr(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Oh(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fh(e)):[fh(t)]}function Us(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ph(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function mh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Te(t){if(t==null)throw new Error("ContentUnion is required");return Us(t)?t:{role:"user",parts:Oh(t)}}function fa(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let i=Te(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){let n=Te(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Te(n)):[Te(e)]}function Le(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ph(t)||mh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Te(t)]}let e=[],n=[],i=Us(t[0]);for(let r of t){let a=Us(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(ph(r)||mh(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:Oh(n)}),e}function Gy(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(gt).includes(n[0].toUpperCase())?n[0].toUpperCase():gt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of n)e.anyOf.push({type:Object.values(gt).includes(i.toUpperCase())?i.toUpperCase():gt.TYPE_UNSPECIFIED})}}function on(t){let e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Gy(t.type,e);for(let[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(gt).includes(c.toUpperCase())?c.toUpperCase():gt.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=on(c);else if(i.includes(l)){let h=[];for(let d of c){if(d.type=="null"){e.nullable=!0;continue}h.push(on(d))}e[l]=h}else if(r.includes(l)){let h={};for(let[d,f]of Object.entries(c))h[d]=on(f);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function pa(t){return on(t)}function ma(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ga(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ln(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=on(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=on(e.response));return t}function un(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function $y(t,e,n,i=1){let r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function rt(t,e){if(typeof e!="string")throw new Error("name must be a string");return $y(t,e,"cachedContents")}function qh(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vt(t){return ha(t)}function Hy(t){return t!=null&&typeof t=="object"&&"name"in t}function zy(t){return t!=null&&typeof t=="object"&&"video"in t}function Wy(t){return t!=null&&typeof t=="object"&&"uri"in t}function Bh(t){var e;let n;if(Hy(t)&&(n=t.name),!(Wy(t)&&(n=t.uri,n===void 0))&&!(zy(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Gh(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function $h(t){for(let e of["models","tunedModels","publisherModels"])if(Ky(t,e))return t[e];return[]}function Ky(t,e){return t!==null&&typeof t=="object"&&e in t}function Jy(t,e={}){let n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Yy(t,e={}){let n=[],i=new Set;for(let r of t){let a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);let l=Jy(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Hh(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Qy(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zh(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(let l of r){if(typeof l!="object"||l===null)continue;let h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function cn(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Wh(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}function Xy(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Zy(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function jy(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function e_(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function t_(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Xy(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],Zy(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],jy(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],e_(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function Kh(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>t_(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function n_(t){let e={},n=o(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=o(t,["default"]);i!=null&&s(e,["default"],i);let r=o(t,["description"]);r!=null&&s(e,["description"],r);let a=o(t,["enum"]);a!=null&&s(e,["enum"],a);let l=o(t,["example"]);l!=null&&s(e,["example"],l);let c=o(t,["format"]);c!=null&&s(e,["format"],c);let h=o(t,["items"]);h!=null&&s(e,["items"],h);let d=o(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let f=o(t,["maxLength"]);f!=null&&s(e,["maxLength"],f);let m=o(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=o(t,["maximum"]);y!=null&&s(e,["maximum"],y);let w=o(t,["minItems"]);w!=null&&s(e,["minItems"],w);let N=o(t,["minLength"]);N!=null&&s(e,["minLength"],N);let D=o(t,["minProperties"]);D!=null&&s(e,["minProperties"],D);let M=o(t,["minimum"]);M!=null&&s(e,["minimum"],M);let V=o(t,["nullable"]);V!=null&&s(e,["nullable"],V);let k=o(t,["pattern"]);k!=null&&s(e,["pattern"],k);let L=o(t,["properties"]);L!=null&&s(e,["properties"],L);let q=o(t,["propertyOrdering"]);q!=null&&s(e,["propertyOrdering"],q);let O=o(t,["required"]);O!=null&&s(e,["required"],O);let G=o(t,["title"]);G!=null&&s(e,["title"],G);let C=o(t,["type"]);return C!=null&&s(e,["type"],C),e}function i_(t){let e={};if(o(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=o(t,["category"]);n!=null&&s(e,["category"],n);let i=o(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function r_(t){let e={},n=o(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=o(t,["description"]);i!=null&&s(e,["description"],i);let r=o(t,["name"]);r!=null&&s(e,["name"],r);let a=o(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=o(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=o(t,["response"]);c!=null&&s(e,["response"],c);let h=o(t,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function o_(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function s_(t){let e={},n=o(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],o_(n)),o(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function a_(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function l_(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],a_(n)),e}function u_(){return{}}function c_(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function d_(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>r_(d))),s(e,["functionDeclarations"],h)}if(o(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=o(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],s_(i));let r=o(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],l_(r)),o(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(t,["urlContext"])!=null&&s(e,["urlContext"],u_());let l=o(t,["computerUse"]);l!=null&&s(e,["computerUse"],c_(l));let c=o(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function h_(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function f_(t){let e={},n=o(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=o(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function p_(t){let e={},n=o(t,["latLng"]);n!=null&&s(e,["latLng"],f_(n));let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function m_(t){let e={},n=o(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],h_(n));let i=o(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],p_(i)),e}function g_(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Jh(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],g_(n)),e}function y_(t){let e={},n=o(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=o(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Jh(i)),e}function __(t){let e={},n=o(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>y_(r))),s(e,["speakerVoiceConfigs"],i)}return e}function T_(t){let e={},n=o(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Jh(n));let i=o(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],__(i));let r=o(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function I_(t){let e={},n=o(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=o(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function E_(t,e,n){let i={},r=o(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],Kh(Te(r)));let a=o(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=o(e,["topP"]);l!=null&&s(i,["topP"],l);let c=o(e,["topK"]);c!=null&&s(i,["topK"],c);let h=o(e,["candidateCount"]);h!=null&&s(i,["candidateCount"],h);let d=o(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let f=o(e,["stopSequences"]);f!=null&&s(i,["stopSequences"],f);let m=o(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=o(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let w=o(e,["presencePenalty"]);w!=null&&s(i,["presencePenalty"],w);let N=o(e,["frequencyPenalty"]);N!=null&&s(i,["frequencyPenalty"],N);let D=o(e,["seed"]);D!=null&&s(i,["seed"],D);let M=o(e,["responseMimeType"]);M!=null&&s(i,["responseMimeType"],M);let V=o(e,["responseSchema"]);V!=null&&s(i,["responseSchema"],n_(pa(V)));let k=o(e,["responseJsonSchema"]);if(k!=null&&s(i,["responseJsonSchema"],k),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=o(e,["safetySettings"]);if(n!==void 0&&L!=null){let v=L;Array.isArray(v)&&(v=v.map(S=>i_(S))),s(n,["safetySettings"],v)}let q=o(e,["tools"]);if(n!==void 0&&q!=null){let v=un(q);Array.isArray(v)&&(v=v.map(S=>d_(ln(S)))),s(n,["tools"],v)}let O=o(e,["toolConfig"]);if(n!==void 0&&O!=null&&s(n,["toolConfig"],m_(O)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let G=o(e,["cachedContent"]);n!==void 0&&G!=null&&s(n,["cachedContent"],rt(t,G));let C=o(e,["responseModalities"]);C!=null&&s(i,["responseModalities"],C);let I=o(e,["mediaResolution"]);I!=null&&s(i,["mediaResolution"],I);let T=o(e,["speechConfig"]);if(T!=null&&s(i,["speechConfig"],T_(ma(T))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let A=o(e,["thinkingConfig"]);return A!=null&&s(i,["thinkingConfig"],I_(A)),i}function v_(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["request","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>Kh(c))),s(n,["request","contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["request","generationConfig"],E_(t,a,n)),n}function w_(t,e){let n={};if(o(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(o(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=o(e,["fileName"]);i!=null&&s(n,["fileName"],i);let r=o(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>v_(t,l))),s(n,["requests","requests"],a)}return n}function C_(t,e){let n={},i=o(t,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),o(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Cs(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["src"]);r!=null&&s(n,["batch","inputConfig"],w_(t,Hh(t,r)));let a=o(e,["config"]);return a!=null&&s(n,["config"],C_(a,n)),n}function A_(t,e){let n={},i=o(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);let r=o(t,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);let a=o(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&s(e,["requests[]","outputDimensionality"],a),o(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(o(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function S_(t,e){let n={},i=o(e,["contents"]);i!=null&&s(n,["requests[]","request","content"],fa(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],A_(r,n)),n}function R_(t,e){let n={},i=o(e,["fileName"]);i!=null&&s(n,["file_name"],i);let r=o(e,["inlinedRequests"]);return r!=null&&s(n,["requests"],S_(t,r)),n}function P_(t,e){let n={},i=o(t,["displayName"]);return e!==void 0&&i!=null&&s(e,["batch","displayName"],i),n}function As(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["src"]);r!=null&&s(n,["batch","inputConfig"],R_(t,r));let a=o(e,["config"]);return a!=null&&s(n,["config"],P_(a,n)),n}function N_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function D_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function M_(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),o(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function b_(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],M_(n,e)),e}function k_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function x_(t){let e={},n=o(t,["format"]);n!=null&&s(e,["instancesFormat"],n);let i=o(t,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);let r=o(t,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),o(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function V_(t){let e={},n=o(t,["format"]);n!=null&&s(e,["predictionsFormat"],n);let i=o(t,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);let r=o(t,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),o(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(o(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function L_(t,e){let n={},i=o(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let r=o(t,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],V_(Qy(r))),n}function F_(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["model"],Y(t,i));let r=o(e,["src"]);r!=null&&s(n,["inputConfig"],x_(Hh(t,r)));let a=o(e,["config"]);return a!=null&&s(n,["config"],L_(a,n)),n}function U_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function O_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function q_(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);let a=o(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function B_(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],q_(n,e)),e}function G_(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],cn(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function $_(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function H_(t){let e={},n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function z_(t){let e={},n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function W_(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function K_(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],$_(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],H_(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],z_(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],W_(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function J_(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>K_(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function Y_(t){let e={},n=o(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Q_(t){let e={},n=o(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=o(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function X_(t){let e={},n=o(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Q_(r))),s(e,["urlMetadata"],i)}return e}function Z_(t){let e={},n=o(t,["content"]);n!=null&&s(e,["content"],J_(n));let i=o(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Y_(i));let r=o(t,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);let a=o(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=o(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],X_(l));let c=o(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let h=o(t,["groundingMetadata"]);h!=null&&s(e,["groundingMetadata"],h);let d=o(t,["index"]);d!=null&&s(e,["index"],d);let f=o(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);let m=o(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function j_(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>Z_(d))),s(e,["candidates"],h)}let r=o(t,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);let a=o(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);let l=o(t,["responseId"]);l!=null&&s(e,["responseId"],l);let c=o(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function ya(t){let e={},n=o(t,["details"]);n!=null&&s(e,["details"],n);let i=o(t,["code"]);i!=null&&s(e,["code"],i);let r=o(t,["message"]);return r!=null&&s(e,["message"],r),e}function eT(t){let e={},n=o(t,["response"]);n!=null&&s(e,["response"],j_(n));let i=o(t,["error"]);return i!=null&&s(e,["error"],ya(i)),e}function tT(t){let e={},n=o(t,["values"]);return n!=null&&s(e,["values"],n),e}function nT(t){let e={},n=o(t,["embedding"]);n!=null&&s(e,["embedding"],tT(n));let i=o(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function iT(t){let e={},n=o(t,["response"]);n!=null&&s(e,["response"],nT(n));let i=o(t,["error"]);return i!=null&&s(e,["error"],ya(i)),e}function rT(t){let e={},n=o(t,["responsesFile"]);n!=null&&s(e,["fileName"],n);let i=o(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>eT(l))),s(e,["inlinedResponses"],a)}let r=o(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>iT(l))),s(e,["inlinedEmbedContentResponses"],a)}return e}function nn(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["metadata","state"]);r!=null&&s(e,["state"],Wh(r));let a=o(t,["metadata","createTime"]);a!=null&&s(e,["createTime"],a);let l=o(t,["metadata","endTime"]);l!=null&&s(e,["endTime"],l);let c=o(t,["metadata","updateTime"]);c!=null&&s(e,["updateTime"],c);let h=o(t,["metadata","model"]);h!=null&&s(e,["model"],h);let d=o(t,["metadata","output"]);return d!=null&&s(e,["dest"],rT(zh(d))),e}function oT(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>nn(l))),s(e,["batchJobs"],a)}return e}function sT(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);return a!=null&&s(e,["error"],ya(a)),e}function Yh(t){let e={},n=o(t,["details"]);n!=null&&s(e,["details"],n);let i=o(t,["code"]);i!=null&&s(e,["code"],i);let r=o(t,["message"]);return r!=null&&s(e,["message"],r),e}function aT(t){let e={},n=o(t,["instancesFormat"]);n!=null&&s(e,["format"],n);let i=o(t,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);let r=o(t,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function lT(t){let e={},n=o(t,["predictionsFormat"]);n!=null&&s(e,["format"],n);let i=o(t,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);let r=o(t,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Os(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["state"]);r!=null&&s(e,["state"],Wh(r));let a=o(t,["error"]);a!=null&&s(e,["error"],Yh(a));let l=o(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=o(t,["startTime"]);c!=null&&s(e,["startTime"],c);let h=o(t,["endTime"]);h!=null&&s(e,["endTime"],h);let d=o(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);let f=o(t,["model"]);f!=null&&s(e,["model"],f);let m=o(t,["inputConfig"]);m!=null&&s(e,["src"],aT(m));let y=o(t,["outputConfig"]);return y!=null&&s(e,["dest"],lT(zh(y))),e}function uT(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Os(l))),s(e,["batchJobs"],a)}return e}function cT(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);return a!=null&&s(e,["error"],Yh(a)),e}var kt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(kt||(kt={}));var xt=class{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var qs=class extends it{constructor(e){super(),this.apiClient=e,this.create=async n=>{var i,r;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);let a=n.src;if(!(Array.isArray(n.src)||a.inlinedRequests!==void 0))return this.createInternal(n);let c=this.createInlinedGenerateContentRequest(n),h=c.path,d=c.body,f=Cs(this.apiClient,n)._query||{};return this.apiClient.request({path:h,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()).then(y=>nn(y))},this.createEmbeddings=async n=>{var i,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);let c=this.createInlinedEmbedContentRequest(n),h=c.path,d=c.body,f=As(this.apiClient,n)._query||{};return this.apiClient.request({path:h,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=n.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()).then(y=>nn(y))},this.list=async(n={})=>new xt(kt.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){let n=Cs(this.apiClient,e),i=n._url,r=F("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,h=c.requests,d=[];for(let f of h){let m=Object.assign({},f);if(m.systemInstruction){let y=m.systemInstruction;delete m.systemInstruction;let w=m.request;w.systemInstruction=y,m.request=w}d.push(m)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}createInlinedEmbedContentRequest(e){let n=As(this.apiClient,e),i=n._url,r=F("{model}:asyncBatchEmbedContent",i),c=n.batch.inputConfig.requests,h=c.requests,d=[];delete c.config;for(let f of h){let m=Object.assign({},f),y=m.request;for(let w in m)w!=="request"&&(y[w]=m[w],delete m[w]);d.push(m)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){let a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=F_(this.apiClient,e);return c=F("batchPredictionJobs",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Os(f))}else{let d=Cs(this.apiClient,e);return c=F("{model}:batchGenerateContent",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>nn(f))}}async createEmbeddingsInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=As(this.apiClient,e);return a=F("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>nn(h))}}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=U_(this.apiClient,e);return c=F("batchPredictionJobs/{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Os(f))}else{let d=N_(this.apiClient,e);return c=F("batches/{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>nn(f))}}async cancel(e){var n,i,r,a;let l="",c={};if(this.apiClient.isVertexAI()){let h=O_(this.apiClient,e);l=F("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let h=D_(this.apiClient,e);l=F("batches/{name}:cancel",h._url),c=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=B_(e);return c=F("batchPredictionJobs",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=uT(f),y=new Pr;return Object.assign(y,m),y})}else{let d=b_(e);return c=F("batches",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=oT(f),y=new Pr;return Object.assign(y,m),y})}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=G_(this.apiClient,e);return c=F("batchPredictionJobs/{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>cT(f))}else{let d=k_(this.apiClient,e);return c=F("batches/{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>sT(f))}}};function dT(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function hT(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function fT(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function pT(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function mT(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],dT(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],hT(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],fT(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],pT(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function gh(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>mT(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function gT(t){let e={},n=o(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=o(t,["description"]);i!=null&&s(e,["description"],i);let r=o(t,["name"]);r!=null&&s(e,["name"],r);let a=o(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=o(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=o(t,["response"]);c!=null&&s(e,["response"],c);let h=o(t,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function yT(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function _T(t){let e={},n=o(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],yT(n)),o(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TT(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function IT(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],TT(n)),e}function ET(){return{}}function vT(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function wT(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>gT(d))),s(e,["functionDeclarations"],h)}if(o(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=o(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],_T(i));let r=o(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],IT(r)),o(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(t,["urlContext"])!=null&&s(e,["urlContext"],ET());let l=o(t,["computerUse"]);l!=null&&s(e,["computerUse"],vT(l));let c=o(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function CT(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function AT(t){let e={},n=o(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=o(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function ST(t){let e={},n=o(t,["latLng"]);n!=null&&s(e,["latLng"],AT(n));let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function RT(t){let e={},n=o(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],CT(n));let i=o(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],ST(i)),e}function PT(t,e){let n={},i=o(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let r=o(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);let a=o(t,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);let l=o(t,["contents"]);if(e!==void 0&&l!=null){let f=Le(l);Array.isArray(f)&&(f=f.map(m=>gh(m))),s(e,["contents"],f)}let c=o(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],gh(Te(c)));let h=o(t,["tools"]);if(e!==void 0&&h!=null){let f=h;Array.isArray(f)&&(f=f.map(m=>wT(m))),s(e,["tools"],f)}let d=o(t,["toolConfig"]);if(e!==void 0&&d!=null&&s(e,["toolConfig"],RT(d)),o(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NT(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["model"],Vh(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],PT(r,n)),n}function DT(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function MT(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function bT(t,e){let n={},i=o(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let r=o(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function kT(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],bT(r,n)),n}function xT(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function VT(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],xT(n,e)),e}function LT(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function FT(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["data"]);i!=null&&s(e,["data"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function UT(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function OT(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function qT(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],LT(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],FT(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],UT(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],OT(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function yh(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>qT(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function BT(t){let e={};if(o(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=o(t,["description"]);n!=null&&s(e,["description"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["parameters"]);r!=null&&s(e,["parameters"],r);let a=o(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=o(t,["response"]);l!=null&&s(e,["response"],l);let c=o(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function GT(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function $T(t){let e={},n=o(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],GT(n));let i=o(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function HT(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function zT(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],HT(n)),e}function WT(t){let e={},n=o(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function KT(t){let e={},n=o(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function JT(t){let e={},n=o(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],KT(n));let i=o(t,["authType"]);i!=null&&s(e,["authType"],i);let r=o(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);let a=o(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=o(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=o(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function YT(t){let e={},n=o(t,["authConfig"]);return n!=null&&s(e,["authConfig"],JT(n)),e}function QT(){return{}}function XT(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function ZT(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>BT(y))),s(e,["functionDeclarations"],m)}let i=o(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let r=o(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],$T(r));let a=o(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],zT(a));let l=o(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],WT(l));let c=o(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],YT(c)),o(t,["urlContext"])!=null&&s(e,["urlContext"],QT());let d=o(t,["computerUse"]);d!=null&&s(e,["computerUse"],XT(d));let f=o(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function jT(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function eI(t){let e={},n=o(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=o(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function tI(t){let e={},n=o(t,["latLng"]);n!=null&&s(e,["latLng"],eI(n));let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function nI(t){let e={},n=o(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],jT(n));let i=o(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],tI(i)),e}function iI(t,e){let n={},i=o(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let r=o(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);let a=o(t,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);let l=o(t,["contents"]);if(e!==void 0&&l!=null){let m=Le(l);Array.isArray(m)&&(m=m.map(y=>yh(y))),s(e,["contents"],m)}let c=o(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],yh(Te(c)));let h=o(t,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>ZT(y))),s(e,["tools"],m)}let d=o(t,["toolConfig"]);e!==void 0&&d!=null&&s(e,["toolConfig"],nI(d));let f=o(t,["kmsKeyName"]);return e!==void 0&&f!=null&&s(e,["encryption_spec","kmsKeyName"],f),n}function rI(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["model"],Vh(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],iI(r,n)),n}function oI(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function sI(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function aI(t,e){let n={},i=o(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let r=o(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function lI(t,e){let n={},i=o(e,["name"]);i!=null&&s(n,["_url","name"],rt(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],aI(r,n)),n}function uI(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function cI(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],uI(n,e)),e}function gr(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["model"]);r!=null&&s(e,["model"],r);let a=o(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=o(t,["updateTime"]);l!=null&&s(e,["updateTime"],l);let c=o(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);let h=o(t,["usageMetadata"]);return h!=null&&s(e,["usageMetadata"],h),e}function dI(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function hI(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>gr(l))),s(e,["cachedContents"],a)}return e}function yr(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["model"]);r!=null&&s(e,["model"],r);let a=o(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=o(t,["updateTime"]);l!=null&&s(e,["updateTime"],l);let c=o(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);let h=o(t,["usageMetadata"]);return h!=null&&s(e,["usageMetadata"],h),e}function fI(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function pI(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>yr(l))),s(e,["cachedContents"],a)}return e}var Bs=class extends it{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xt(kt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=rI(this.apiClient,e);return c=F("cachedContents",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>yr(f))}else{let d=NT(this.apiClient,e);return c=F("cachedContents",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>gr(f))}}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=oI(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>yr(f))}else{let d=DT(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>gr(f))}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=sI(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=fI(f),y=new Sr;return Object.assign(y,m),y})}else{let d=MT(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=dI(f),y=new Sr;return Object.assign(y,m),y})}}async update(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=lI(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>yr(f))}else{let d=kT(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>gr(f))}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=cI(e);return c=F("cachedContents",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=pI(f),y=new Rr;return Object.assign(y,m),y})}else{let d=VT(e);return c=F("cachedContents",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=hI(f),y=new Rr;return Object.assign(y,m),y})}}};function _h(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ee(t){return this instanceof ee?(this.v=t,this):new ee(t)}function sn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(w){return function(N){return Promise.resolve(N).then(w,m)}}function c(w,N){i[w]&&(r[w]=function(D){return new Promise(function(M,V){a.push([w,D,M,V])>1||h(w,D)})},N&&(r[w]=N(r[w])))}function h(w,N){try{d(i[w](N))}catch(D){y(a[0][3],D)}}function d(w){w.value instanceof ee?Promise.resolve(w.value.v).then(f,m):y(a[0][2],w)}function f(w){h("next",w)}function m(w){h("throw",w)}function y(w,N){w(N),a.shift(),a.length&&h(a[0][0],a[0][1])}}function li(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _h=="function"?_h(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),r(c,h,l.done,l.value)})}}function r(a,l,c,h){Promise.resolve(h).then(function(d){a({value:d,done:c})},l)}}function mI(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Qh(n)}function Qh(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gI(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Th(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{let r=[],a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!Qh(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}var Gs=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new $s(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},$s=class{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),gI(a)}async sendMessage(e){var n;await this.sendPromise;let i=Te(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;let h=await r,d=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=h.automaticFunctionCallingHistory,m=this.getHistory(!0).length,y=[];f!=null&&(y=(c=f.slice(m))!==null&&c!==void 0?c:[]);let w=d?[d]:[];this.recordHistory(i,w,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;let i=Te(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){let n=e?Th(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return sn(this,arguments,function*(){var l,c,h,d;let f=[];try{for(var m=!0,y=li(e),w;w=yield ee(y.next()),l=w.done,!l;m=!0){d=w.value,m=!1;let N=d;if(mI(N)){let D=(r=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;D!==void 0&&f.push(D)}yield yield ee(N)}}catch(N){c={error:N}}finally{try{!m&&!l&&(h=y.return)&&(yield ee(h.call(y)))}finally{if(c)throw c.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Th(i)):this.history.push(e),this.history.push(...r)}};var Dr=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function yI(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function _I(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],yI(n,e)),e}function TI(t){let e={},n=o(t,["details"]);n!=null&&s(e,["details"],n);let i=o(t,["message"]);i!=null&&s(e,["message"],i);let r=o(t,["code"]);return r!=null&&s(e,["code"],r),e}function II(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);let a=o(t,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);let l=o(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=o(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);let h=o(t,["updateTime"]);h!=null&&s(e,["updateTime"],h);let d=o(t,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);let f=o(t,["uri"]);f!=null&&s(e,["uri"],f);let m=o(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);let y=o(t,["state"]);y!=null&&s(e,["state"],y);let w=o(t,["source"]);w!=null&&s(e,["source"],w);let N=o(t,["videoMetadata"]);N!=null&&s(e,["videoMetadata"],N);let D=o(t,["error"]);return D!=null&&s(e,["error"],TI(D)),e}function EI(t){let e={},n=o(t,["file"]);n!=null&&s(e,["file"],II(n));let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function vI(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","file"],Bh(n));let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function wI(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","file"],Bh(n));let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function CI(t){let e={},n=o(t,["details"]);n!=null&&s(e,["details"],n);let i=o(t,["message"]);i!=null&&s(e,["message"],i);let r=o(t,["code"]);return r!=null&&s(e,["code"],r),e}function Hs(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);let a=o(t,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);let l=o(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=o(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);let h=o(t,["updateTime"]);h!=null&&s(e,["updateTime"],h);let d=o(t,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);let f=o(t,["uri"]);f!=null&&s(e,["uri"],f);let m=o(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);let y=o(t,["state"]);y!=null&&s(e,["state"],y);let w=o(t,["source"]);w!=null&&s(e,["source"],w);let N=o(t,["videoMetadata"]);N!=null&&s(e,["videoMetadata"],N);let D=o(t,["error"]);return D!=null&&s(e,["error"],CI(D)),e}function AI(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Hs(l))),s(e,["files"],a)}return e}function SI(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function RI(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}var zs=class extends it{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xt(kt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Hs(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=_I(e);return a=F("files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>{let d=AI(h),f=new ks;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=EI(e);return a=F("upload/v1beta/files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{let d=SI(h),f=new xs;return Object.assign(f,d),f})}}async get(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=vI(e);return a=F("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Hs(h))}}async delete(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=wI(e);return a=F("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>{let d=RI(h),f=new Vs;return Object.assign(f,d),f})}}};function PI(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Xh(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],PI(n)),e}function NI(t){let e={},n=o(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=o(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Xh(i)),e}function DI(t){let e={},n=o(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>NI(r))),s(e,["speakerVoiceConfigs"],i)}return e}function MI(t){let e={},n=o(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Xh(n));let i=o(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],DI(i));let r=o(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function bI(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function kI(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function xI(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function VI(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function LI(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],bI(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],kI(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],xI(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],VI(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function FI(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>LI(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function UI(t){let e={},n=o(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=o(t,["description"]);i!=null&&s(e,["description"],i);let r=o(t,["name"]);r!=null&&s(e,["name"],r);let a=o(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=o(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=o(t,["response"]);c!=null&&s(e,["response"],c);let h=o(t,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function OI(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function qI(t){let e={},n=o(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],OI(n)),o(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function BI(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function GI(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],BI(n)),e}function $I(){return{}}function HI(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function zI(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>UI(d))),s(e,["functionDeclarations"],h)}if(o(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=o(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],qI(i));let r=o(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],GI(r)),o(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(t,["urlContext"])!=null&&s(e,["urlContext"],$I());let l=o(t,["computerUse"]);l!=null&&s(e,["computerUse"],HI(l));let c=o(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function WI(t){let e={},n=o(t,["handle"]);if(n!=null&&s(e,["handle"],n),o(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ih(){return{}}function KI(t){let e={},n=o(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=o(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let r=o(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);let a=o(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=o(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function JI(t){let e={},n=o(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],KI(n));let i=o(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let r=o(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function YI(t){let e={},n=o(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function QI(t){let e={},n=o(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=o(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],YI(i)),e}function XI(t){let e={},n=o(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function ZI(t,e){let n={},i=o(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let r=o(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);let a=o(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=o(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=o(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let h=o(t,["maxOutputTokens"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","maxOutputTokens"],h);let d=o(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let f=o(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);let m=o(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],MI(ga(m)));let y=o(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let w=o(t,["systemInstruction"]);e!==void 0&&w!=null&&s(e,["setup","systemInstruction"],FI(Te(w)));let N=o(t,["tools"]);if(e!==void 0&&N!=null){let O=un(N);Array.isArray(O)&&(O=O.map(G=>zI(ln(G)))),s(e,["setup","tools"],O)}let D=o(t,["sessionResumption"]);e!==void 0&&D!=null&&s(e,["setup","sessionResumption"],WI(D));let M=o(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","inputAudioTranscription"],Ih());let V=o(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&s(e,["setup","outputAudioTranscription"],Ih());let k=o(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],JI(k));let L=o(t,["contextWindowCompression"]);e!==void 0&&L!=null&&s(e,["setup","contextWindowCompression"],QI(L));let q=o(t,["proactivity"]);return e!==void 0&&q!=null&&s(e,["setup","proactivity"],XI(q)),n}function jI(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["setup","model"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],ZI(r,n)),n}function eE(){return{}}function tE(){return{}}function nE(t){let e={},n=o(t,["media"]);n!=null&&s(e,["mediaChunks"],Lh(n));let i=o(t,["audio"]);i!=null&&s(e,["audio"],Uh(i));let r=o(t,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);let a=o(t,["video"]);a!=null&&s(e,["video"],Fh(a));let l=o(t,["text"]);return l!=null&&s(e,["text"],l),o(t,["activityStart"])!=null&&s(e,["activityStart"],eE()),o(t,["activityEnd"])!=null&&s(e,["activityEnd"],tE()),e}function Zh(t){let e={},n=o(t,["text"]);n!=null&&s(e,["text"],n);let i=o(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function iE(t){let e={},n=o(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Zh(r))),s(e,["weightedPrompts"],i)}return e}function jh(t){let e={},n=o(t,["temperature"]);n!=null&&s(e,["temperature"],n);let i=o(t,["topK"]);i!=null&&s(e,["topK"],i);let r=o(t,["seed"]);r!=null&&s(e,["seed"],r);let a=o(t,["guidance"]);a!=null&&s(e,["guidance"],a);let l=o(t,["bpm"]);l!=null&&s(e,["bpm"],l);let c=o(t,["density"]);c!=null&&s(e,["density"],c);let h=o(t,["brightness"]);h!=null&&s(e,["brightness"],h);let d=o(t,["scale"]);d!=null&&s(e,["scale"],d);let f=o(t,["muteBass"]);f!=null&&s(e,["muteBass"],f);let m=o(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);let y=o(t,["onlyBassAndDrums"]);y!=null&&s(e,["onlyBassAndDrums"],y);let w=o(t,["musicGenerationMode"]);return w!=null&&s(e,["musicGenerationMode"],w),e}function rE(t){let e={},n=o(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],jh(n)),e}function ef(t){let e={},n=o(t,["model"]);return n!=null&&s(e,["model"],n),e}function tf(t){let e={},n=o(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Zh(r))),s(e,["weightedPrompts"],i)}return e}function Ws(t){let e={},n=o(t,["setup"]);n!=null&&s(e,["setup"],ef(n));let i=o(t,["clientContent"]);i!=null&&s(e,["clientContent"],tf(i));let r=o(t,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],jh(r));let a=o(t,["playbackControl"]);return a!=null&&s(e,["playbackControl"],a),e}function oE(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function sE(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],oE(n)),e}function aE(t){let e={},n=o(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],sE(n)),o(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function lE(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function uE(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["data"]);i!=null&&s(e,["data"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function cE(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function dE(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function hE(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],lE(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],uE(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],cE(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],dE(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function fE(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>hE(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function pE(t){let e={};if(o(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=o(t,["description"]);n!=null&&s(e,["description"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["parameters"]);r!=null&&s(e,["parameters"],r);let a=o(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=o(t,["response"]);l!=null&&s(e,["response"],l);let c=o(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function mE(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function gE(t){let e={},n=o(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],mE(n));let i=o(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function yE(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function _E(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],yE(n)),e}function TE(t){let e={},n=o(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function IE(t){let e={},n=o(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function EE(t){let e={},n=o(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],IE(n));let i=o(t,["authType"]);i!=null&&s(e,["authType"],i);let r=o(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);let a=o(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=o(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=o(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function vE(t){let e={},n=o(t,["authConfig"]);return n!=null&&s(e,["authConfig"],EE(n)),e}function wE(){return{}}function CE(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function AE(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>pE(y))),s(e,["functionDeclarations"],m)}let i=o(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let r=o(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],gE(r));let a=o(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],_E(a));let l=o(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],TE(l));let c=o(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],vE(c)),o(t,["urlContext"])!=null&&s(e,["urlContext"],wE());let d=o(t,["computerUse"]);d!=null&&s(e,["computerUse"],CE(d));let f=o(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function SE(t){let e={},n=o(t,["handle"]);n!=null&&s(e,["handle"],n);let i=o(t,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function Eh(){return{}}function RE(t){let e={},n=o(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=o(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let r=o(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);let a=o(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=o(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function PE(t){let e={},n=o(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],RE(n));let i=o(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let r=o(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function NE(t){let e={},n=o(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function DE(t){let e={},n=o(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=o(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],NE(i)),e}function ME(t){let e={},n=o(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function bE(t,e){let n={},i=o(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let r=o(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);let a=o(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=o(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=o(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let h=o(t,["maxOutputTokens"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","maxOutputTokens"],h);let d=o(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let f=o(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);let m=o(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],aE(ga(m)));let y=o(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let w=o(t,["systemInstruction"]);e!==void 0&&w!=null&&s(e,["setup","systemInstruction"],fE(Te(w)));let N=o(t,["tools"]);if(e!==void 0&&N!=null){let O=un(N);Array.isArray(O)&&(O=O.map(G=>AE(ln(G)))),s(e,["setup","tools"],O)}let D=o(t,["sessionResumption"]);e!==void 0&&D!=null&&s(e,["setup","sessionResumption"],SE(D));let M=o(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","inputAudioTranscription"],Eh());let V=o(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&s(e,["setup","outputAudioTranscription"],Eh());let k=o(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],PE(k));let L=o(t,["contextWindowCompression"]);e!==void 0&&L!=null&&s(e,["setup","contextWindowCompression"],DE(L));let q=o(t,["proactivity"]);return e!==void 0&&q!=null&&s(e,["setup","proactivity"],ME(q)),n}function kE(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["setup","model"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],bE(r,n)),n}function xE(){return{}}function VE(){return{}}function LE(t){let e={},n=o(t,["media"]);n!=null&&s(e,["mediaChunks"],Lh(n));let i=o(t,["audio"]);i!=null&&s(e,["audio"],Uh(i));let r=o(t,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);let a=o(t,["video"]);a!=null&&s(e,["video"],Fh(a));let l=o(t,["text"]);return l!=null&&s(e,["text"],l),o(t,["activityStart"])!=null&&s(e,["activityStart"],xE()),o(t,["activityEnd"])!=null&&s(e,["activityEnd"],VE()),e}function FE(){return{}}function UE(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function OE(t){let e={},n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function qE(t){let e={},n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function nf(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function BE(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],UE(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],OE(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],qE(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],nf(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function GE(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>BE(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function vh(t){let e={},n=o(t,["text"]);n!=null&&s(e,["text"],n);let i=o(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function $E(t){let e={},n=o(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=o(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function HE(t){let e={},n=o(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$E(r))),s(e,["urlMetadata"],i)}return e}function zE(t){let e={},n=o(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],GE(n));let i=o(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);let r=o(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);let a=o(t,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);let l=o(t,["generationComplete"]);l!=null&&s(e,["generationComplete"],l);let c=o(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],vh(c));let h=o(t,["outputTranscription"]);h!=null&&s(e,["outputTranscription"],vh(h));let d=o(t,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],HE(d));let f=o(t,["turnCompleteReason"]);f!=null&&s(e,["turnCompleteReason"],f);let m=o(t,["waitingForInput"]);return m!=null&&s(e,["waitingForInput"],m),e}function WE(t){let e={},n=o(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>nf(r))),s(e,["functionCalls"],i)}return e}function KE(t){let e={},n=o(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function pr(t){let e={},n=o(t,["modality"]);n!=null&&s(e,["modality"],n);let i=o(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function JE(t){let e={},n=o(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);let i=o(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);let r=o(t,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);let a=o(t,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);let l=o(t,["thoughtsTokenCount"]);l!=null&&s(e,["thoughtsTokenCount"],l);let c=o(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);let h=o(t,["promptTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(w=>pr(w))),s(e,["promptTokensDetails"],y)}let d=o(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>pr(w))),s(e,["cacheTokensDetails"],y)}let f=o(t,["responseTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>pr(w))),s(e,["responseTokensDetails"],y)}let m=o(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>pr(w))),s(e,["toolUsePromptTokensDetails"],y)}return e}function YE(t){let e={},n=o(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function QE(t){let e={},n=o(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);let i=o(t,["resumable"]);i!=null&&s(e,["resumable"],i);let r=o(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function XE(t){let e={};o(t,["setupComplete"])!=null&&s(e,["setupComplete"],FE());let i=o(t,["serverContent"]);i!=null&&s(e,["serverContent"],zE(i));let r=o(t,["toolCall"]);r!=null&&s(e,["toolCall"],WE(r));let a=o(t,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],KE(a));let l=o(t,["usageMetadata"]);l!=null&&s(e,["usageMetadata"],JE(l));let c=o(t,["goAway"]);c!=null&&s(e,["goAway"],YE(c));let h=o(t,["sessionResumptionUpdate"]);return h!=null&&s(e,["sessionResumptionUpdate"],QE(h)),e}function ZE(){return{}}function jE(t){let e={},n=o(t,["text"]);n!=null&&s(e,["text"],n);let i=o(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function ev(t){let e={},n=o(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>jE(r))),s(e,["weightedPrompts"],i)}return e}function tv(t){let e={},n=o(t,["temperature"]);n!=null&&s(e,["temperature"],n);let i=o(t,["topK"]);i!=null&&s(e,["topK"],i);let r=o(t,["seed"]);r!=null&&s(e,["seed"],r);let a=o(t,["guidance"]);a!=null&&s(e,["guidance"],a);let l=o(t,["bpm"]);l!=null&&s(e,["bpm"],l);let c=o(t,["density"]);c!=null&&s(e,["density"],c);let h=o(t,["brightness"]);h!=null&&s(e,["brightness"],h);let d=o(t,["scale"]);d!=null&&s(e,["scale"],d);let f=o(t,["muteBass"]);f!=null&&s(e,["muteBass"],f);let m=o(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);let y=o(t,["onlyBassAndDrums"]);y!=null&&s(e,["onlyBassAndDrums"],y);let w=o(t,["musicGenerationMode"]);return w!=null&&s(e,["musicGenerationMode"],w),e}function nv(t){let e={},n=o(t,["clientContent"]);n!=null&&s(e,["clientContent"],ev(n));let i=o(t,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],tv(i)),e}function iv(t){let e={},n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);i!=null&&s(e,["mimeType"],i);let r=o(t,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],nv(r)),e}function rv(t){let e={},n=o(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>iv(r))),s(e,["audioChunks"],i)}return e}function ov(t){let e={},n=o(t,["text"]);n!=null&&s(e,["text"],n);let i=o(t,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function sv(t){let e={};o(t,["setupComplete"])!=null&&s(e,["setupComplete"],ZE());let i=o(t,["serverContent"]);i!=null&&s(e,["serverContent"],rv(i));let r=o(t,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],ov(r)),e}function av(t){let e={},n=o(t,["sessionId"]);return n!=null&&s(e,["sessionId"],n),e}function lv(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function uv(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["data"]);i!=null&&s(e,["data"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function cv(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function rf(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function dv(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],lv(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],uv(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],cv(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],rf(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function hv(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>dv(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function wh(t){let e={},n=o(t,["text"]);n!=null&&s(e,["text"],n);let i=o(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function fv(t){let e={},n=o(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],hv(n));let i=o(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);let r=o(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);let a=o(t,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);let l=o(t,["generationComplete"]);l!=null&&s(e,["generationComplete"],l);let c=o(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],wh(c));let h=o(t,["outputTranscription"]);h!=null&&s(e,["outputTranscription"],wh(h));let d=o(t,["turnCompleteReason"]);d!=null&&s(e,["turnCompleteReason"],d);let f=o(t,["waitingForInput"]);return f!=null&&s(e,["waitingForInput"],f),e}function pv(t){let e={},n=o(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>rf(r))),s(e,["functionCalls"],i)}return e}function mv(t){let e={},n=o(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function mr(t){let e={},n=o(t,["modality"]);n!=null&&s(e,["modality"],n);let i=o(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function gv(t){let e={},n=o(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);let i=o(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);let r=o(t,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);let a=o(t,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);let l=o(t,["thoughtsTokenCount"]);l!=null&&s(e,["thoughtsTokenCount"],l);let c=o(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);let h=o(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(N=>mr(N))),s(e,["promptTokensDetails"],w)}let d=o(t,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(N=>mr(N))),s(e,["cacheTokensDetails"],w)}let f=o(t,["candidatesTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(N=>mr(N))),s(e,["responseTokensDetails"],w)}let m=o(t,["toolUsePromptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(N=>mr(N))),s(e,["toolUsePromptTokensDetails"],w)}let y=o(t,["trafficType"]);return y!=null&&s(e,["trafficType"],y),e}function yv(t){let e={},n=o(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function _v(t){let e={},n=o(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);let i=o(t,["resumable"]);i!=null&&s(e,["resumable"],i);let r=o(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Tv(t){let e={},n=o(t,["setupComplete"]);n!=null&&s(e,["setupComplete"],av(n));let i=o(t,["serverContent"]);i!=null&&s(e,["serverContent"],fv(i));let r=o(t,["toolCall"]);r!=null&&s(e,["toolCall"],pv(r));let a=o(t,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],mv(a));let l=o(t,["usageMetadata"]);l!=null&&s(e,["usageMetadata"],gv(l));let c=o(t,["goAway"]);c!=null&&s(e,["goAway"],yv(c));let h=o(t,["sessionResumptionUpdate"]);return h!=null&&s(e,["sessionResumptionUpdate"],_v(h)),e}function Iv(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ev(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function vv(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function wv(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function Cv(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Iv(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],Ev(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],vv(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],wv(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function br(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Cv(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function Av(t){let e={},n=o(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=o(t,["default"]);i!=null&&s(e,["default"],i);let r=o(t,["description"]);r!=null&&s(e,["description"],r);let a=o(t,["enum"]);a!=null&&s(e,["enum"],a);let l=o(t,["example"]);l!=null&&s(e,["example"],l);let c=o(t,["format"]);c!=null&&s(e,["format"],c);let h=o(t,["items"]);h!=null&&s(e,["items"],h);let d=o(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let f=o(t,["maxLength"]);f!=null&&s(e,["maxLength"],f);let m=o(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=o(t,["maximum"]);y!=null&&s(e,["maximum"],y);let w=o(t,["minItems"]);w!=null&&s(e,["minItems"],w);let N=o(t,["minLength"]);N!=null&&s(e,["minLength"],N);let D=o(t,["minProperties"]);D!=null&&s(e,["minProperties"],D);let M=o(t,["minimum"]);M!=null&&s(e,["minimum"],M);let V=o(t,["nullable"]);V!=null&&s(e,["nullable"],V);let k=o(t,["pattern"]);k!=null&&s(e,["pattern"],k);let L=o(t,["properties"]);L!=null&&s(e,["properties"],L);let q=o(t,["propertyOrdering"]);q!=null&&s(e,["propertyOrdering"],q);let O=o(t,["required"]);O!=null&&s(e,["required"],O);let G=o(t,["title"]);G!=null&&s(e,["title"],G);let C=o(t,["type"]);return C!=null&&s(e,["type"],C),e}function Sv(t){let e={};if(o(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=o(t,["category"]);n!=null&&s(e,["category"],n);let i=o(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function Rv(t){let e={},n=o(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=o(t,["description"]);i!=null&&s(e,["description"],i);let r=o(t,["name"]);r!=null&&s(e,["name"],r);let a=o(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=o(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=o(t,["response"]);c!=null&&s(e,["response"],c);let h=o(t,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function Pv(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Nv(t){let e={},n=o(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],Pv(n)),o(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Dv(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Mv(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Dv(n)),e}function bv(){return{}}function kv(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function xv(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>Rv(d))),s(e,["functionDeclarations"],h)}if(o(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=o(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],Nv(i));let r=o(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Mv(r)),o(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(t,["urlContext"])!=null&&s(e,["urlContext"],bv());let l=o(t,["computerUse"]);l!=null&&s(e,["computerUse"],kv(l));let c=o(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Vv(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Lv(t){let e={},n=o(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=o(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Fv(t){let e={},n=o(t,["latLng"]);n!=null&&s(e,["latLng"],Lv(n));let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Uv(t){let e={},n=o(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Vv(n));let i=o(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Fv(i)),e}function Ov(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function of(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Ov(n)),e}function qv(t){let e={},n=o(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=o(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],of(i)),e}function Bv(t){let e={},n=o(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>qv(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Gv(t){let e={},n=o(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],of(n));let i=o(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Bv(i));let r=o(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function $v(t){let e={},n=o(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=o(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Hv(t,e,n){let i={},r=o(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],br(Te(r)));let a=o(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=o(e,["topP"]);l!=null&&s(i,["topP"],l);let c=o(e,["topK"]);c!=null&&s(i,["topK"],c);let h=o(e,["candidateCount"]);h!=null&&s(i,["candidateCount"],h);let d=o(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let f=o(e,["stopSequences"]);f!=null&&s(i,["stopSequences"],f);let m=o(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=o(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let w=o(e,["presencePenalty"]);w!=null&&s(i,["presencePenalty"],w);let N=o(e,["frequencyPenalty"]);N!=null&&s(i,["frequencyPenalty"],N);let D=o(e,["seed"]);D!=null&&s(i,["seed"],D);let M=o(e,["responseMimeType"]);M!=null&&s(i,["responseMimeType"],M);let V=o(e,["responseSchema"]);V!=null&&s(i,["responseSchema"],Av(pa(V)));let k=o(e,["responseJsonSchema"]);if(k!=null&&s(i,["responseJsonSchema"],k),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=o(e,["safetySettings"]);if(n!==void 0&&L!=null){let v=L;Array.isArray(v)&&(v=v.map(S=>Sv(S))),s(n,["safetySettings"],v)}let q=o(e,["tools"]);if(n!==void 0&&q!=null){let v=un(q);Array.isArray(v)&&(v=v.map(S=>xv(ln(S)))),s(n,["tools"],v)}let O=o(e,["toolConfig"]);if(n!==void 0&&O!=null&&s(n,["toolConfig"],Uv(O)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let G=o(e,["cachedContent"]);n!==void 0&&G!=null&&s(n,["cachedContent"],rt(t,G));let C=o(e,["responseModalities"]);C!=null&&s(i,["responseModalities"],C);let I=o(e,["mediaResolution"]);I!=null&&s(i,["mediaResolution"],I);let T=o(e,["speechConfig"]);if(T!=null&&s(i,["speechConfig"],Gv(ma(T))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let A=o(e,["thinkingConfig"]);return A!=null&&s(i,["thinkingConfig"],$v(A)),i}function Ch(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>br(c))),s(n,["contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["generationConfig"],Hv(t,a,n)),n}function zv(t,e){let n={},i=o(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);let r=o(t,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);let a=o(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&s(e,["requests[]","outputDimensionality"],a),o(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(o(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Wv(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);r!=null&&s(n,["requests[]","content"],fa(t,r));let a=o(e,["config"]);a!=null&&s(n,["config"],zv(a,n));let l=o(e,["model"]);return l!==void 0&&s(n,["requests[]","model"],Y(t,l)),n}function Kv(t,e){let n={};if(o(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=o(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let r=o(t,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);let a=o(t,["guidanceScale"]);if(e!==void 0&&a!=null&&s(e,["parameters","guidanceScale"],a),o(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let l=o(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&s(e,["parameters","safetySetting"],l);let c=o(t,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);let h=o(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&s(e,["parameters","includeSafetyAttributes"],h);let d=o(t,["includeRaiReason"]);e!==void 0&&d!=null&&s(e,["parameters","includeRaiReason"],d);let f=o(t,["language"]);e!==void 0&&f!=null&&s(e,["parameters","language"],f);let m=o(t,["outputMimeType"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","mimeType"],m);let y=o(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y),o(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");let w=o(t,["imageSize"]);if(e!==void 0&&w!=null&&s(e,["parameters","sampleImageSize"],w),o(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Jv(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);let a=o(e,["config"]);return a!=null&&s(n,["config"],Kv(a,n)),n}function Yv(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","name"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function Qv(t,e,n){let i={},r=o(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);let a=o(e,["pageToken"]);n!==void 0&&a!=null&&s(n,["_query","pageToken"],a);let l=o(e,["filter"]);n!==void 0&&l!=null&&s(n,["_query","filter"],l);let c=o(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],Gh(t,c)),i}function Xv(t,e){let n={},i=o(e,["config"]);return i!=null&&s(n,["config"],Qv(t,i,n)),n}function Zv(t,e){let n={},i=o(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let r=o(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);let a=o(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&s(e,["defaultCheckpointId"],a),n}function jv(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","name"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],Zv(r,n)),n}function ew(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","name"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function tw(t){let e={};if(o(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(o(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(o(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nw(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>br(c))),s(n,["contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["config"],tw(a)),n}function sf(t){let e={};if(o(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=o(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],Vt(n));let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function iw(t,e){let n={},i=o(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let r=o(t,["image"]);if(e!==void 0&&r!=null&&s(e,["instances[0]","image"],sf(r)),o(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function rw(t,e){let n={},i=o(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),o(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=o(t,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),o(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=o(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);let l=o(t,["resolution"]);e!==void 0&&l!=null&&s(e,["parameters","resolution"],l);let c=o(t,["personGeneration"]);if(e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c),o(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let h=o(t,["negativePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","negativePrompt"],h);let d=o(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),o(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(o(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(o(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(o(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(o(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ow(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);let a=o(e,["image"]);if(a!=null&&s(n,["instances[0]","image"],sf(a)),o(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");let l=o(e,["source"]);l!=null&&s(n,["config"],iw(l,n));let c=o(e,["config"]);return c!=null&&s(n,["config"],rw(c,n)),n}function sw(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function aw(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["data"]);i!=null&&s(e,["data"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function lw(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function uw(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function cw(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],sw(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],aw(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],lw(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],uw(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function dn(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>cw(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function dw(t){let e={},n=o(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=o(t,["default"]);i!=null&&s(e,["default"],i);let r=o(t,["description"]);r!=null&&s(e,["description"],r);let a=o(t,["enum"]);a!=null&&s(e,["enum"],a);let l=o(t,["example"]);l!=null&&s(e,["example"],l);let c=o(t,["format"]);c!=null&&s(e,["format"],c);let h=o(t,["items"]);h!=null&&s(e,["items"],h);let d=o(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let f=o(t,["maxLength"]);f!=null&&s(e,["maxLength"],f);let m=o(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=o(t,["maximum"]);y!=null&&s(e,["maximum"],y);let w=o(t,["minItems"]);w!=null&&s(e,["minItems"],w);let N=o(t,["minLength"]);N!=null&&s(e,["minLength"],N);let D=o(t,["minProperties"]);D!=null&&s(e,["minProperties"],D);let M=o(t,["minimum"]);M!=null&&s(e,["minimum"],M);let V=o(t,["nullable"]);V!=null&&s(e,["nullable"],V);let k=o(t,["pattern"]);k!=null&&s(e,["pattern"],k);let L=o(t,["properties"]);L!=null&&s(e,["properties"],L);let q=o(t,["propertyOrdering"]);q!=null&&s(e,["propertyOrdering"],q);let O=o(t,["required"]);O!=null&&s(e,["required"],O);let G=o(t,["title"]);G!=null&&s(e,["title"],G);let C=o(t,["type"]);return C!=null&&s(e,["type"],C),e}function hw(t){let e={},n=o(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function fw(t){let e={},n=o(t,["method"]);n!=null&&s(e,["method"],n);let i=o(t,["category"]);i!=null&&s(e,["category"],i);let r=o(t,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function pw(t){let e={};if(o(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=o(t,["description"]);n!=null&&s(e,["description"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["parameters"]);r!=null&&s(e,["parameters"],r);let a=o(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=o(t,["response"]);l!=null&&s(e,["response"],l);let c=o(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function mw(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function gw(t){let e={},n=o(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],mw(n));let i=o(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function yw(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function _w(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],yw(n)),e}function Tw(t){let e={},n=o(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function Iw(t){let e={},n=o(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Ew(t){let e={},n=o(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Iw(n));let i=o(t,["authType"]);i!=null&&s(e,["authType"],i);let r=o(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);let a=o(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=o(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=o(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function vw(t){let e={},n=o(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Ew(n)),e}function ww(){return{}}function Cw(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function af(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>pw(y))),s(e,["functionDeclarations"],m)}let i=o(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let r=o(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],gw(r));let a=o(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],_w(a));let l=o(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],Tw(l));let c=o(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],vw(c)),o(t,["urlContext"])!=null&&s(e,["urlContext"],ww());let d=o(t,["computerUse"]);d!=null&&s(e,["computerUse"],Cw(d));let f=o(t,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function Aw(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Sw(t){let e={},n=o(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=o(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Rw(t){let e={},n=o(t,["latLng"]);n!=null&&s(e,["latLng"],Sw(n));let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Pw(t){let e={},n=o(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Aw(n));let i=o(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Rw(i)),e}function Nw(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Dw(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Nw(n)),e}function Mw(t){let e={},n=o(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],Dw(n)),o(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let i=o(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function bw(t){let e={},n=o(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=o(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function kw(t,e,n){let i={},r=o(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],dn(Te(r)));let a=o(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=o(e,["topP"]);l!=null&&s(i,["topP"],l);let c=o(e,["topK"]);c!=null&&s(i,["topK"],c);let h=o(e,["candidateCount"]);h!=null&&s(i,["candidateCount"],h);let d=o(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let f=o(e,["stopSequences"]);f!=null&&s(i,["stopSequences"],f);let m=o(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=o(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let w=o(e,["presencePenalty"]);w!=null&&s(i,["presencePenalty"],w);let N=o(e,["frequencyPenalty"]);N!=null&&s(i,["frequencyPenalty"],N);let D=o(e,["seed"]);D!=null&&s(i,["seed"],D);let M=o(e,["responseMimeType"]);M!=null&&s(i,["responseMimeType"],M);let V=o(e,["responseSchema"]);V!=null&&s(i,["responseSchema"],dw(pa(V)));let k=o(e,["responseJsonSchema"]);k!=null&&s(i,["responseJsonSchema"],k);let L=o(e,["routingConfig"]);L!=null&&s(i,["routingConfig"],L);let q=o(e,["modelSelectionConfig"]);q!=null&&s(i,["modelConfig"],hw(q));let O=o(e,["safetySettings"]);if(n!==void 0&&O!=null){let de=O;Array.isArray(de)&&(de=de.map(zn=>fw(zn))),s(n,["safetySettings"],de)}let G=o(e,["tools"]);if(n!==void 0&&G!=null){let de=un(G);Array.isArray(de)&&(de=de.map(zn=>af(ln(zn)))),s(n,["tools"],de)}let C=o(e,["toolConfig"]);n!==void 0&&C!=null&&s(n,["toolConfig"],Pw(C));let I=o(e,["labels"]);n!==void 0&&I!=null&&s(n,["labels"],I);let T=o(e,["cachedContent"]);n!==void 0&&T!=null&&s(n,["cachedContent"],rt(t,T));let A=o(e,["responseModalities"]);A!=null&&s(i,["responseModalities"],A);let v=o(e,["mediaResolution"]);v!=null&&s(i,["mediaResolution"],v);let S=o(e,["speechConfig"]);S!=null&&s(i,["speechConfig"],Mw(ma(S)));let E=o(e,["audioTimestamp"]);E!=null&&s(i,["audioTimestamp"],E);let ge=o(e,["thinkingConfig"]);return ge!=null&&s(i,["thinkingConfig"],bw(ge)),i}function Ah(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>dn(c))),s(n,["contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["generationConfig"],kw(t,a,n)),n}function xw(t,e){let n={},i=o(t,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);let r=o(t,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);let a=o(t,["outputDimensionality"]);e!==void 0&&a!=null&&s(e,["parameters","outputDimensionality"],a);let l=o(t,["mimeType"]);e!==void 0&&l!=null&&s(e,["instances[]","mimeType"],l);let c=o(t,["autoTruncate"]);return e!==void 0&&c!=null&&s(e,["parameters","autoTruncate"],c),n}function Vw(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);r!=null&&s(n,["instances[]","content"],fa(t,r));let a=o(e,["config"]);return a!=null&&s(n,["config"],xw(a,n)),n}function Lw(t,e){let n={},i=o(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let r=o(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);let a=o(t,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);let l=o(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);let c=o(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);let h=o(t,["seed"]);e!==void 0&&h!=null&&s(e,["parameters","seed"],h);let d=o(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);let f=o(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);let m=o(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);let y=o(t,["includeRaiReason"]);e!==void 0&&y!=null&&s(e,["parameters","includeRaiReason"],y);let w=o(t,["language"]);e!==void 0&&w!=null&&s(e,["parameters","language"],w);let N=o(t,["outputMimeType"]);e!==void 0&&N!=null&&s(e,["parameters","outputOptions","mimeType"],N);let D=o(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&s(e,["parameters","outputOptions","compressionQuality"],D);let M=o(t,["addWatermark"]);e!==void 0&&M!=null&&s(e,["parameters","addWatermark"],M);let V=o(t,["imageSize"]);e!==void 0&&V!=null&&s(e,["parameters","sampleImageSize"],V);let k=o(t,["enhancePrompt"]);return e!==void 0&&k!=null&&s(e,["parameters","enhancePrompt"],k),n}function Fw(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);let a=o(e,["config"]);return a!=null&&s(n,["config"],Lw(a,n)),n}function Be(t){let e={},n=o(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);let i=o(t,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Vt(i));let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Uw(t){let e={},n=o(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);let i=o(t,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);let r=o(t,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function Ow(t){let e={},n=o(t,["controlType"]);n!=null&&s(e,["controlType"],n);let i=o(t,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function qw(t){let e={},n=o(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function Bw(t){let e={},n=o(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);let i=o(t,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function Gw(t){let e={},n=o(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],Be(n));let i=o(t,["referenceId"]);i!=null&&s(e,["referenceId"],i);let r=o(t,["referenceType"]);r!=null&&s(e,["referenceType"],r);let a=o(t,["maskImageConfig"]);a!=null&&s(e,["maskImageConfig"],Uw(a));let l=o(t,["controlImageConfig"]);l!=null&&s(e,["controlImageConfig"],Ow(l));let c=o(t,["styleImageConfig"]);c!=null&&s(e,["styleImageConfig"],qw(c));let h=o(t,["subjectImageConfig"]);return h!=null&&s(e,["subjectImageConfig"],Bw(h)),e}function $w(t,e){let n={},i=o(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let r=o(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);let a=o(t,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);let l=o(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);let c=o(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);let h=o(t,["seed"]);e!==void 0&&h!=null&&s(e,["parameters","seed"],h);let d=o(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);let f=o(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);let m=o(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);let y=o(t,["includeRaiReason"]);e!==void 0&&y!=null&&s(e,["parameters","includeRaiReason"],y);let w=o(t,["language"]);e!==void 0&&w!=null&&s(e,["parameters","language"],w);let N=o(t,["outputMimeType"]);e!==void 0&&N!=null&&s(e,["parameters","outputOptions","mimeType"],N);let D=o(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&s(e,["parameters","outputOptions","compressionQuality"],D);let M=o(t,["addWatermark"]);e!==void 0&&M!=null&&s(e,["parameters","addWatermark"],M);let V=o(t,["editMode"]);e!==void 0&&V!=null&&s(e,["parameters","editMode"],V);let k=o(t,["baseSteps"]);return e!==void 0&&k!=null&&s(e,["parameters","editConfig","baseSteps"],k),n}function Hw(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);let a=o(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Gw(h))),s(n,["instances[0]","referenceImages"],c)}let l=o(e,["config"]);return l!=null&&s(n,["config"],$w(l,n)),n}function zw(t,e){let n={},i=o(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let r=o(t,["includeRaiReason"]);e!==void 0&&r!=null&&s(e,["parameters","includeRaiReason"],r);let a=o(t,["outputMimeType"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","mimeType"],a);let l=o(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);let c=o(t,["enhanceInputImage"]);e!==void 0&&c!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],c);let h=o(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],h);let d=o(t,["numberOfImages"]);e!==void 0&&d!=null&&s(e,["parameters","sampleCount"],d);let f=o(t,["mode"]);return e!==void 0&&f!=null&&s(e,["parameters","mode"],f),n}function Ww(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["image"]);r!=null&&s(n,["instances[0]","image"],Be(r));let a=o(e,["upscaleFactor"]);a!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],a);let l=o(e,["config"]);return l!=null&&s(n,["config"],zw(l,n)),n}function Kw(t){let e={},n=o(t,["productImage"]);return n!=null&&s(e,["image"],Be(n)),e}function Jw(t,e){let n={},i=o(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let r=o(t,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],Be(r));let a=o(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Kw(c))),s(e,["instances[0]","productImages"],l)}return n}function Yw(t,e){let n={},i=o(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let r=o(t,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);let a=o(t,["outputGcsUri"]);e!==void 0&&a!=null&&s(e,["parameters","storageUri"],a);let l=o(t,["seed"]);e!==void 0&&l!=null&&s(e,["parameters","seed"],l);let c=o(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);let h=o(t,["personGeneration"]);e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h);let d=o(t,["addWatermark"]);e!==void 0&&d!=null&&s(e,["parameters","addWatermark"],d);let f=o(t,["outputMimeType"]);e!==void 0&&f!=null&&s(e,["parameters","outputOptions","mimeType"],f);let m=o(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m);let y=o(t,["enhancePrompt"]);return e!==void 0&&y!=null&&s(e,["parameters","enhancePrompt"],y),n}function Qw(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["source"]);r!=null&&s(n,["config"],Jw(r,n));let a=o(e,["config"]);return a!=null&&s(n,["config"],Yw(a,n)),n}function Xw(t){let e={},n=o(t,["image"]);return n!=null&&s(e,["image"],Be(n)),e}function Zw(t,e){let n={},i=o(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let r=o(t,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],Be(r));let a=o(t,["scribbleImage"]);return e!==void 0&&a!=null&&s(e,["instances[0]","scribble"],Xw(a)),n}function jw(t,e){let n={},i=o(t,["mode"]);e!==void 0&&i!=null&&s(e,["parameters","mode"],i);let r=o(t,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);let a=o(t,["confidenceThreshold"]);e!==void 0&&a!=null&&s(e,["parameters","confidenceThreshold"],a);let l=o(t,["maskDilation"]);e!==void 0&&l!=null&&s(e,["parameters","maskDilation"],l);let c=o(t,["binaryColorThreshold"]);return e!==void 0&&c!=null&&s(e,["parameters","binaryColorThreshold"],c),n}function eC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["source"]);r!=null&&s(n,["config"],Zw(r,n));let a=o(e,["config"]);return a!=null&&s(n,["config"],jw(a,n)),n}function tC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","name"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function nC(t,e,n){let i={},r=o(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);let a=o(e,["pageToken"]);n!==void 0&&a!=null&&s(n,["_query","pageToken"],a);let l=o(e,["filter"]);n!==void 0&&l!=null&&s(n,["_query","filter"],l);let c=o(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],Gh(t,c)),i}function iC(t,e){let n={},i=o(e,["config"]);return i!=null&&s(n,["config"],nC(t,i,n)),n}function rC(t,e){let n={},i=o(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let r=o(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);let a=o(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&s(e,["defaultCheckpointId"],a),n}function oC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],rC(r,n)),n}function sC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","name"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],r),n}function aC(t,e){let n={},i=o(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],dn(Te(i)));let r=o(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>af(c))),s(e,["tools"],l)}let a=o(t,["generationConfig"]);return e!==void 0&&a!=null&&s(e,["generationConfig"],a),n}function lC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>dn(c))),s(n,["contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["config"],aC(a,n)),n}function uC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["contents"]);if(r!=null){let l=Le(r);Array.isArray(l)&&(l=l.map(c=>dn(c))),s(n,["contents"],l)}let a=o(e,["config"]);return a!=null&&s(n,["config"],a),n}function lf(t){let e={},n=o(t,["uri"]);n!=null&&s(e,["gcsUri"],n);let i=o(t,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Vt(i));let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function cC(t,e){let n={},i=o(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let r=o(t,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],Be(r));let a=o(t,["video"]);return e!==void 0&&a!=null&&s(e,["instances[0]","video"],lf(a)),n}function dC(t){let e={},n=o(t,["image"]);n!=null&&s(e,["image"],Be(n));let i=o(t,["referenceType"]);return i!=null&&s(e,["referenceType"],i),e}function hC(t){let e={},n=o(t,["image"]);n!=null&&s(e,["_self"],Be(n));let i=o(t,["maskMode"]);return i!=null&&s(e,["maskMode"],i),e}function fC(t,e){let n={},i=o(t,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let r=o(t,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);let a=o(t,["fps"]);e!==void 0&&a!=null&&s(e,["parameters","fps"],a);let l=o(t,["durationSeconds"]);e!==void 0&&l!=null&&s(e,["parameters","durationSeconds"],l);let c=o(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);let h=o(t,["aspectRatio"]);e!==void 0&&h!=null&&s(e,["parameters","aspectRatio"],h);let d=o(t,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);let f=o(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);let m=o(t,["pubsubTopic"]);e!==void 0&&m!=null&&s(e,["parameters","pubsubTopic"],m);let y=o(t,["negativePrompt"]);e!==void 0&&y!=null&&s(e,["parameters","negativePrompt"],y);let w=o(t,["enhancePrompt"]);e!==void 0&&w!=null&&s(e,["parameters","enhancePrompt"],w);let N=o(t,["generateAudio"]);e!==void 0&&N!=null&&s(e,["parameters","generateAudio"],N);let D=o(t,["lastFrame"]);e!==void 0&&D!=null&&s(e,["instances[0]","lastFrame"],Be(D));let M=o(t,["referenceImages"]);if(e!==void 0&&M!=null){let L=M;Array.isArray(L)&&(L=L.map(q=>dC(q))),s(e,["instances[0]","referenceImages"],L)}let V=o(t,["mask"]);e!==void 0&&V!=null&&s(e,["instances[0]","mask"],hC(V));let k=o(t,["compressionQuality"]);return e!==void 0&&k!=null&&s(e,["parameters","compressionQuality"],k),n}function pC(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["_url","model"],Y(t,i));let r=o(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);let a=o(e,["image"]);a!=null&&s(n,["instances[0]","image"],Be(a));let l=o(e,["video"]);l!=null&&s(n,["instances[0]","video"],lf(l));let c=o(e,["source"]);c!=null&&s(n,["config"],cC(c,n));let h=o(e,["config"]);return h!=null&&s(n,["config"],fC(h,n)),n}function mC(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function gC(t){let e={},n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function yC(t){let e={},n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function _C(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function TC(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],mC(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],gC(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],yC(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],_C(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function IC(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>TC(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function EC(t){let e={},n=o(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function vC(t){let e={},n=o(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=o(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function wC(t){let e={},n=o(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>vC(r))),s(e,["urlMetadata"],i)}return e}function CC(t){let e={},n=o(t,["content"]);n!=null&&s(e,["content"],IC(n));let i=o(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],EC(i));let r=o(t,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);let a=o(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=o(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],wC(l));let c=o(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let h=o(t,["groundingMetadata"]);h!=null&&s(e,["groundingMetadata"],h);let d=o(t,["index"]);d!=null&&s(e,["index"],d);let f=o(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);let m=o(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Sh(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(d=>CC(d))),s(e,["candidates"],h)}let r=o(t,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);let a=o(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);let l=o(t,["responseId"]);l!=null&&s(e,["responseId"],l);let c=o(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function AC(t){let e={},n=o(t,["values"]);return n!=null&&s(e,["values"],n),e}function SC(){return{}}function RC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>AC(l))),s(e,["embeddings"],a)}return o(t,["metadata"])!=null&&s(e,["metadata"],SC()),e}function PC(t){let e={},n=o(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],Vt(n));let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function uf(t){let e={},n=o(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);let i=o(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);let r=o(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function NC(t){let e={},n=o(t,["_self"]);n!=null&&s(e,["image"],PC(n));let i=o(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);let r=o(t,["_self"]);return r!=null&&s(e,["safetyAttributes"],uf(r)),e}function DC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>NC(l))),s(e,["generatedImages"],a)}let r=o(t,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],uf(r)),e}function MC(t){let e={},n=o(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=o(t,["createTime"]);i!=null&&s(e,["createTime"],i);let r=o(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Ks(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["description"]);r!=null&&s(e,["description"],r);let a=o(t,["version"]);a!=null&&s(e,["version"],a);let l=o(t,["_self"]);l!=null&&s(e,["tunedModelInfo"],MC(l));let c=o(t,["inputTokenLimit"]);c!=null&&s(e,["inputTokenLimit"],c);let h=o(t,["outputTokenLimit"]);h!=null&&s(e,["outputTokenLimit"],h);let d=o(t,["supportedGenerationMethods"]);return d!=null&&s(e,["supportedActions"],d),e}function bC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["_self"]);if(r!=null){let a=$h(r);Array.isArray(a)&&(a=a.map(l=>Ks(l))),s(e,["models"],a)}return e}function kC(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function xC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["totalTokens"]);i!=null&&s(e,["totalTokens"],i);let r=o(t,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function VC(t){let e={},n=o(t,["video","uri"]);n!=null&&s(e,["uri"],n);let i=o(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],Vt(i));let r=o(t,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function LC(t){let e={},n=o(t,["_self"]);return n!=null&&s(e,["video"],VC(n)),e}function FC(t){let e={},n=o(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>LC(l))),s(e,["generatedVideos"],a)}let i=o(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let r=o(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function UC(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["metadata"]);i!=null&&s(e,["metadata"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);a!=null&&s(e,["error"],a);let l=o(t,["response","generateVideoResponse"]);return l!=null&&s(e,["response"],FC(l)),e}function OC(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qC(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["data"]);i!=null&&s(e,["data"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function BC(t){let e={},n=o(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=o(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function GC(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function $C(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],OC(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],qC(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],BC(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],GC(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function HC(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>$C(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function zC(t){let e={},n=o(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function WC(t){let e={},n=o(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=o(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function KC(t){let e={},n=o(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>WC(r))),s(e,["urlMetadata"],i)}return e}function JC(t){let e={},n=o(t,["content"]);n!=null&&s(e,["content"],HC(n));let i=o(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],zC(i));let r=o(t,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);let a=o(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=o(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],KC(l));let c=o(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let h=o(t,["groundingMetadata"]);h!=null&&s(e,["groundingMetadata"],h);let d=o(t,["index"]);d!=null&&s(e,["index"],d);let f=o(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);let m=o(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function Rh(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>JC(f))),s(e,["candidates"],d)}let r=o(t,["createTime"]);r!=null&&s(e,["createTime"],r);let a=o(t,["modelVersion"]);a!=null&&s(e,["modelVersion"],a);let l=o(t,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);let c=o(t,["responseId"]);c!=null&&s(e,["responseId"],c);let h=o(t,["usageMetadata"]);return h!=null&&s(e,["usageMetadata"],h),e}function YC(t){let e={},n=o(t,["truncated"]);n!=null&&s(e,["truncated"],n);let i=o(t,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function QC(t){let e={},n=o(t,["values"]);n!=null&&s(e,["values"],n);let i=o(t,["statistics"]);return i!=null&&s(e,["statistics"],YC(i)),e}function XC(t){let e={},n=o(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function ZC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>QC(l))),s(e,["embeddings"],a)}let r=o(t,["metadata"]);return r!=null&&s(e,["metadata"],XC(r)),e}function cf(t){let e={},n=o(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);let i=o(t,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],Vt(i));let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function df(t){let e={},n=o(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);let i=o(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);let r=o(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function kr(t){let e={},n=o(t,["_self"]);n!=null&&s(e,["image"],cf(n));let i=o(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);let r=o(t,["_self"]);r!=null&&s(e,["safetyAttributes"],df(r));let a=o(t,["prompt"]);return a!=null&&s(e,["enhancedPrompt"],a),e}function jC(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>kr(l))),s(e,["generatedImages"],a)}let r=o(t,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],df(r)),e}function eA(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>kr(a))),s(e,["generatedImages"],r)}return e}function tA(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>kr(a))),s(e,["generatedImages"],r)}return e}function nA(t){let e={},n=o(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>kr(r))),s(e,["generatedImages"],i)}return e}function iA(t){let e={},n=o(t,["label"]);n!=null&&s(e,["label"],n);let i=o(t,["score"]);return i!=null&&s(e,["score"],i),e}function rA(t){let e={},n=o(t,["_self"]);n!=null&&s(e,["mask"],cf(n));let i=o(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>iA(a))),s(e,["labels"],r)}return e}function oA(t){let e={},n=o(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>rA(r))),s(e,["generatedMasks"],i)}return e}function sA(t){let e={},n=o(t,["endpoint"]);n!=null&&s(e,["name"],n);let i=o(t,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function aA(t){let e={},n=o(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);let i=o(t,["createTime"]);i!=null&&s(e,["createTime"],i);let r=o(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function lA(t){let e={},n=o(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);let i=o(t,["epoch"]);i!=null&&s(e,["epoch"],i);let r=o(t,["step"]);return r!=null&&s(e,["step"],r),e}function Js(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["displayName"]);i!=null&&s(e,["displayName"],i);let r=o(t,["description"]);r!=null&&s(e,["description"],r);let a=o(t,["versionId"]);a!=null&&s(e,["version"],a);let l=o(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>sA(y))),s(e,["endpoints"],m)}let c=o(t,["labels"]);c!=null&&s(e,["labels"],c);let h=o(t,["_self"]);h!=null&&s(e,["tunedModelInfo"],aA(h));let d=o(t,["defaultCheckpointId"]);d!=null&&s(e,["defaultCheckpointId"],d);let f=o(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>lA(y))),s(e,["checkpoints"],m)}return e}function uA(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["_self"]);if(r!=null){let a=$h(r);Array.isArray(a)&&(a=a.map(l=>Js(l))),s(e,["models"],a)}return e}function cA(t){let e={},n=o(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function dA(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["totalTokens"]);return i!=null&&s(e,["totalTokens"],i),e}function hA(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["tokensInfo"]);return i!=null&&s(e,["tokensInfo"],i),e}function fA(t){let e={},n=o(t,["gcsUri"]);n!=null&&s(e,["uri"],n);let i=o(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],Vt(i));let r=o(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function pA(t){let e={},n=o(t,["_self"]);return n!=null&&s(e,["video"],fA(n)),e}function mA(t){let e={},n=o(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>pA(l))),s(e,["generatedVideos"],a)}let i=o(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let r=o(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function gA(t){let e={},n=o(t,["name"]);n!=null&&s(e,["name"],n);let i=o(t,["metadata"]);i!=null&&s(e,["metadata"],i);let r=o(t,["done"]);r!=null&&s(e,["done"],r);let a=o(t,["error"]);a!=null&&s(e,["error"],a);let l=o(t,["response"]);return l!=null&&s(e,["response"],mA(l)),e}var yA="Content-Type",_A="X-Server-Timeout",TA="User-Agent",Ys="x-goog-api-client",IA="1.20.0",EA=`google-genai-sdk/${IA}`,vA="v1beta1",wA="v1beta",Ph=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Qs=class{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vA,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:wA,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){let r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(let[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){let i=JSON.parse(JSON.stringify(e));for(let[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){let r=new AbortController,a=r.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>r.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&CA(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Nh(r),new ui(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Nh(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return sn(this,arguments,function*(){let r=(n=e?.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){let{done:c,value:h}=yield ee(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=a.decode(h,{stream:!0});try{let m=JSON.parse(d);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),w=y.status,N=y.code,D=`got status: ${w}. ${JSON.stringify(m)}`;if(N>=400&&N<600)throw new Dr({message:D,status:N})}}catch(m){if(m.name==="ApiError")throw m}l+=d;let f=l.match(Ph);for(;f;){let m=f[1];try{let y=new Response(m,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ee(new ui(y)),l=l.slice(f[0].length),f=l.match(Ph)}catch(y){throw new Error(`exception parsing stream chunk ${m}. ${y}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},n=EA+" "+this.clientOptions.userAgentExtra;return e[TA]=n,e[Ys]=n,e[yA]="application/json",e}async getHeadersInternal(e){let n=new Headers;if(e&&e.headers){for(let[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(_A,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;let r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let a=this.clientOptions.uploader,l=await a.stat(e);r.sizeBytes=String(l.size);let c=(i=n?.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;let h=await this.fetchUploadUrl(r,n);return a.upload(e,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n?.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let a={file:e},l=await this.request({path:F("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!l||!l?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let c=(i=l?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}};async function Nh(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};let r=JSON.stringify(i);throw n>=400&&n<600?new Dr({message:r,status:n}):new Error(r)}}function CA(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){let c=Object.assign({},a);for(let h in l)if(Object.prototype.hasOwnProperty.call(l,h)){let d=l[h],f=c[h];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?c[h]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),c[h]=d)}return c}let r=i(n,e);t.body=JSON.stringify(r)}var AA="mcp_used/unknown",SA=!1;function hf(t){for(let e of t)if(RA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return SA}function ff(t){var e;let n=(e=t[Ys])!==null&&e!==void 0?e:"";t[Ys]=(n+` ${AA}`).trimStart()}function RA(t){return t!==null&&typeof t=="object"&&t instanceof Xs}function PA(t,e=100){return sn(this,arguments,function*(){let i,r=0;for(;r<e;){let a=yield ee(t.listTools({cursor:i}));for(let l of a.tools)yield yield ee(l),r++;if(!a.nextCursor)break;i=a.nextCursor}})}var Xs=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;let a={},l=[];for(let f of this.mcpClients)try{for(var c=!0,h=(n=void 0,li(PA(f))),d;d=await h.next(),e=d.done,!e;c=!0){r=d.value,c=!1;let m=r;l.push(m);let y=m.name;if(a[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);a[y]=f}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Yy(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[i.name],a;this.config.timeout&&(a={timeout:this.config.timeout});let l=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}};async function NA(t,e,n){let i=new Fs,r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);let a=sv(r);Object.assign(i,a),e(i)}var Zs=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=MA(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`,d=()=>{},f=new Promise(L=>{d=L}),m=e.callbacks,y=function(){d({})},w=this.apiClient,N={onopen:y,onmessage:L=>{NA(w,m.onmessage,L)},onerror:(n=m?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=m?.onclose)!==null&&i!==void 0?i:function(L){}},D=this.webSocketFactory.create(h,DA(l),N);D.connect(),await f;let M=Y(this.apiClient,e.model),V=ef({model:M}),k=Ws({setup:V});return D.send(JSON.stringify(k)),new js(D,this.apiClient)}},js=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=iE(e),i=tf(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=rE(e),i=Ws(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){let n=Ws({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(rn.PLAY)}pause(){this.sendPlaybackControl(rn.PAUSE)}stop(){this.sendPlaybackControl(rn.STOP)}resetContext(){this.sendPlaybackControl(rn.RESET_CONTEXT)}close(){this.conn.close()}};function DA(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function MA(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var bA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kA(t,e,n){let i=new Ls,r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;let a=JSON.parse(r);if(t.isVertexAI()){let l=Tv(a);Object.assign(i,l)}else{let l=XE(a);Object.assign(i,l)}e(i)}var ea=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Zs(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),f,m=this.apiClient.getHeaders();e.config&&e.config.tools&&hf(e.config.tools)&&ff(m);let y=LA(m);if(this.apiClient.isVertexAI())f=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y);else{let T=this.apiClient.getApiKey(),A="BidiGenerateContent",v="key";T?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",v="access_token"),f=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${A}?${v}=${T}`}let w=()=>{},N=new Promise(T=>{w=T}),D=e.callbacks,M=function(){var T;(T=D?.onopen)===null||T===void 0||T.call(D),w({})},V=this.apiClient,k={onopen:M,onmessage:T=>{kA(V,D.onmessage,T)},onerror:(n=D?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=D?.onclose)!==null&&i!==void 0?i:function(T){}},L=this.webSocketFactory.create(f,VA(y),k);L.connect(),await N;let q=Y(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){let T=this.apiClient.getProject(),A=this.apiClient.getLocation();q=`projects/${T}/locations/${A}/`+q}let O={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[_r.AUDIO]}:e.config.responseModalities=[_r.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],C=[];for(let T of G)if(this.isCallableTool(T)){let A=T;C.push(await A.tool())}else C.push(T);C.length>0&&(e.config.tools=C);let I={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=kE(this.apiClient,I):O=jI(this.apiClient,I),delete O.config,L.send(JSON.stringify(O)),new ta(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},xA={turnComplete:!0},ta=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Le(n.turns),e.isVertexAI()?i=i.map(r=>dn(r)):i=i.map(r=>br(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(bA)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},xA),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:LE(e)}:n={realtimeInput:nE(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function VA(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function LA(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var Dh=10;function Mh(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let l of(n=t?.tools)!==null&&n!==void 0?n:[])if(an(l)){r=!0;break}if(!r)return!0;let a=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function an(t){return"callTool"in t&&typeof t.callTool=="function"}function FA(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>an(r)))!==null&&i!==void 0?i:!1}function UA(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!an(r)))!==null&&i!==void 0?i:!1}function bh(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var na=class extends it{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,l,c;let h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!FA(n)||Mh(n.config))return await this.generateContentInternal(h);if(UA(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f,m=Le(h.contents),y=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:Dh,w=0;for(;w<y&&(d=await this.generateContentInternal(h),!(!d.functionCalls||d.functionCalls.length===0));){let N=d.candidates[0].content,D=[];for(let M of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(an(M)){let k=await M.callTool(d.functionCalls);D.push(...k)}w++,f={role:"user",parts:D},h.contents=Le(h.contents),h.contents.push(N),h.contents.push(f),bh(h.config)&&(m.push(N),m.push(f))}return bh(h.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Mh(n.config)){let i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a,l=[];if(i?.generatedImages)for(let h of i.generatedImages)h&&h?.safetyAttributes&&((r=h?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h?.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;let l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new xt(kt.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;let a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;let l=await Promise.all(a.map(async h=>an(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&hf(e.config.tools)){let h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{},d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),ff(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;let a=new Map;for(let l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(an(l)){let c=l,h=await c.tool();for(let d of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,i,r;let a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Dh,l=!1,c=0,h=await this.initAfcToolsMap(e);return(function(d,f,m){var y,w;return sn(this,arguments,function*(){for(var N,D,M,V;c<a;){l&&(c++,l=!1);let O=yield ee(d.processParamsMaybeAddMcpUsage(m)),G=yield ee(d.generateContentStreamInternal(O)),C=[],I=[];try{for(var k=!0,L=(D=void 0,li(G)),q;q=yield ee(L.next()),N=q.done,!N;k=!0){V=q.value,k=!1;let T=V;if(yield yield ee(T),T.candidates&&(!((y=T.candidates[0])===null||y===void 0)&&y.content)){I.push(T.candidates[0].content);for(let A of(w=T.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(A.functionCall.name)){let v=yield ee(f.get(A.functionCall.name).callTool([A.functionCall]));C.push(...v)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(T){D={error:T}}finally{try{!k&&!N&&(M=L.return)&&(yield ee(M.call(L)))}finally{if(D)throw D.error}}if(C.length>0){l=!0;let T=new bt;T.candidates=[{content:{role:"user",parts:C}}],yield yield ee(T);let A=[];A.push(...I),A.push({role:"user",parts:C});let v=Le(m.contents).concat(A);m.contents=v}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=Ah(this.apiClient,e);return c=F("{model}:generateContent",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=Rh(f),y=new bt;return Object.assign(y,m),y})}else{let d=Ch(this.apiClient,e);return c=F("{model}:generateContent",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=Sh(f),y=new bt;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=Ah(this.apiClient,e);return c=F("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return sn(this,arguments,function*(){var y,w,N,D;try{for(var M=!0,V=li(m),k;k=yield ee(V.next()),y=k.done,!y;M=!0){D=k.value,M=!1;let L=D,q=Rh(yield ee(L.json()));q.sdkHttpResponse={headers:L.headers};let O=new bt;Object.assign(O,q),yield yield ee(O)}}catch(L){w={error:L}}finally{try{!M&&!y&&(N=V.return)&&(yield ee(N.call(V)))}finally{if(w)throw w.error}}})})}else{let d=Ch(this.apiClient,e);return c=F("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(m){return sn(this,arguments,function*(){var y,w,N,D;try{for(var M=!0,V=li(m),k;k=yield ee(V.next()),y=k.done,!y;M=!0){D=k.value,M=!1;let L=D,q=Sh(yield ee(L.json()));q.sdkHttpResponse={headers:L.headers};let O=new bt;Object.assign(O,q),yield yield ee(O)}}catch(L){w={error:L}}finally{try{!M&&!y&&(N=V.return)&&(yield ee(N.call(V)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=Vw(this.apiClient,e);return c=F("{model}:predict",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=ZC(f),y=new Tr;return Object.assign(y,m),y})}else{let d=Wv(this.apiClient,e);return c=F("{model}:batchEmbedContents",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=RC(f),y=new Tr;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=Fw(this.apiClient,e);return c=F("{model}:predict",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=jC(f),y=new Ir;return Object.assign(y,m),y})}else{let d=Jv(this.apiClient,e);return c=F("{model}:predict",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=DC(f),y=new Ir;return Object.assign(y,m),y})}}async editImageInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=Hw(this.apiClient,e);return a=F("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>{let d=eA(h),f=new Ps;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=Ww(this.apiClient,e);return a=F("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>{let d=tA(h),f=new Ns;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=Qw(this.apiClient,e);return a=F("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{let d=nA(h),f=new Ds;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=eC(this.apiClient,e);return a=F("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{let d=oA(h),f=new Ms;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=tC(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Js(f))}else{let d=Yv(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Ks(f))}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=iC(this.apiClient,e);return c=F("{models_url}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=uA(f),y=new Er;return Object.assign(y,m),y})}else{let d=Xv(this.apiClient,e);return c=F("{models_url}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=bC(f),y=new Er;return Object.assign(y,m),y})}}async update(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=oC(this.apiClient,e);return c=F("{model}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Js(f))}else{let d=jv(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Ks(f))}}async delete(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=sC(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=cA(f),y=new vr;return Object.assign(y,m),y})}else{let d=ew(this.apiClient,e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=kC(f),y=new vr;return Object.assign(y,m),y})}}async countTokens(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=lC(this.apiClient,e);return c=F("{model}:countTokens",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=dA(f),y=new wr;return Object.assign(y,m),y})}else{let d=nw(this.apiClient,e);return c=F("{model}:countTokens",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=xC(f),y=new wr;return Object.assign(y,m),y})}}async computeTokens(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=uC(this.apiClient,e);return a=F("{model}:computeTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>{let d=hA(h),f=new bs;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=pC(this.apiClient,e);return c=F("{model}:predictLongRunning",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{let m=gA(f),y=new Cr;return Object.assign(y,m),y})}else{let d=ow(this.apiClient,e);return c=F("{model}:predictLongRunning",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{let m=UC(f),y=new Cr;return Object.assign(y,m),y})}}};var ia=class extends it{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],a;i&&"httpOptions"in i&&(a=i.httpOptions);let l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],a;i&&"httpOptions"in i&&(a=i.httpOptions);let l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=ky(e);return c=F("{operationName}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l}else{let d=My(e);return c=F("{operationName}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=by(e);return a=F("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function OA(t){let e={},n=o(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function pf(t){let e={},n=o(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],OA(n)),e}function qA(t){let e={},n=o(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=o(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],pf(i)),e}function BA(t){let e={},n=o(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>qA(r))),s(e,["speakerVoiceConfigs"],i)}return e}function GA(t){let e={},n=o(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],pf(n));let i=o(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],BA(i));let r=o(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function $A(t){let e={},n=o(t,["fps"]);n!=null&&s(e,["fps"],n);let i=o(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let r=o(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function HA(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["data"]);n!=null&&s(e,["data"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function zA(t){let e={};if(o(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=o(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=o(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function WA(t){let e={},n=o(t,["id"]);n!=null&&s(e,["id"],n);let i=o(t,["args"]);i!=null&&s(e,["args"],i);let r=o(t,["name"]);return r!=null&&s(e,["name"],r),e}function KA(t){let e={},n=o(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],$A(n));let i=o(t,["thought"]);i!=null&&s(e,["thought"],i);let r=o(t,["inlineData"]);r!=null&&s(e,["inlineData"],HA(r));let a=o(t,["fileData"]);a!=null&&s(e,["fileData"],zA(a));let l=o(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=o(t,["functionCall"]);c!=null&&s(e,["functionCall"],WA(c));let h=o(t,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);let d=o(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let f=o(t,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);let m=o(t,["text"]);return m!=null&&s(e,["text"],m),e}function JA(t){let e={},n=o(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>KA(a))),s(e,["parts"],r)}let i=o(t,["role"]);return i!=null&&s(e,["role"],i),e}function YA(t){let e={},n=o(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=o(t,["description"]);i!=null&&s(e,["description"],i);let r=o(t,["name"]);r!=null&&s(e,["name"],r);let a=o(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=o(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=o(t,["response"]);c!=null&&s(e,["response"],c);let h=o(t,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function QA(t){let e={},n=o(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=o(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function XA(t){let e={},n=o(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],QA(n)),o(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ZA(t){let e={},n=o(t,["mode"]);n!=null&&s(e,["mode"],n);let i=o(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function jA(t){let e={},n=o(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ZA(n)),e}function eS(){return{}}function tS(t){let e={},n=o(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function nS(t){let e={},n=o(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>YA(d))),s(e,["functionDeclarations"],h)}if(o(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=o(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],XA(i));let r=o(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],jA(r)),o(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(t,["urlContext"])!=null&&s(e,["urlContext"],eS());let l=o(t,["computerUse"]);l!=null&&s(e,["computerUse"],tS(l));let c=o(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function iS(t){let e={},n=o(t,["handle"]);if(n!=null&&s(e,["handle"],n),o(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kh(){return{}}function rS(t){let e={},n=o(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=o(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let r=o(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);let a=o(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=o(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function oS(t){let e={},n=o(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],rS(n));let i=o(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let r=o(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function sS(t){let e={},n=o(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function aS(t){let e={},n=o(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=o(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],sS(i)),e}function lS(t){let e={},n=o(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function uS(t,e){let n={},i=o(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let r=o(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);let a=o(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=o(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=o(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let h=o(t,["maxOutputTokens"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","maxOutputTokens"],h);let d=o(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let f=o(t,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);let m=o(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],GA(ga(m)));let y=o(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let w=o(t,["systemInstruction"]);e!==void 0&&w!=null&&s(e,["setup","systemInstruction"],JA(Te(w)));let N=o(t,["tools"]);if(e!==void 0&&N!=null){let O=un(N);Array.isArray(O)&&(O=O.map(G=>nS(ln(G)))),s(e,["setup","tools"],O)}let D=o(t,["sessionResumption"]);e!==void 0&&D!=null&&s(e,["setup","sessionResumption"],iS(D));let M=o(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&s(e,["setup","inputAudioTranscription"],kh());let V=o(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&s(e,["setup","outputAudioTranscription"],kh());let k=o(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],oS(k));let L=o(t,["contextWindowCompression"]);e!==void 0&&L!=null&&s(e,["setup","contextWindowCompression"],aS(L));let q=o(t,["proactivity"]);return e!==void 0&&q!=null&&s(e,["setup","proactivity"],lS(q)),n}function cS(t,e){let n={},i=o(e,["model"]);i!=null&&s(n,["setup","model"],Y(t,i));let r=o(e,["config"]);return r!=null&&s(n,["config"],uS(r,n)),n}function dS(t,e,n){let i={},r=o(e,["expireTime"]);n!==void 0&&r!=null&&s(n,["expireTime"],r);let a=o(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&s(n,["newSessionExpireTime"],a);let l=o(e,["uses"]);n!==void 0&&l!=null&&s(n,["uses"],l);let c=o(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&s(n,["bidiGenerateContentSetup"],cS(t,c));let h=o(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&s(n,["fieldMask"],h),i}function hS(t,e){let n={},i=o(e,["config"]);return i!=null&&s(n,["config"],dS(t,i,n)),n}function fS(t){let e={},n=o(t,["name"]);return n!=null&&s(e,["name"],n),e}function pS(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function mS(t,e){let n=null,i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;let r=t.fieldMask;if(n){let a=pS(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];r.length>0&&(c=r.map(d=>l.includes(d)?`generationConfig.${d}`:d));let h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}var ra=class extends it{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let c=hS(this.apiClient,e);a=F("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;let h=mS(c,e.config);return r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>fS(d))}}};function gS(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function yS(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);let a=o(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function _S(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],yS(n,e)),e}function TS(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function IS(t){let e={},n=o(t,["textInput"]);n!=null&&s(e,["textInput"],n);let i=o(t,["output"]);return i!=null&&s(e,["output"],i),e}function ES(t){let e={};if(o(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=o(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>IS(r))),s(e,["examples","examples"],i)}return e}function vS(t,e){let n={};if(o(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=o(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),o(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=o(t,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);let a=o(t,["learningRateMultiplier"]);if(a!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),o(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(o(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(o(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=o(t,["batchSize"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","batchSize"],l);let c=o(t,["learningRate"]);if(e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),o(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function wS(t){let e={},n=o(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=o(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);let r=o(t,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],ES(r));let a=o(t,["config"]);return a!=null&&s(e,["config"],vS(a,e)),e}function CS(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function AS(t,e){let n={},i=o(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let r=o(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);let a=o(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function SS(t){let e={},n=o(t,["config"]);return n!=null&&s(e,["config"],AS(n,e)),e}function RS(t){let e={},n=o(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=o(t,["config"]);return i!=null&&s(e,["config"],i),e}function PS(t,e){let n={},i=o(t,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);let r=o(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),o(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function NS(t,e){let n={},i=o(t,["gcsUri"]);i!=null&&s(n,["validationDatasetUri"],i);let r=o(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function DS(t,e){let n={},i=o(t,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],NS(i,n));let r=o(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);let a=o(t,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);let l=o(t,["epochCount"]);e!==void 0&&l!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);let c=o(t,["learningRateMultiplier"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);let h=o(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);let d=o(t,["preTunedModelCheckpointId"]);d!=null&&s(n,["preTunedModel","checkpointId"],d);let f=o(t,["adapterSize"]);if(e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),o(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(o(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let m=o(t,["labels"]);return e!==void 0&&m!=null&&s(e,["labels"],m),n}function MS(t){let e={},n=o(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=o(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);let r=o(t,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],PS(r,e));let a=o(t,["config"]);return a!=null&&s(e,["config"],DS(a,e)),e}function bS(t){let e={},n=o(t,["name"]);n!=null&&s(e,["model"],n);let i=o(t,["name"]);return i!=null&&s(e,["endpoint"],i),e}function mf(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["state"]);r!=null&&s(e,["state"],qh(r));let a=o(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=o(t,["tuningTask","startTime"]);l!=null&&s(e,["startTime"],l);let c=o(t,["tuningTask","completeTime"]);c!=null&&s(e,["endTime"],c);let h=o(t,["updateTime"]);h!=null&&s(e,["updateTime"],h);let d=o(t,["description"]);d!=null&&s(e,["description"],d);let f=o(t,["baseModel"]);f!=null&&s(e,["baseModel"],f);let m=o(t,["_self"]);m!=null&&s(e,["tunedModel"],bS(m));let y=o(t,["customBaseModel"]);y!=null&&s(e,["customBaseModel"],y);let w=o(t,["experiment"]);w!=null&&s(e,["experiment"],w);let N=o(t,["labels"]);N!=null&&s(e,["labels"],N);let D=o(t,["outputUri"]);D!=null&&s(e,["outputUri"],D);let M=o(t,["pipelineJob"]);M!=null&&s(e,["pipelineJob"],M);let V=o(t,["serviceAccount"]);V!=null&&s(e,["serviceAccount"],V);let k=o(t,["tunedModelDisplayName"]);return k!=null&&s(e,["tunedModelDisplayName"],k),e}function kS(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>mf(l))),s(e,["tuningJobs"],a)}return e}function xS(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["metadata"]);r!=null&&s(e,["metadata"],r);let a=o(t,["done"]);a!=null&&s(e,["done"],a);let l=o(t,["error"]);return l!=null&&s(e,["error"],l),e}function VS(t){let e={},n=o(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);let i=o(t,["epoch"]);i!=null&&s(e,["epoch"],i);let r=o(t,["step"]);r!=null&&s(e,["step"],r);let a=o(t,["endpoint"]);return a!=null&&s(e,["endpoint"],a),e}function LS(t){let e={},n=o(t,["model"]);n!=null&&s(e,["model"],n);let i=o(t,["endpoint"]);i!=null&&s(e,["endpoint"],i);let r=o(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>VS(l))),s(e,["checkpoints"],a)}return e}function oa(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["name"]);i!=null&&s(e,["name"],i);let r=o(t,["state"]);r!=null&&s(e,["state"],qh(r));let a=o(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=o(t,["startTime"]);l!=null&&s(e,["startTime"],l);let c=o(t,["endTime"]);c!=null&&s(e,["endTime"],c);let h=o(t,["updateTime"]);h!=null&&s(e,["updateTime"],h);let d=o(t,["error"]);d!=null&&s(e,["error"],d);let f=o(t,["description"]);f!=null&&s(e,["description"],f);let m=o(t,["baseModel"]);m!=null&&s(e,["baseModel"],m);let y=o(t,["tunedModel"]);y!=null&&s(e,["tunedModel"],LS(y));let w=o(t,["preTunedModel"]);w!=null&&s(e,["preTunedModel"],w);let N=o(t,["supervisedTuningSpec"]);N!=null&&s(e,["supervisedTuningSpec"],N);let D=o(t,["tuningDataStats"]);D!=null&&s(e,["tuningDataStats"],D);let M=o(t,["encryptionSpec"]);M!=null&&s(e,["encryptionSpec"],M);let V=o(t,["partnerModelTuningSpec"]);V!=null&&s(e,["partnerModelTuningSpec"],V);let k=o(t,["customBaseModel"]);k!=null&&s(e,["customBaseModel"],k);let L=o(t,["experiment"]);L!=null&&s(e,["experiment"],L);let q=o(t,["labels"]);q!=null&&s(e,["labels"],q);let O=o(t,["outputUri"]);O!=null&&s(e,["outputUri"],O);let G=o(t,["pipelineJob"]);G!=null&&s(e,["pipelineJob"],G);let C=o(t,["serviceAccount"]);C!=null&&s(e,["serviceAccount"],C);let I=o(t,["tunedModelDisplayName"]);return I!=null&&s(e,["tunedModelDisplayName"],I),e}function FS(t){let e={},n=o(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=o(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let r=o(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>oa(l))),s(e,["tuningJobs"],a)}return e}var sa=class extends it{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new xt(kt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel},r=Object.assign(Object.assign({},n),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),r=await this.tuneMldevInternal(i),a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:Rs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=CS(e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>oa(f))}else{let d=gS(e);return c=F("{name}",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>mf(f))}}async listInternal(e){var n,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){let d=SS(e);return c=F("tuningJobs",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=FS(f),y=new Ar;return Object.assign(y,m),y})}else{let d=_S(e);return c=F("tunedModels",d._url),h=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:f.headers},y})),l.then(f=>{let m=kS(f),y=new Ar;return Object.assign(y,m),y})}}async cancel(e){var n,i,r,a;let l="",c={};if(this.apiClient.isVertexAI()){let h=RS(e);l=F("{name}:cancel",h._url),c=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let h=TS(e);l=F("{name}:cancel",h._url),c=h._query,delete h.config,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI()){let c=MS(e);return a=F("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>oa(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=wS(e);return a=F("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:h.headers},f})),r.then(h=>xS(h))}}};var aa=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},US=1024*1024*8,OS=3,qS=1e3,BS=2,Ss="x-goog-upload-status";async function GS(t,e,n){var i,r,a;let l=0,c=0,h=new ui(new Response),d="upload";for(l=t.size;c<l;){let m=Math.min(US,l-c),y=t.slice(c,c+m);c+m>=l&&(d+=", finalize");let w=0,N=qS;for(;w<OS&&(h=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((i=h?.headers)===null||i===void 0)&&i[Ss]));)w++,await HS(N),N=N*BS;if(c+=m,((r=h?.headers)===null||r===void 0?void 0:r[Ss])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let f=await h?.json();if(((a=h?.headers)===null||a===void 0?void 0:a[Ss])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function $S(t){return{size:t.size,type:t.type}}function HS(t){return new Promise(e=>setTimeout(e,t))}var la=class{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GS(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $S(e)}};var ua=class{create(e,n,i){return new ca(e,n,i)}},ca=class{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var xh="x-goog-api-key",da=class{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(xh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xh,this.apiKey)}}};var zS="gl-node/",Mr=class{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let i=Dy(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;let r=new da(this.apiKey);this.apiClient=new Qs({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:zS+"web",uploader:new la,downloader:new aa}),this.models=new na(this.apiClient),this.live=new ea(this.apiClient,r,new ua),this.batches=new qs(this.apiClient),this.chats=new Gs(this.models,this.apiClient),this.caches=new Bs(this.apiClient),this.files=new zs(this.apiClient),this.operations=new ia(this.apiClient),this.authTokens=new ra(this.apiClient),this.tunings=new sa(this.apiClient)}};var za={};Sy(za,{FirebaseError:()=>fe,SDK_VERSION:()=>Ge,_DEFAULT_ENTRY_NAME:()=>Ye,_addComponent:()=>yn,_addOrOverwriteComponent:()=>Ba,_apps:()=>yt,_clearComponents:()=>ZR,_components:()=>gn,_getProvider:()=>Qe,_isFirebaseApp:()=>Ga,_isFirebaseServerApp:()=>Ne,_isFirebaseServerAppSettings:()=>Hf,_registerComponent:()=>ye,_removeServiceInstance:()=>$f,_serverApps:()=>mn,deleteApp:()=>zr,getApp:()=>Tn,getApps:()=>tP,initializeApp:()=>_n,initializeServerApp:()=>eP,onLog:()=>$a,registerVersion:()=>te,setLogLevel:()=>Ha});var gf=()=>{};var Tf=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WS=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){let a=t[n++],l=t[n++],c=t[n++],h=((r&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{let a=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},If={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let a=t[r],l=r+1<t.length,c=l?t[r+1]:0,h=r+2<t.length,d=h?t[r+2]:0,f=a>>2,m=(a&3)<<4|c>>4,y=(c&15)<<2|d>>6,w=d&63;h||(w=64,l||(y=64)),i.push(n[f],n[m],n[y],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let a=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;let d=r<t.length?n[t.charAt(r)]:64;++r;let m=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||c==null||d==null||m==null)throw new Ta;let y=a<<2|c>>4;if(i.push(y),d!==64){let w=c<<4&240|d>>2;if(i.push(w),m!==64){let N=d<<6&192|m;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ta=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},KS=function(t){let e=Tf(t);return If.encodeByteArray(e,!0)},Ea=function(t){return KS(t).replace(/\./g,"")},di=function(t){try{return If.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!JS(n)||(t[n]=hi(t[n],e[n]));return t}function JS(t){return t!=="__proto__"}function Vr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YS=()=>Vr().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&di(t[1]);return e&&JSON.parse(e)},Lr=()=>{try{return gf()||YS()||QS()||XS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ef=t=>Lr()?.emulatorHosts?.[t];var Fr=()=>Lr()?.config,va=t=>Lr()?.[`_${t}`];var xr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Lt(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wa(t){return(await fetch(t,{credentials:"include"})).ok}var ci={};function ZS(){let t={prod:[],emulator:[]};for(let e of Object.keys(ci))ci[e]?t.emulator.push(e):t.prod.push(e);return t}function jS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var yf=!1;function Ca(t,e){if(typeof window>"u"||typeof document>"u"||!Lt(window.location.host)||ci[t]===e||ci[t]||yf)return;ci[t]=e;function n(y){return`__firebase__banner__${y}`}let i="__firebase__banner",a=ZS().prod.length>0;function l(){let y=document.getElementById(i);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{yf=!0,l()},y}function f(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){let y=jS(i),w=n("text"),N=document.getElementById(w)||document.createElement("span"),D=n("learnmore"),M=document.getElementById(D)||document.createElement("a"),V=n("preprendIcon"),k=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let L=y.element;c(L),f(M,D);let q=d();h(k,V),L.append(k,N,M,q),document.body.appendChild(L)}a?(N.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function eR(){let t=Lr()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wf(){return typeof window<"u"||Aa()}function Aa(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cf(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ur(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Af(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sf(){let t=pe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Rf(){return!eR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fi(){try{return typeof indexedDB=="object"}catch{return!1}}function Or(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function Pf(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var tR="FirebaseError",fe=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tR,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ie.prototype.create)}},Ie=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?nR(a,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new fe(r,c,i)}};function nR(t,e){return t.replace(iR,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var iR=/\{\$([^}]+)}/g;function Sa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nf(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ke(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let a=t[r],l=e[r];if(_f(a)&&_f(l)){if(!Ke(a,l))return!1}else if(a!==l)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function _f(t){return t!==null&&typeof t=="object"}function hn(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fn(t){let e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function pn(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qr(t,e){let n=new Ia(t,e);return n.subscribe.bind(n)}var Ia=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");rR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=_a),r.error===void 0&&(r.error=_a),r.complete===void 0&&(r.complete=_a);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function rR(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _a(){}var oR=1e3,sR=2,aR=14400*1e3,lR=.5;function Ra(t,e=oR,n=sR){let i=e*Math.pow(n,t),r=Math.round(lR*i*(Math.random()-.5)*2);return Math.min(aR,i+r)}function Fe(t){return t&&t._delegate?t._delegate:t}var ie=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ft="[DEFAULT]";var Pa=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new xr;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cR(e))try{this.getOrInitializeService({instanceIdentifier:Ft})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Ft){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ft){return this.instances.has(e)}getOptions(e=Ft){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[a,l]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(r)}return r}onInit(e,n){let i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ft){return this.component?this.component.multipleInstances?e:Ft:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uR(t){return t===Ft?void 0:t}function cR(t){return t.instantiationMode==="EAGER"}var pi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Pa(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Na=[],W;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(W||(W={}));var Df={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},dR=W.INFO,hR={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},fR=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=hR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ue=class{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=fR,this._userLogHandler=null,Na.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Df[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};function Mf(t){Na.forEach(e=>{e.setLogLevel(t)})}function bf(t,e){for(let n of Na){let i=null;e&&e.level&&(i=Df[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,a,...l)=>{let c=l.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");a>=(i??r.logLevel)&&t({level:W[a].toLowerCase(),message:c,args:l,type:r.name})}}}var pR=(t,e)=>e.some(n=>t instanceof n),kf,xf;function mR(){return kf||(kf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gR(){return xf||(xf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Vf=new WeakMap,Ma=new WeakMap,Lf=new WeakMap,Da=new WeakMap,ka=new WeakMap;function yR(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Je(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Vf.set(n,t)}).catch(()=>{}),ka.set(e,t),e}function _R(t){if(Ma.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Ma.set(t,e)}var ba={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ma.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ff(t){ba=t(ba)}function TR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(Br(this),e,...n);return Lf.set(i,e.sort?e.sort():[e]),Je(i)}:gR().includes(t)?function(...e){return t.apply(Br(this),e),Je(Vf.get(this))}:function(...e){return Je(t.apply(Br(this),e))}}function IR(t){return typeof t=="function"?TR(t):(t instanceof IDBTransaction&&_R(t),pR(t,mR())?new Proxy(t,ba):t)}function Je(t){if(t instanceof IDBRequest)return yR(t);if(Da.has(t))return Da.get(t);let e=IR(t);return e!==t&&(Da.set(t,e),ka.set(e,t)),e}var Br=t=>ka.get(t);function Gr(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){let l=indexedDB.open(t,e),c=Je(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Je(l.result),h.oldVersion,h.newVersion,Je(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var ER=["get","getKey","getAll","getAllKeys","count"],vR=["put","add","delete","clear"],xa=new Map;function Uf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xa.get(e))return xa.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=vR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ER.includes(n)))return;let a=async function(l,...c){let h=this.transaction(l,r?"readwrite":"readonly"),d=h.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&h.done]))[0]};return xa.set(e,a),a}Ff(t=>({...t,get:(e,n,i)=>Uf(e,n)||t.get(e,n,i),has:(e,n)=>!!Uf(e,n)||t.has(e,n)}));var La=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wR(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function wR(t){return t.getComponent()?.type==="VERSION"}var $r="@firebase/app",Fa="0.14.4";var ot=new Ue("@firebase/app"),CR="@firebase/app-compat",AR="@firebase/analytics-compat",SR="@firebase/analytics",RR="@firebase/app-check-compat",PR="@firebase/app-check",NR="@firebase/auth",DR="@firebase/auth-compat",MR="@firebase/database",bR="@firebase/data-connect",kR="@firebase/database-compat",xR="@firebase/functions",VR="@firebase/functions-compat",LR="@firebase/installations",FR="@firebase/installations-compat",UR="@firebase/messaging",OR="@firebase/messaging-compat",qR="@firebase/performance",BR="@firebase/performance-compat",GR="@firebase/remote-config",$R="@firebase/remote-config-compat",HR="@firebase/storage",zR="@firebase/storage-compat",WR="@firebase/firestore",KR="@firebase/ai",JR="@firebase/firestore-compat",YR="firebase",QR="12.4.0";var Ye="[DEFAULT]",XR={[$r]:"fire-core",[CR]:"fire-core-compat",[SR]:"fire-analytics",[AR]:"fire-analytics-compat",[PR]:"fire-app-check",[RR]:"fire-app-check-compat",[NR]:"fire-auth",[DR]:"fire-auth-compat",[MR]:"fire-rtdb",[bR]:"fire-data-connect",[kR]:"fire-rtdb-compat",[xR]:"fire-fn",[VR]:"fire-fn-compat",[LR]:"fire-iid",[FR]:"fire-iid-compat",[UR]:"fire-fcm",[OR]:"fire-fcm-compat",[qR]:"fire-perf",[BR]:"fire-perf-compat",[GR]:"fire-rc",[$R]:"fire-rc-compat",[HR]:"fire-gcs",[zR]:"fire-gcs-compat",[WR]:"fire-fst",[JR]:"fire-fst-compat",[KR]:"fire-vertex","fire-js":"fire-js",[YR]:"fire-js-all"};var yt=new Map,mn=new Map,gn=new Map;function yn(t,e){try{t.container.addComponent(e)}catch(n){ot.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t,e){t.container.addOrOverwriteComponent(e)}function ye(t){let e=t.name;if(gn.has(e))return ot.debug(`There were multiple attempts to register component ${e}.`),!1;gn.set(e,t);for(let n of yt.values())yn(n,t);for(let n of mn.values())yn(n,t);return!0}function Qe(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $f(t,e,n=Ye){Qe(t,e).clearInstance(n)}function Ga(t){return t.options!==void 0}function Hf(t){return Ga(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ne(t){return t==null?!1:t.settings!==void 0}function ZR(){gn.clear()}var jR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xe=new Ie("app","Firebase",jR);var Hr=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xe.create("app-deleted",{appName:this._name})}};function Of(t,e){let n=di(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}let r=JSON.parse(n).exp*1e3,a=new Date().getTime();r-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}var Ua=class extends Hr{constructor(e,n,i,r){let a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,r);else{let c=e;super(c.options,l,r)}this._serverConfig={automaticDataCollectionEnabled:a,...n},this._serverConfig.authIdToken&&Of(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Of(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,te($r,Fa,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){zr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw xe.create("server-app-deleted")}};var Ge=QR;function _n(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i={name:Ye,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw xe.create("bad-app-name",{appName:String(r)});if(n||(n=Fr()),!n)throw xe.create("no-options");let a=yt.get(r);if(a){if(Ke(n,a.options)&&Ke(i,a.config))return a;throw xe.create("duplicate-app",{appName:r})}let l=new pi(r);for(let h of gn.values())l.addComponent(h);let c=new Hr(n,i,l);return yt.set(r,c),c}function eP(t,e={}){if(wf()&&!Aa())throw xe.create("invalid-server-app-environment");let n,i=e||{};if(t&&(Ga(t)?n=t.options:Hf(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=Fr()),!n)throw xe.create("no-options");let r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let a=f=>[...f].reduce((m,y)=>Math.imul(31,m)+y.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw xe.create("finalization-registry-not-supported",{});let l=""+a(JSON.stringify(r)),c=mn.get(l);if(c)return c.incRefCount(i.releaseOnDeref),c;let h=new pi(l);for(let f of gn.values())h.addComponent(f);let d=new Ua(n,i,l,h);return mn.set(l,d),d}function Tn(t=Ye){let e=yt.get(t);if(!e&&t===Ye&&Fr())return _n();if(!e)throw xe.create("no-app",{appName:t});return e}function tP(){return Array.from(yt.values())}async function zr(t){let e=!1,n=t.name;yt.has(n)?(e=!0,yt.delete(n)):mn.has(n)&&t.decRefCount()<=0&&(mn.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function te(t,e,n){let i=XR[t]??t;n&&(i+=`-${n}`);let r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){let l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ot.warn(l.join(" "));return}ye(new ie(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function $a(t,e){if(t!==null&&typeof t!="function")throw xe.create("invalid-log-argument");bf(t,e)}function Ha(t){Mf(t)}var nP="firebase-heartbeat-database",iP=1,mi="firebase-heartbeat-store",Va=null;function zf(){return Va||(Va=Gr(nP,iP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mi)}catch(n){console.warn(n)}}}}).catch(t=>{throw xe.create("idb-open",{originalErrorMessage:t.message})})),Va}async function rP(t){try{let n=(await zf()).transaction(mi),i=await n.objectStore(mi).get(Wf(t));return await n.done,i}catch(e){if(e instanceof fe)ot.warn(e.message);else{let n=xe.create("idb-get",{originalErrorMessage:e?.message});ot.warn(n.message)}}}async function qf(t,e){try{let i=(await zf()).transaction(mi,"readwrite");await i.objectStore(mi).put(e,Wf(t)),await i.done}catch(n){if(n instanceof fe)ot.warn(n.message);else{let i=xe.create("idb-set",{originalErrorMessage:n?.message});ot.warn(i.message)}}}function Wf(t){return`${t.name}!${t.options.appId}`}var oP=1024,sP=30,Oa=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new qa(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>sP){let r=lP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ot.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Bf(),{heartbeatsToSend:n,unsentEntries:i}=aP(this._heartbeatsCache.heartbeats),r=Ea(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ot.warn(e),""}}};function Bf(){return new Date().toISOString().substring(0,10)}function aP(t,e=oP){let n=[],i=t.slice();for(let r of t){let a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),Gf(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Gf(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var qa=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fi()?Or().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await rP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return qf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return qf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Gf(t){return Ea(JSON.stringify({version:2,heartbeats:t})).length}function lP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function uP(t){ye(new ie("platform-logger",e=>new La(e),"PRIVATE")),ye(new ie("heartbeat",e=>new Oa(e),"PRIVATE")),te($r,Fa,t),te($r,Fa,"esm2020"),te("fire-js","")}uP("");var cP="firebase",dP="12.4.0";te(cP,dP,"app");var Yf="@firebase/installations",Ya="0.6.19";var Qf=1e4,Xf=`w:${Ya}`,Zf="FIS_v2",hP="https://firebaseinstallations.googleapis.com/v1",fP=3600*1e3,pP="installations",mP="Installations";var gP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ot=new Ie(pP,mP,gP);function jf(t){return t instanceof fe&&t.code.includes("request-failed")}function ep({projectId:t}){return`${hP}/projects/${t}/installations`}function tp(t){return{token:t.token,requestStatus:2,expiresIn:_P(t.expiresIn),creationTime:Date.now()}}async function np(t,e){let i=(await e.json()).error;return Ot.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ip({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yP(t,{refreshToken:e}){let n=ip(t);return n.append("Authorization",TP(e)),n}async function rp(t){let e=await t();return e.status>=500&&e.status<600?t():e}function _P(t){return Number(t.replace("s","000"))}function TP(t){return`${Zf} ${t}`}async function IP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let i=ep(t),r=ip(t),a=e.getImmediate({optional:!0});if(a){let d=await a.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}let l={fid:n,authVersion:Zf,appId:t.appId,sdkVersion:Xf},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await rp(()=>fetch(i,c));if(h.ok){let d=await h.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:tp(d.authToken)}}else throw await np("Create Installation",h)}function op(t){return new Promise(e=>{setTimeout(e,t)})}function EP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var vP=/^[cdef][\w-]{21}$/,Ja="";function wP(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=CP(t);return vP.test(n)?n:Ja}catch{return Ja}}function CP(t){return EP(t).substr(0,22)}function Kr(t){return`${t.appName}!${t.appId}`}var sp=new Map;function ap(t,e){let n=Kr(t);lp(n,e),AP(n,e)}function lp(t,e){let n=sp.get(t);if(n)for(let i of n)i(e)}function AP(t,e){let n=SP();n&&n.postMessage({key:t,fid:e}),RP()}var Ut=null;function SP(){return!Ut&&"BroadcastChannel"in self&&(Ut=new BroadcastChannel("[Firebase] FID Change"),Ut.onmessage=t=>{lp(t.data.key,t.data.fid)}),Ut}function RP(){sp.size===0&&Ut&&(Ut.close(),Ut=null)}var PP="firebase-installations-database",NP=1,qt="firebase-installations-store",Wa=null;function Qa(){return Wa||(Wa=Gr(PP,NP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qt)}}})),Wa}async function Wr(t,e){let n=Kr(t),r=(await Qa()).transaction(qt,"readwrite"),a=r.objectStore(qt),l=await a.get(n);return await a.put(e,n),await r.done,(!l||l.fid!==e.fid)&&ap(t,e.fid),e}async function up(t){let e=Kr(t),i=(await Qa()).transaction(qt,"readwrite");await i.objectStore(qt).delete(e),await i.done}async function Jr(t,e){let n=Kr(t),r=(await Qa()).transaction(qt,"readwrite"),a=r.objectStore(qt),l=await a.get(n),c=e(l);return c===void 0?await a.delete(n):await a.put(c,n),await r.done,c&&(!l||l.fid!==c.fid)&&ap(t,c.fid),c}async function Xa(t){let e,n=await Jr(t.appConfig,i=>{let r=DP(i),a=MP(t,r);return e=a.registrationPromise,a.installationEntry});return n.fid===Ja?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function DP(t){let e=t||{fid:wP(),registrationStatus:0};return cp(e)}function MP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Ot.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=bP(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kP(t)}:{installationEntry:e}}async function bP(t,e){try{let n=await IP(t,e);return Wr(t.appConfig,n)}catch(n){throw jf(n)&&n.customData.serverCode===409?await up(t.appConfig):await Wr(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function kP(t){let e=await Kf(t.appConfig);for(;e.registrationStatus===1;)await op(100),e=await Kf(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=await Xa(t);return i||n}return e}function Kf(t){return Jr(t,e=>{if(!e)throw Ot.create("installation-not-found");return cp(e)})}function cp(t){return xP(t)?{fid:t.fid,registrationStatus:0}:t}function xP(t){return t.registrationStatus===1&&t.registrationTime+Qf<Date.now()}async function VP({appConfig:t,heartbeatServiceProvider:e},n){let i=LP(t,n),r=yP(t,n),a=e.getImmediate({optional:!0});if(a){let d=await a.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}let l={installation:{sdkVersion:Xf,appId:t.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await rp(()=>fetch(i,c));if(h.ok){let d=await h.json();return tp(d)}else throw await np("Generate Auth Token",h)}function LP(t,{fid:e}){return`${ep(t)}/${e}/authTokens:generate`}async function Za(t,e=!1){let n,i=await Jr(t.appConfig,a=>{if(!dp(a))throw Ot.create("not-registered");let l=a.authToken;if(!e&&OP(l))return a;if(l.requestStatus===1)return n=FP(t,e),a;{if(!navigator.onLine)throw Ot.create("app-offline");let c=BP(a);return n=UP(t,c),c}});return n?await n:i.authToken}async function FP(t,e){let n=await Jf(t.appConfig);for(;n.authToken.requestStatus===1;)await op(100),n=await Jf(t.appConfig);let i=n.authToken;return i.requestStatus===0?Za(t,e):i}function Jf(t){return Jr(t,e=>{if(!dp(e))throw Ot.create("not-registered");let n=e.authToken;return GP(n)?{...e,authToken:{requestStatus:0}}:e})}async function UP(t,e){try{let n=await VP(t,e),i={...e,authToken:n};return await Wr(t.appConfig,i),n}catch(n){if(jf(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await up(t.appConfig);else{let i={...e,authToken:{requestStatus:0}};await Wr(t.appConfig,i)}throw n}}function dp(t){return t!==void 0&&t.registrationStatus===2}function OP(t){return t.requestStatus===2&&!qP(t)}function qP(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fP}function BP(t){let e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function GP(t){return t.requestStatus===1&&t.requestTime+Qf<Date.now()}async function $P(t){let e=t,{installationEntry:n,registrationPromise:i}=await Xa(e);return i?i.catch(console.error):Za(e).catch(console.error),n.fid}async function HP(t,e=!1){let n=t;return await zP(n),(await Za(n,e)).token}async function zP(t){let{registrationPromise:e}=await Xa(t);e&&await e}function WP(t){if(!t||!t.options)throw Ka("App Configuration");if(!t.name)throw Ka("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Ka(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ka(t){return Ot.create("missing-app-config-values",{valueName:t})}var hp="installations",KP="installations-internal",JP=t=>{let e=t.getProvider("app").getImmediate(),n=WP(e),i=Qe(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},YP=t=>{let e=t.getProvider("app").getImmediate(),n=Qe(e,hp).getImmediate();return{getId:()=>$P(n),getToken:r=>HP(n,r)}};function QP(){ye(new ie(hp,JP,"PUBLIC")),ye(new ie(KP,YP,"PRIVATE"))}QP();te(Yf,Ya);te(Yf,Ya,"esm2020");var fp="analytics",XP="firebase_id",ZP="origin",jP=60*1e3,e0="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ol="https://www.googletagmanager.com/gtag/js";var Se=new Ue("@firebase/analytics");var t0={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Oe=new Ie("analytics","Analytics",t0);function n0(t){if(!t.startsWith(ol)){let e=Oe.create("invalid-gtag-resource",{gtagURL:t});return Se.warn(e.message),""}return t}function Ip(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function i0(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function r0(t,e){let n=i0("firebase-js-sdk-policy",{createScriptURL:n0}),i=document.createElement("script"),r=`${ol}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function o0(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function s0(t,e,n,i,r,a){let l=i[r];try{if(l)await e[l];else{let h=(await Ip(n)).find(d=>d.measurementId===r);h&&await e[h.appId]}}catch(c){Se.error(c)}t("config",r,a)}async function a0(t,e,n,i,r){try{let a=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);let c=await Ip(n);for(let h of l){let d=c.find(m=>m.measurementId===h),f=d&&e[d.appId];if(f)a.push(f);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",i,r||{})}catch(a){Se.error(a)}}function l0(t,e,n,i){async function r(a,...l){try{if(a==="event"){let[c,h]=l;await a0(t,e,n,c,h)}else if(a==="config"){let[c,h]=l;await s0(t,e,n,i,c,h)}else if(a==="consent"){let[c,h]=l;t("consent",c,h)}else if(a==="get"){let[c,h,d]=l;t("get",c,h,d)}else if(a==="set"){let[c]=l;t("set",c)}else t(a,...l)}catch(c){Se.error(c)}}return r}function u0(t,e,n,i,r){let a=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(a=window[r]),window[r]=l0(a,t,e,n),{gtagCore:a,wrappedGtag:window[r]}}function c0(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(ol)&&n.src.includes(t))return n;return null}var d0=30,h0=1e3,el=class{constructor(e={},n=h0){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Ep=new el;function f0(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function p0(t){let{appId:e,apiKey:n}=t,i={method:"GET",headers:f0(n)},r=e0.replace("{app-id}",e),a=await fetch(r,i);if(a.status!==200&&a.status!==304){let l="";try{let c=await a.json();c.error?.message&&(l=c.error.message)}catch{}throw Oe.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function m0(t,e=Ep,n){let{appId:i,apiKey:r,measurementId:a}=t.options;if(!i)throw Oe.create("no-app-id");if(!r){if(a)return{measurementId:a,appId:i};throw Oe.create("no-api-key")}let l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new tl;return setTimeout(async()=>{c.abort()},n!==void 0?n:jP),vp({appId:i,apiKey:r,measurementId:a},l,c,e)}async function vp(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Ep){let{appId:a,measurementId:l}=t;try{await g0(i,e)}catch(c){if(l)return Se.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:l};throw c}try{let c=await p0(t);return r.deleteThrottleMetadata(a),c}catch(c){let h=c;if(!y0(h)){if(r.deleteThrottleMetadata(a),l)return Se.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:l};throw c}let d=Number(h?.customData?.httpStatus)===503?Ra(n,r.intervalMillis,d0):Ra(n,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return r.setThrottleMetadata(a,f),Se.debug(`Calling attemptFetch again in ${d} millis`),vp(t,f,i,r)}}function g0(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),a=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(a),i(Oe.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function y0(t){if(!(t instanceof fe)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var tl=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var nl;async function _0(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{let a=await e,l={...i,send_to:a};t("event",n,l)}}async function T0(t,e,n,i){if(i&&i.global){let r={};for(let a of Object.keys(n))r[`user_properties.${a}`]=n[a];return t("set",r),Promise.resolve()}else{let r=await e;t("config",r,{update:!0,user_properties:n})}}var il;function I0(t){il=t}function E0(t){nl=t}async function v0(){if(fi())try{await Or()}catch(t){return Se.warn(Oe.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Se.warn(Oe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function w0(t,e,n,i,r,a,l){let c=m0(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Se.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Se.error(y)),e.push(c);let h=v0().then(y=>{if(y)return i.getId()}),[d,f]=await Promise.all([c,h]);c0(a)||r0(a,d.measurementId),il&&(r("consent","default",il),I0(void 0)),r("js",new Date);let m=l?.config??{};return m[ZP]="firebase",m.update=!0,f!=null&&(m[XP]=f),r("config",d.measurementId,m),nl&&(r("set",nl),E0(void 0)),d.measurementId}var rl=class{constructor(e){this.app=e}_delete(){return delete In[this.app.options.appId],Promise.resolve()}},In={},pp=[],mp={},ja="dataLayer",C0="gtag",gp,sl,yp=!1;function A0(){let t=[];if(Ur()&&t.push("This is a browser extension environment."),Pf()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Oe.create("invalid-analytics-context",{errorInfo:e});Se.warn(n.message)}}function S0(t,e,n){A0();let i=t.options.appId;if(!i)throw Oe.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Se.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Oe.create("no-api-key");if(In[i]!=null)throw Oe.create("already-exists",{id:i});if(!yp){o0(ja);let{wrappedGtag:a,gtagCore:l}=u0(In,pp,mp,ja,C0);sl=a,gp=l,yp=!0}return In[i]=w0(t,pp,mp,e,gp,ja,n),new rl(t)}function R0(t,e,n){t=Fe(t),T0(sl,In[t.app.options.appId],e,n).catch(i=>Se.error(i))}function P0(t,e,n,i){t=Fe(t),_0(sl,In[t.app.options.appId],e,n,i).catch(r=>Se.error(r))}var _p="@firebase/analytics",Tp="0.10.19";function N0(){ye(new ie(fp,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return S0(i,r,n)},"PUBLIC")),ye(new ie("analytics-internal",t,"PRIVATE")),te(_p,Tp),te(_p,Tp,"esm2020");function t(e){try{let n=e.getProvider(fp).getImmediate();return{logEvent:(i,r,a)=>P0(n,i,r,a),setUserProperties:(i,r)=>R0(n,i,r)}}catch(n){throw Oe.create("interop-component-reg-failed",{reason:n})}}}N0();var D0={apiKey:"AIzaSyCr4M9P3l4tDs5menc6gFEj8Uqxnoqx394",authDomain:"notestaker-c0265.firebaseapp.com",projectId:"notestaker-c0265",storageBucket:"notestaker-c0265.firebasestorage.app",messagingSenderId:"569413967619",appId:"1:569413967619:web:877077431ea1c993501336",measurementId:"G-905PV5XC6Q"},M0=_n(D0),al=M0;var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cp={};var Yr,Ap;(function(){var t;function e(C,I){function T(){}T.prototype=I.prototype,C.F=I.prototype,C.prototype=new T,C.prototype.constructor=C,C.D=function(A,v,S){for(var E=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)E[ge-2]=arguments[ge];return I.prototype[v].apply(A,E)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,I,T){T||(T=0);let A=Array(16);if(typeof I=="string")for(var v=0;v<16;++v)A[v]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(v=0;v<16;++v)A[v]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=C.g[0],T=C.g[1],v=C.g[2];let S=C.g[3],E;E=I+(S^T&(v^S))+A[0]+3614090360&4294967295,I=T+(E<<7&4294967295|E>>>25),E=S+(v^I&(T^v))+A[1]+3905402710&4294967295,S=I+(E<<12&4294967295|E>>>20),E=v+(T^S&(I^T))+A[2]+606105819&4294967295,v=S+(E<<17&4294967295|E>>>15),E=T+(I^v&(S^I))+A[3]+3250441966&4294967295,T=v+(E<<22&4294967295|E>>>10),E=I+(S^T&(v^S))+A[4]+4118548399&4294967295,I=T+(E<<7&4294967295|E>>>25),E=S+(v^I&(T^v))+A[5]+1200080426&4294967295,S=I+(E<<12&4294967295|E>>>20),E=v+(T^S&(I^T))+A[6]+2821735955&4294967295,v=S+(E<<17&4294967295|E>>>15),E=T+(I^v&(S^I))+A[7]+4249261313&4294967295,T=v+(E<<22&4294967295|E>>>10),E=I+(S^T&(v^S))+A[8]+1770035416&4294967295,I=T+(E<<7&4294967295|E>>>25),E=S+(v^I&(T^v))+A[9]+2336552879&4294967295,S=I+(E<<12&4294967295|E>>>20),E=v+(T^S&(I^T))+A[10]+4294925233&4294967295,v=S+(E<<17&4294967295|E>>>15),E=T+(I^v&(S^I))+A[11]+2304563134&4294967295,T=v+(E<<22&4294967295|E>>>10),E=I+(S^T&(v^S))+A[12]+1804603682&4294967295,I=T+(E<<7&4294967295|E>>>25),E=S+(v^I&(T^v))+A[13]+4254626195&4294967295,S=I+(E<<12&4294967295|E>>>20),E=v+(T^S&(I^T))+A[14]+2792965006&4294967295,v=S+(E<<17&4294967295|E>>>15),E=T+(I^v&(S^I))+A[15]+1236535329&4294967295,T=v+(E<<22&4294967295|E>>>10),E=I+(v^S&(T^v))+A[1]+4129170786&4294967295,I=T+(E<<5&4294967295|E>>>27),E=S+(T^v&(I^T))+A[6]+3225465664&4294967295,S=I+(E<<9&4294967295|E>>>23),E=v+(I^T&(S^I))+A[11]+643717713&4294967295,v=S+(E<<14&4294967295|E>>>18),E=T+(S^I&(v^S))+A[0]+3921069994&4294967295,T=v+(E<<20&4294967295|E>>>12),E=I+(v^S&(T^v))+A[5]+3593408605&4294967295,I=T+(E<<5&4294967295|E>>>27),E=S+(T^v&(I^T))+A[10]+38016083&4294967295,S=I+(E<<9&4294967295|E>>>23),E=v+(I^T&(S^I))+A[15]+3634488961&4294967295,v=S+(E<<14&4294967295|E>>>18),E=T+(S^I&(v^S))+A[4]+3889429448&4294967295,T=v+(E<<20&4294967295|E>>>12),E=I+(v^S&(T^v))+A[9]+568446438&4294967295,I=T+(E<<5&4294967295|E>>>27),E=S+(T^v&(I^T))+A[14]+3275163606&4294967295,S=I+(E<<9&4294967295|E>>>23),E=v+(I^T&(S^I))+A[3]+4107603335&4294967295,v=S+(E<<14&4294967295|E>>>18),E=T+(S^I&(v^S))+A[8]+1163531501&4294967295,T=v+(E<<20&4294967295|E>>>12),E=I+(v^S&(T^v))+A[13]+2850285829&4294967295,I=T+(E<<5&4294967295|E>>>27),E=S+(T^v&(I^T))+A[2]+4243563512&4294967295,S=I+(E<<9&4294967295|E>>>23),E=v+(I^T&(S^I))+A[7]+1735328473&4294967295,v=S+(E<<14&4294967295|E>>>18),E=T+(S^I&(v^S))+A[12]+2368359562&4294967295,T=v+(E<<20&4294967295|E>>>12),E=I+(T^v^S)+A[5]+4294588738&4294967295,I=T+(E<<4&4294967295|E>>>28),E=S+(I^T^v)+A[8]+2272392833&4294967295,S=I+(E<<11&4294967295|E>>>21),E=v+(S^I^T)+A[11]+1839030562&4294967295,v=S+(E<<16&4294967295|E>>>16),E=T+(v^S^I)+A[14]+4259657740&4294967295,T=v+(E<<23&4294967295|E>>>9),E=I+(T^v^S)+A[1]+2763975236&4294967295,I=T+(E<<4&4294967295|E>>>28),E=S+(I^T^v)+A[4]+1272893353&4294967295,S=I+(E<<11&4294967295|E>>>21),E=v+(S^I^T)+A[7]+4139469664&4294967295,v=S+(E<<16&4294967295|E>>>16),E=T+(v^S^I)+A[10]+3200236656&4294967295,T=v+(E<<23&4294967295|E>>>9),E=I+(T^v^S)+A[13]+681279174&4294967295,I=T+(E<<4&4294967295|E>>>28),E=S+(I^T^v)+A[0]+3936430074&4294967295,S=I+(E<<11&4294967295|E>>>21),E=v+(S^I^T)+A[3]+3572445317&4294967295,v=S+(E<<16&4294967295|E>>>16),E=T+(v^S^I)+A[6]+76029189&4294967295,T=v+(E<<23&4294967295|E>>>9),E=I+(T^v^S)+A[9]+3654602809&4294967295,I=T+(E<<4&4294967295|E>>>28),E=S+(I^T^v)+A[12]+3873151461&4294967295,S=I+(E<<11&4294967295|E>>>21),E=v+(S^I^T)+A[15]+530742520&4294967295,v=S+(E<<16&4294967295|E>>>16),E=T+(v^S^I)+A[2]+3299628645&4294967295,T=v+(E<<23&4294967295|E>>>9),E=I+(v^(T|~S))+A[0]+4096336452&4294967295,I=T+(E<<6&4294967295|E>>>26),E=S+(T^(I|~v))+A[7]+1126891415&4294967295,S=I+(E<<10&4294967295|E>>>22),E=v+(I^(S|~T))+A[14]+2878612391&4294967295,v=S+(E<<15&4294967295|E>>>17),E=T+(S^(v|~I))+A[5]+4237533241&4294967295,T=v+(E<<21&4294967295|E>>>11),E=I+(v^(T|~S))+A[12]+1700485571&4294967295,I=T+(E<<6&4294967295|E>>>26),E=S+(T^(I|~v))+A[3]+2399980690&4294967295,S=I+(E<<10&4294967295|E>>>22),E=v+(I^(S|~T))+A[10]+4293915773&4294967295,v=S+(E<<15&4294967295|E>>>17),E=T+(S^(v|~I))+A[1]+2240044497&4294967295,T=v+(E<<21&4294967295|E>>>11),E=I+(v^(T|~S))+A[8]+1873313359&4294967295,I=T+(E<<6&4294967295|E>>>26),E=S+(T^(I|~v))+A[15]+4264355552&4294967295,S=I+(E<<10&4294967295|E>>>22),E=v+(I^(S|~T))+A[6]+2734768916&4294967295,v=S+(E<<15&4294967295|E>>>17),E=T+(S^(v|~I))+A[13]+1309151649&4294967295,T=v+(E<<21&4294967295|E>>>11),E=I+(v^(T|~S))+A[4]+4149444226&4294967295,I=T+(E<<6&4294967295|E>>>26),E=S+(T^(I|~v))+A[11]+3174756917&4294967295,S=I+(E<<10&4294967295|E>>>22),E=v+(I^(S|~T))+A[2]+718787259&4294967295,v=S+(E<<15&4294967295|E>>>17),E=T+(S^(v|~I))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(v+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+v&4294967295,C.g[3]=C.g[3]+S&4294967295}i.prototype.v=function(C,I){I===void 0&&(I=C.length);let T=I-this.blockSize,A=this.C,v=this.h,S=0;for(;S<I;){if(v==0)for(;S<=T;)r(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<I;)if(A[v++]=C.charCodeAt(S++),v==this.blockSize){r(this,A),v=0;break}}else for(;S<I;)if(A[v++]=C[S++],v==this.blockSize){r(this,A),v=0;break}}this.h=v,this.o+=I},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var T=C.length-8;T<C.length;++T)C[T]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)C[I++]=this.g[T]>>>A&255;return C};function a(C,I){var T=c;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=I(C)}function l(C,I){this.h=I;let T=[],A=!0;for(let v=C.length-1;v>=0;v--){let S=C[v]|0;A&&S==I||(T[v]=S,A=!1)}this.g=T}var c={};function h(C){return-128<=C&&C<128?a(C,function(I){return new l([I|0],I<0?-1:0)}):new l([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return m;if(C<0)return M(d(-C));let I=[],T=1;for(let A=0;C>=T;A++)I[A]=C/T|0,T*=4294967296;return new l(I,0)}function f(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return M(f(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');let T=d(Math.pow(I,8)),A=m;for(let S=0;S<C.length;S+=8){var v=Math.min(8,C.length-S);let E=parseInt(C.substring(S,S+v),I);v<8?(v=d(Math.pow(I,v)),A=A.j(v).add(d(E))):(A=A.j(T),A=A.add(d(E)))}return A}var m=h(0),y=h(1),w=h(16777216);t=l.prototype,t.m=function(){if(D(this))return-M(this).m();let C=0,I=1;for(let T=0;T<this.g.length;T++){let A=this.i(T);C+=(A>=0?A:4294967296+A)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(D(this))return"-"+M(this).toString(C);let I=d(Math.pow(C,6));var T=this;let A="";for(;;){let v=q(T,I).g;T=V(T,v.j(I));let S=((T.g.length>0?T.g[0]:T.h)>>>0).toString(C);if(T=v,N(T))return S+A;for(;S.length<6;)S="0"+S;A=S+A}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function D(C){return C.h==-1}t.l=function(C){return C=V(this,C),D(C)?-1:N(C)?0:1};function M(C){let I=C.g.length,T=[];for(let A=0;A<I;A++)T[A]=~C.g[A];return new l(T,~C.h).add(y)}t.abs=function(){return D(this)?M(this):this},t.add=function(C){let I=Math.max(this.g.length,C.g.length),T=[],A=0;for(let v=0;v<=I;v++){let S=A+(this.i(v)&65535)+(C.i(v)&65535),E=(S>>>16)+(this.i(v)>>>16)+(C.i(v)>>>16);A=E>>>16,S&=65535,E&=65535,T[v]=E<<16|S}return new l(T,T[T.length-1]&-2147483648?-1:0)};function V(C,I){return C.add(M(I))}t.j=function(C){if(N(this)||N(C))return m;if(D(this))return D(C)?M(this).j(M(C)):M(M(this).j(C));if(D(C))return M(this.j(M(C)));if(this.l(w)<0&&C.l(w)<0)return d(this.m()*C.m());let I=this.g.length+C.g.length,T=[];for(var A=0;A<2*I;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let v=0;v<C.g.length;v++){let S=this.i(A)>>>16,E=this.i(A)&65535,ge=C.i(v)>>>16,de=C.i(v)&65535;T[2*A+2*v]+=E*de,k(T,2*A+2*v),T[2*A+2*v+1]+=S*de,k(T,2*A+2*v+1),T[2*A+2*v+1]+=E*ge,k(T,2*A+2*v+1),T[2*A+2*v+2]+=S*ge,k(T,2*A+2*v+2)}for(C=0;C<I;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=I;C<2*I;C++)T[C]=0;return new l(T,0)};function k(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function L(C,I){this.g=C,this.h=I}function q(C,I){if(N(I))throw Error("division by zero");if(N(C))return new L(m,m);if(D(C))return I=q(M(C),I),new L(M(I.g),M(I.h));if(D(I))return I=q(C,M(I)),new L(M(I.g),I.h);if(C.g.length>30){if(D(C)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var T=y,A=I;A.l(C)<=0;)T=O(T),A=O(A);var v=G(T,1),S=G(A,1);for(A=G(A,2),T=G(T,2);!N(A);){var E=S.add(A);E.l(C)<=0&&(v=v.add(T),S=E),A=G(A,1),T=G(T,1)}return I=V(C,v.j(I)),new L(v,I)}for(v=m;C.l(I)>=0;){for(T=Math.max(1,Math.floor(C.m()/I.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),S=d(T),E=S.j(I);D(E)||E.l(C)>0;)T-=A,S=d(T),E=S.j(I);N(S)&&(S=y),v=v.add(S),C=V(C,E)}return new L(v,C)}t.B=function(C){return q(this,C).h},t.and=function(C){let I=Math.max(this.g.length,C.g.length),T=[];for(let A=0;A<I;A++)T[A]=this.i(A)&C.i(A);return new l(T,this.h&C.h)},t.or=function(C){let I=Math.max(this.g.length,C.g.length),T=[];for(let A=0;A<I;A++)T[A]=this.i(A)|C.i(A);return new l(T,this.h|C.h)},t.xor=function(C){let I=Math.max(this.g.length,C.g.length),T=[];for(let A=0;A<I;A++)T[A]=this.i(A)^C.i(A);return new l(T,this.h^C.h)};function O(C){let I=C.g.length+1,T=[];for(let A=0;A<I;A++)T[A]=C.i(A)<<1|C.i(A-1)>>>31;return new l(T,C.h)}function G(C,I){let T=I>>5;I%=32;let A=C.g.length-T,v=[];for(let S=0;S<A;S++)v[S]=I>0?C.i(S+T)>>>I|C.i(S+T+1)<<32-I:C.i(S+T);return new l(v,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ap=Cp.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=f,Yr=Cp.Integer=l}).apply(typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{});var Qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},st={};var ll,b0,En,ul,gi,Xr,cl,dl,hl;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qr=="object"&&Qr];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var g=i;u=u.split(".");for(var _=0;_<u.length-1;_++){var R=u[_];if(!(R in g))break e;g=g[R]}u=u[u.length-1],_=g[u],p=p(_),p!=_&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(p){var g=[],_;for(_ in p)Object.prototype.hasOwnProperty.call(p,_)&&g.push([_,p[_]]);return g}});var a=a||{},l=this||self;function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){return d=h,d.apply(null,arguments)}function f(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function m(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(_,R,P){for(var x=Array(arguments.length-2),z=2;z<arguments.length;z++)x[z-2]=arguments[z];return p.prototype[R].apply(_,x)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function w(u){let p=u.length;if(p>0){let g=Array(p);for(let _=0;_<p;_++)g[_]=u[_];return g}return[]}function N(u,p){for(let _=1;_<arguments.length;_++){let R=arguments[_];var g=typeof R;if(g=g!="object"?g:R?Array.isArray(R)?"array":g:"null",g=="array"||g=="object"&&typeof R.length=="number"){g=u.length||0;let P=R.length||0;u.length=g+P;for(let x=0;x<P;x++)u[g+x]=R[x]}else u.push(R)}}class D{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function M(u){l.setTimeout(()=>{throw u},0)}function V(){var u=C;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class k{constructor(){this.h=this.g=null}add(p,g){let _=L.get();_.set(p,g),this.h?this.h.next=_:this.g=_,this.h=_}}var L=new D(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,G=!1,C=new k,I=()=>{let u=Promise.resolve(void 0);O=()=>{u.then(T)}};function T(){for(var u;u=V();){try{u.h.call(u.g)}catch(g){M(g)}var p=L;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}G=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};l.addEventListener("test",g,p),l.removeEventListener("test",g,p)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function ge(u,p){v.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}m(ge,v),ge.prototype.init=function(u,p){let g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),zn=0;function Yg(u,p,g,_,R){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!_,this.ha=R,this.key=++zn,this.da=this.fa=!1}function Zi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ji(u,p,g){for(let _ in u)p.call(g,u[_],_,u)}function Qg(u,p){for(let g in u)p.call(void 0,u[g],g,u)}function Ec(u){let p={};for(let g in u)p[g]=u[g];return p}let vc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wc(u,p){let g,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(g in _)u[g]=_[g];for(let P=0;P<vc.length;P++)g=vc[P],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function er(u){this.src=u,this.g={},this.h=0}er.prototype.add=function(u,p,g,_,R){let P=u.toString();u=this.g[P],u||(u=this.g[P]=[],this.h++);let x=ts(u,p,_,R);return x>-1?(p=u[x],g||(p.fa=!1)):(p=new Yg(p,this.src,P,!!_,R),p.fa=g,u.push(p)),p};function es(u,p){let g=p.type;if(g in u.g){var _=u.g[g],R=Array.prototype.indexOf.call(_,p,void 0),P;(P=R>=0)&&Array.prototype.splice.call(_,R,1),P&&(Zi(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function ts(u,p,g,_){for(let R=0;R<u.length;++R){let P=u[R];if(!P.da&&P.listener==p&&P.capture==!!g&&P.ha==_)return R}return-1}var ns="closure_lm_"+(Math.random()*1e6|0),is={};function Cc(u,p,g,_,R){if(_&&_.once)return Sc(u,p,g,_,R);if(Array.isArray(p)){for(let P=0;P<p.length;P++)Cc(u,p[P],g,_,R);return null}return g=as(g),u&&u[de]?u.J(p,g,c(_)?!!_.capture:!!_,R):Ac(u,p,g,!1,_,R)}function Ac(u,p,g,_,R,P){if(!p)throw Error("Invalid event type");let x=c(R)?!!R.capture:!!R,z=os(u);if(z||(u[ns]=z=new er(u)),g=z.add(p,g,_,x,P),g.proxy)return g;if(_=Xg(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)S||(R=x),R===void 0&&(R=!1),u.addEventListener(p.toString(),_,R);else if(u.attachEvent)u.attachEvent(Pc(p.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Xg(){function u(g){return p.call(u.src,u.listener,g)}let p=Zg;return u}function Sc(u,p,g,_,R){if(Array.isArray(p)){for(let P=0;P<p.length;P++)Sc(u,p[P],g,_,R);return null}return g=as(g),u&&u[de]?u.K(p,g,c(_)?!!_.capture:!!_,R):Ac(u,p,g,!0,_,R)}function Rc(u,p,g,_,R){if(Array.isArray(p))for(var P=0;P<p.length;P++)Rc(u,p[P],g,_,R);else _=c(_)?!!_.capture:!!_,g=as(g),u&&u[de]?(u=u.i,P=String(p).toString(),P in u.g&&(p=u.g[P],g=ts(p,g,_,R),g>-1&&(Zi(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[P],u.h--)))):u&&(u=os(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ts(p,g,_,R)),(g=u>-1?p[u]:null)&&rs(g))}function rs(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[de])es(p.i,u);else{var g=u.type,_=u.proxy;p.removeEventListener?p.removeEventListener(g,_,u.capture):p.detachEvent?p.detachEvent(Pc(g),_):p.addListener&&p.removeListener&&p.removeListener(_),(g=os(p))?(es(g,u),g.h==0&&(g.src=null,p[ns]=null)):Zi(u)}}}function Pc(u){return u in is?is[u]:is[u]="on"+u}function Zg(u,p){if(u.da)u=!0;else{p=new ge(p,this);let g=u.listener,_=u.ha||u.src;u.fa&&rs(u),u=g.call(_,p)}return u}function os(u){return u=u[ns],u instanceof er?u:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function as(u){return typeof u=="function"?u:(u[ss]||(u[ss]=function(p){return u.handleEvent(p)}),u[ss])}function _e(){A.call(this),this.i=new er(this),this.M=this,this.G=null}m(_e,A),_e.prototype[de]=!0,_e.prototype.removeEventListener=function(u,p,g,_){Rc(this,u,p,g,_)};function Ce(u,p){var g,_=u.G;if(_)for(g=[];_;_=_.G)g.push(_);if(u=u.M,_=p.type||p,typeof p=="string")p=new v(p,u);else if(p instanceof v)p.target=p.target||u;else{var R=p;p=new v(_,u),wc(p,R)}R=!0;let P,x;if(g)for(x=g.length-1;x>=0;x--)P=p.g=g[x],R=tr(P,_,!0,p)&&R;if(P=p.g=u,R=tr(P,_,!0,p)&&R,R=tr(P,_,!1,p)&&R,g)for(x=0;x<g.length;x++)P=p.g=g[x],R=tr(P,_,!1,p)&&R}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var u=this.i;for(let p in u.g){let g=u.g[p];for(let _=0;_<g.length;_++)Zi(g[_]);delete u.g[p],u.h--}}this.G=null},_e.prototype.J=function(u,p,g,_){return this.i.add(String(u),p,!1,g,_)},_e.prototype.K=function(u,p,g,_){return this.i.add(String(u),p,!0,g,_)};function tr(u,p,g,_){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let R=!0;for(let P=0;P<p.length;++P){let x=p[P];if(x&&!x.da&&x.capture==g){let z=x.listener,ue=x.ha||x.src;x.fa&&es(u.i,x),R=z.call(ue,_)!==!1&&R}}return R&&!_.defaultPrevented}function jg(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:l.setTimeout(u,p||0)}function Nc(u){u.g=jg(()=>{u.g=null,u.i&&(u.i=!1,Nc(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class ey extends A{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Nc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(u){A.call(this),this.h=u,this.g={}}m(Wn,A);var Dc=[];function Mc(u){ji(u.g,function(p,g){this.g.hasOwnProperty(g)&&rs(p)},u),u.g={}}Wn.prototype.N=function(){Wn.Z.N.call(this),Mc(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ls=l.JSON.stringify,ty=l.JSON.parse,ny=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function bc(){}function kc(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){v.call(this,"d")}m(us,v);function cs(){v.call(this,"c")}m(cs,v);var Rt={},xc=null;function nr(){return xc=xc||new _e}Rt.Ia="serverreachability";function Vc(u){v.call(this,Rt.Ia,u)}m(Vc,v);function Jn(u){let p=nr();Ce(p,new Vc(p))}Rt.STAT_EVENT="statevent";function Lc(u,p){v.call(this,Rt.STAT_EVENT,u),this.stat=p}m(Lc,v);function Ae(u){let p=nr();Ce(p,new Lc(p,u))}Rt.Ja="timingevent";function Fc(u,p){v.call(this,Rt.Ja,u),this.size=p}m(Fc,v);function Yn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function iy(u,p,g,_,R,P){u.info(function(){if(u.g)if(P){var x="",z=P.split("&");for(let X=0;X<z.length;X++){var ue=z[X].split("=");if(ue.length>1){let he=ue[0];ue=ue[1];let We=he.split("_");x=We.length>=2&&We[1]=="type"?x+(he+"="+ue+"&"):x+(he+"=redacted&")}}}else x=null;else x=P;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+p+`
`+g+`
`+x})}function ry(u,p,g,_,R,P,x){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+p+`
`+g+`
`+P+" "+x})}function jt(u,p,g,_){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+sy(u,g)+(_?" "+_:"")})}function oy(u,p){u.info(function(){return"TIMEOUT: "+p})}Qn.prototype.info=function(){};function sy(u,p){if(!u.g)return p;if(!p)return null;try{let P=JSON.parse(p);if(P){for(u=0;u<P.length;u++)if(Array.isArray(P[u])){var g=P[u];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var R=_[0];if(R!="noop"&&R!="stop"&&R!="close")for(let x=1;x<_.length;x++)_[x]=""}}}}return ls(P)}catch{return p}}var ir={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oc;function ds(){}m(ds,bc),ds.prototype.g=function(){return new XMLHttpRequest},Oc=new ds;function Xn(u){return encodeURIComponent(String(u))}function ay(u){var p=1;u=u.split(":");let g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function ct(u,p,g,_){this.j=u,this.i=p,this.l=g,this.S=_||1,this.V=new Wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qc}function qc(){this.i=null,this.g="",this.h=!1}var Bc={},hs={};function fs(u,p,g){u.M=1,u.A=or(ze(p)),u.u=g,u.R=!0,Gc(u,null)}function Gc(u,p){u.F=Date.now(),rr(u),u.B=ze(u.A);var g=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),td(g.i,"t",_),u.C=0,g=u.j.L,u.h=new qc,u.g=Td(u.j,g?p:null,!u.u),u.P>0&&(u.O=new ey(d(u.Y,u,u.g),u.P)),p=u.V,g=u.g,_=u.ba;var R="readystatechange";Array.isArray(R)||(R&&(Dc[0]=R.toString()),R=Dc);for(let P=0;P<R.length;P++){let x=Cc(g,R[P],_||p.handleEvent,!1,p.h||p);if(!x)break;p.g[x.key]=x}p=u.J?Ec(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Jn(),iy(u.i,u.v,u.B,u.l,u.S,u.u)}ct.prototype.ba=function(u){u=u.target;let p=this.O;p&&ft(u)==3?p.j():this.Y(u)},ct.prototype.Y=function(u){try{if(u==this.g)e:{let z=ft(this.g),ue=this.g.ya(),X=this.g.ca();if(!(z<3)&&(z!=3||this.g&&(this.h.h||this.g.la()||ld(this.g)))){this.K||z!=4||ue==7||(ue==8||X<=0?Jn(3):Jn(2)),ps(this);var p=this.g.ca();this.X=p;var g=ly(this);if(this.o=p==200,ry(this.i,this.v,this.B,this.l,this.S,z,p),this.o){if(this.U&&!this.L){t:{if(this.g){var _,R=this.g;if((_=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_)){var P=_;break t}}P=null}if(u=P)jt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ms(this,u);else{this.o=!1,this.m=3,Ae(12),Pt(this),Zn(this);break e}}if(this.R){u=!0;let he;for(;!this.K&&this.C<g.length;)if(he=uy(this,g),he==hs){z==4&&(this.m=4,Ae(14),u=!1),jt(this.i,this.l,null,"[Incomplete Response]");break}else if(he==Bc){this.m=4,Ae(15),jt(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else jt(this.i,this.l,he,null),ms(this,he);if($c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),z!=4||g.length!=0||this.h.h||(this.m=1,Ae(16),u=!1),this.o=this.o&&u,!u)jt(this.i,this.l,g,"[Invalid Chunked Response]"),Pt(this),Zn(this);else if(g.length>0&&!this.W){this.W=!0;var x=this.j;x.g==this&&x.aa&&!x.P&&(x.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),vs(x),x.P=!0,Ae(11))}}else jt(this.i,this.l,g,null),ms(this,g);z==4&&Pt(this),this.o&&!this.K&&(z==4?md(this.j,this):(this.o=!1,rr(this)))}else wy(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),Pt(this),Zn(this)}}}catch{}finally{}};function ly(u){if(!$c(u))return u.g.la();let p=ld(u.g);if(p==="")return"";let g="",_=p.length,R=ft(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Pt(u),Zn(u),"";u.h.i=new l.TextDecoder}for(let P=0;P<_;P++)u.h.h=!0,g+=u.h.i.decode(p[P],{stream:!(R&&P==_-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function $c(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function uy(u,p){var g=u.C,_=p.indexOf(`
`,g);return _==-1?hs:(g=Number(p.substring(g,_)),isNaN(g)?Bc:(_+=1,_+g>p.length?hs:(p=p.slice(_,_+g),u.C=_+g,p)))}ct.prototype.cancel=function(){this.K=!0,Pt(this)};function rr(u){u.T=Date.now()+u.H,Hc(u,u.H)}function Hc(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yn(d(u.aa,u),p)}function ps(u){u.D&&(l.clearTimeout(u.D),u.D=null)}ct.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(oy(this.i,this.B),this.M!=2&&(Jn(),Ae(17)),Pt(this),this.m=2,Zn(this)):Hc(this,this.T-u)};function Zn(u){u.j.I==0||u.K||md(u.j,u)}function Pt(u){ps(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Mc(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function ms(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||gs(g.h,u))){if(!u.L&&gs(g.h,u)&&g.I==3){try{var _=g.Ba.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)dr(g),ur(g);else break e;Es(g),Ae(18)}}else g.xa=R[1],0<g.xa-g.K&&R[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Yn(d(g.Va,g),6e3));Kc(g.h)<=1&&g.ta&&(g.ta=void 0)}else Dt(g,11)}else if((u.L||g.g==u)&&dr(g),!E(p))for(R=g.Ba.g.parse(p),p=0;p<R.length;p++){let X=R[p],he=X[0];if(!(he<=g.K))if(g.K=he,X=X[1],g.I==2)if(X[0]=="c"){g.M=X[1],g.ba=X[2];let We=X[3];We!=null&&(g.ka=We,g.j.info("VER="+g.ka));let Mt=X[4];Mt!=null&&(g.za=Mt,g.j.info("SVER="+g.za));let pt=X[5];pt!=null&&typeof pt=="number"&&pt>0&&(_=1.5*pt,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;let mt=u.g;if(mt){let fr=mt.g?mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fr){var P=_.h;P.g||fr.indexOf("spdy")==-1&&fr.indexOf("quic")==-1&&fr.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(ys(P,P.h),P.h=null))}if(_.G){let ws=mt.g?mt.g.getResponseHeader("X-HTTP-Session-Id"):null;ws&&(_.wa=ws,j(_.J,_.G,ws))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var x=u;if(_.na=_d(_,_.L?_.ba:null,_.W),x.L){Jc(_.h,x);var z=x,ue=_.O;ue&&(z.H=ue),z.D&&(ps(z),rr(z)),_.g=x}else fd(_);g.i.length>0&&cr(g)}else X[0]!="stop"&&X[0]!="close"||Dt(g,7);else g.I==3&&(X[0]=="stop"||X[0]=="close"?X[0]=="stop"?Dt(g,7):Is(g):X[0]!="noop"&&g.l&&g.l.qa(X),g.A=0)}}Jn(4)}catch{}}var cy=class{constructor(u,p){this.g=u,this.map=p}};function zc(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wc(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Kc(u){return u.h?1:u.g?u.g.size:0}function gs(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ys(u,p){u.g?u.g.add(p):u.h=p}function Jc(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}zc.prototype.cancel=function(){if(this.i=Yc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Yc(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let g of u.g.values())p=p.concat(g.G);return p}return w(u.i)}var Qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dy(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){let _=u[g].indexOf("="),R,P=null;_>=0?(R=u[g].substring(0,_),P=u[g].substring(_+1)):R=u[g],p(R,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function dt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof dt?(this.l=u.l,jn(this,u.j),this.o=u.o,this.g=u.g,ei(this,u.u),this.h=u.h,_s(this,nd(u.i)),this.m=u.m):u&&(p=String(u).match(Qc))?(this.l=!1,jn(this,p[1]||"",!0),this.o=ti(p[2]||""),this.g=ti(p[3]||"",!0),ei(this,p[4]),this.h=ti(p[5]||"",!0),_s(this,p[6]||"",!0),this.m=ti(p[7]||"")):(this.l=!1,this.i=new ii(null,this.l))}dt.prototype.toString=function(){let u=[];var p=this.j;p&&u.push(ni(p,Xc,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ni(p,Xc,!0),"@"),u.push(Xn(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ni(g,g.charAt(0)=="/"?py:fy,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ni(g,gy)),u.join("")},dt.prototype.resolve=function(u){let p=ze(this),g=!!u.j;g?jn(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var _=u.h;if(g)ei(p,u.u);else if(g=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var R=p.h.lastIndexOf("/");R!=-1&&(_=p.h.slice(0,R+1)+_)}if(R=_,R==".."||R==".")_="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){_=R.lastIndexOf("/",0)==0,R=R.split("/");let P=[];for(let x=0;x<R.length;){let z=R[x++];z=="."?_&&x==R.length&&P.push(""):z==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),_&&x==R.length&&P.push("")):(P.push(z),_=!0)}_=P.join("/")}else _=R}return g?p.h=_:g=u.i.toString()!=="",g?_s(p,nd(u.i)):g=!!u.m,g&&(p.m=u.m),p};function ze(u){return new dt(u)}function jn(u,p,g){u.j=g?ti(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ei(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function _s(u,p,g){p instanceof ii?(u.i=p,yy(u.i,u.l)):(g||(p=ni(p,my)),u.i=new ii(p,u.l))}function j(u,p,g){u.i.set(p,g)}function or(u){return j(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ti(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ni(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,hy),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hy(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xc=/[#\/\?@]/g,fy=/[#\?:]/g,py=/[#\?]/g,my=/[#\?@]/g,gy=/#/g;function ii(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&dy(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ii.prototype,t.add=function(u,p){Nt(this),this.i=null,u=en(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Zc(u,p){Nt(u),p=en(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function jc(u,p){return Nt(u),p=en(u,p),u.g.has(p)}t.forEach=function(u,p){Nt(this),this.g.forEach(function(g,_){g.forEach(function(R){u.call(p,R,_,this)},this)},this)};function ed(u,p){Nt(u);let g=[];if(typeof p=="string")jc(u,p)&&(g=g.concat(u.g.get(en(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return Nt(this),this.i=null,u=en(this,u),jc(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=ed(this,u),u.length>0?String(u[0]):p):p};function td(u,p,g){Zc(u,p),g.length>0&&(u.i=null,u.g.set(en(u,p),w(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(let _=0;_<p.length;_++){var g=p[_];let R=Xn(g);g=ed(this,g);for(let P=0;P<g.length;P++){let x=R;g[P]!==""&&(x+="="+Xn(g[P])),u.push(x)}}return this.i=u.join("&")};function nd(u){let p=new ii;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function en(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function yy(u,p){p&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(g,_){let R=_.toLowerCase();_!=R&&(Zc(this,_),td(this,R,g))},u)),u.j=p}function _y(u,p){let g=new Qn;if(l.Image){let _=new Image;_.onload=f(ht,g,"TestLoadImage: loaded",!0,p,_),_.onerror=f(ht,g,"TestLoadImage: error",!1,p,_),_.onabort=f(ht,g,"TestLoadImage: abort",!1,p,_),_.ontimeout=f(ht,g,"TestLoadImage: timeout",!1,p,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else p(!1)}function Ty(u,p){let g=new Qn,_=new AbortController,R=setTimeout(()=>{_.abort(),ht(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:_.signal}).then(P=>{clearTimeout(R),P.ok?ht(g,"TestPingServer: ok",!0,p):ht(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(R),ht(g,"TestPingServer: error",!1,p)})}function ht(u,p,g,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(g)}catch{}}function Iy(){this.g=new ny}function sr(u){this.i=u.Sb||null,this.h=u.ab||!1}m(sr,bc),sr.prototype.g=function(){return new ar(this.i,this.h)};function ar(u,p){_e.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ar,_e),t=ar.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,oi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||l).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;id(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function id(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ri(this):oi(this),this.readyState==3&&id(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ri(this))},t.Na=function(u){this.g&&(this.response=u,ri(this))},t.ga=function(){this.g&&ri(this)};function ri(u){u.readyState=4,u.l=null,u.j=null,u.B=null,oi(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function oi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rd(u){let p="";return ji(u,function(g,_){p+=_,p+=":",p+=g,p+=`\r
`}),p}function Ts(u,p,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=rd(g),typeof u=="string"?g!=null&&Xn(g):j(u,p,g))}function ne(u){_e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ne,_e);var Ey=/^https?$/i,vy=["POST","PUT"];t=ne.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oc.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(P){od(this,P);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)g.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let P of _.keys())g.set(P,_.get(P));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(P=>P.toLowerCase()=="content-type"),R=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(vy,p,void 0)>=0)||_||R||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,x]of g)this.g.setRequestHeader(P,x);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(P){od(this,P)}};function od(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,sd(u),lr(u)}function sd(u){u.A||(u.A=!0,Ce(u,"complete"),Ce(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ce(this,"complete"),Ce(this,"abort"),lr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ad(this):this.Xa())},t.Xa=function(){ad(this)};function ad(u){if(u.h&&typeof a<"u"){if(u.v&&ft(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ce(u,"readystatechange"),ft(u)==4){u.h=!1;try{let P=u.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var _;if(_=P===0){let x=String(u.D).match(Qc)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),_=!Ey.test(x?x.toLowerCase():"")}g=_}if(g)Ce(u,"complete"),Ce(u,"success");else{u.o=6;try{var R=ft(u)>2?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.ca()+"]",sd(u)}}finally{lr(u)}}}}function lr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let g=u.g;u.g=null,p||Ce(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ft(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ft(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),ty(p)}};function ld(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wy(u){let p={};u=(u.g&&ft(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(E(u[_]))continue;var g=ay(u[_]);let R=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let P=p[R]||[];p[R]=P,P.push(g)}Qg(p,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function ud(u){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=si("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=si("baseRetryDelayMs",5e3,u),this.Za=si("retryDelaySeedMs",1e4,u),this.Ta=si("forwardChannelMaxRetries",2,u),this.va=si("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new zc(u&&u.concurrentRequestLimit),this.Ba=new Iy,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ud.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,_){Ae(0),this.W=u,this.H=p||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=_d(this,null,this.W),cr(this)};function Is(u){if(cd(u),u.I==3){var p=u.V++,g=ze(u.J);if(j(g,"SID",u.M),j(g,"RID",p),j(g,"TYPE","terminate"),ai(u,g),p=new ct(u,u.j,p),p.M=2,p.A=or(ze(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&l.Image&&(new Image().src=p.A,g=!0),g||(p.g=Td(p.j,null),p.g.ea(p.A)),p.F=Date.now(),rr(p)}yd(u)}function ur(u){u.g&&(vs(u),u.g.cancel(),u.g=null)}function cd(u){ur(u),u.v&&(l.clearTimeout(u.v),u.v=null),dr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function cr(u){if(!Wc(u.h)&&!u.m){u.m=!0;var p=u.Ea;O||I(),G||(O(),G=!0),C.add(p,u),u.D=0}}function Cy(u,p){return Kc(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yn(d(u.Ea,u,p),gd(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let R=new ct(this,this.j,u),P=this.o;if(this.U&&(P?(P=Ec(P),wc(P,this.U)):P=this.U),this.u!==null||this.R||(R.J=P,P=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=hd(this,R,p),g=ze(this.J),j(g,"RID",u),j(g,"CVER",22),this.G&&j(g,"X-HTTP-Session-Id",this.G),ai(this,g),P&&(this.R?p="headers="+Xn(rd(P))+"&"+p:this.u&&Ts(g,this.u,P)),ys(this.h,R),this.Ra&&j(g,"TYPE","init"),this.S?(j(g,"$req",p),j(g,"SID","null"),R.U=!0,fs(R,g,null)):fs(R,g,p),this.I=2}}else this.I==3&&(u?dd(this,u):this.i.length==0||Wc(this.h)||dd(this))};function dd(u,p){var g;p?g=p.l:g=u.V++;let _=ze(u.J);j(_,"SID",u.M),j(_,"RID",g),j(_,"AID",u.K),ai(u,_),u.u&&u.o&&Ts(_,u.u,u.o),g=new ct(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=hd(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ys(u.h,g),fs(g,_,p)}function ai(u,p){u.H&&ji(u.H,function(g,_){j(p,_,g)}),u.l&&ji({},function(g,_){j(p,_,g)})}function hd(u,p,g){g=Math.min(u.i.length,g);let _=u.l?d(u.l.Ka,u.l,u):null;e:{var R=u.i;let z=-1;for(;;){let ue=["count="+g];z==-1?g>0?(z=R[0].g,ue.push("ofs="+z)):z=0:ue.push("ofs="+z);let X=!0;for(let he=0;he<g;he++){var P=R[he].g;let We=R[he].map;if(P-=z,P<0)z=Math.max(0,R[he].g-100),X=!1;else try{P="req"+P+"_"||"";try{var x=We instanceof Map?We:Object.entries(We);for(let[Mt,pt]of x){let mt=pt;c(pt)&&(mt=ls(pt)),ue.push(P+Mt+"="+encodeURIComponent(mt))}}catch(Mt){throw ue.push(P+"type="+encodeURIComponent("_badmap")),Mt}}catch{_&&_(We)}}if(X){x=ue.join("&");break e}}x=void 0}return u=u.i.splice(0,g),p.G=u,x}function fd(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;O||I(),G||(O(),G=!0),C.add(p,u),u.A=0}}function Es(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yn(d(u.Da,u),gd(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yn(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),ur(this),pd(this))};function vs(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function pd(u){u.g=new ct(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=ze(u.na);j(p,"RID","rpc"),j(p,"SID",u.M),j(p,"AID",u.K),j(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&j(p,"TO",u.ia),j(p,"TYPE","xmlhttp"),ai(u,p),u.u&&u.o&&Ts(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=or(ze(p)),g.u=null,g.R=!0,Gc(g,u)}t.Va=function(){this.C!=null&&(this.C=null,ur(this),Es(this),Ae(19))};function dr(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function md(u,p){var g=null;if(u.g==p){dr(u),vs(u),u.g=null;var _=2}else if(gs(u.h,p))g=p.G,Jc(u.h,p),_=1;else return;if(u.I!=0){if(p.o)if(_==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var R=u.D;_=nr(),Ce(_,new Fc(_,g)),cr(u)}else fd(u);else if(R=p.m,R==3||R==0&&p.X>0||!(_==1&&Cy(u,p)||_==2&&Es(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),R){case 1:Dt(u,5);break;case 4:Dt(u,10);break;case 3:Dt(u,6);break;default:Dt(u,2)}}}function gd(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function Dt(u,p){if(u.j.info("Error code "+p),p==2){var g=d(u.bb,u),_=u.Ua;let R=!_;_=new dt(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jn(_,"https"),or(_),R?_y(_.toString(),g):Ty(_.toString(),g)}else Ae(2);u.I=0,u.l&&u.l.pa(p),yd(u),cd(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function yd(u){if(u.I=0,u.ja=[],u.l){let p=Yc(u.h);(p.length!=0||u.i.length!=0)&&(N(u.ja,p),N(u.ja,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.oa()}}function _d(u,p,g){var _=g instanceof dt?ze(g):new dt(g);if(_.g!="")p&&(_.g=p+"."+_.g),ei(_,_.u);else{var R=l.location;_=R.protocol,p=p?p+"."+R.hostname:R.hostname,R=+R.port;let P=new dt(null);_&&jn(P,_),p&&(P.g=p),R&&ei(P,R),g&&(P.h=g),_=P}return g=u.G,p=u.wa,g&&p&&j(_,g,p),j(_,"VER",u.ka),ai(u,_),_}function Td(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ne(new sr({ab:g})):new ne(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Id(){}t=Id.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function hr(){}hr.prototype.g=function(u,p){return new ke(u,p)};function ke(u,p){_e.call(this),this.g=new ud(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new tn(this)}m(ke,_e),ke.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ke.prototype.close=function(){Is(this.g)},ke.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=ls(u),u=g);p.i.push(new cy(p.Ya++,u)),p.I==3&&cr(p)},ke.prototype.N=function(){this.g.l=null,delete this.j,Is(this.g),delete this.g,ke.Z.N.call(this)};function Ed(u){us.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}m(Ed,us);function vd(){cs.call(this),this.status=1}m(vd,cs);function tn(u){this.g=u}m(tn,Id),tn.prototype.ra=function(){Ce(this.g,"a")},tn.prototype.qa=function(u){Ce(this.g,new Ed(u))},tn.prototype.pa=function(u){Ce(this.g,new vd)},tn.prototype.oa=function(){Ce(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,ke.prototype.send=ke.prototype.o,ke.prototype.open=ke.prototype.m,ke.prototype.close=ke.prototype.close,hl=st.createWebChannelTransport=function(){return new hr},dl=st.getStatEventTarget=function(){return nr()},cl=st.Event=Rt,Xr=st.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,gi=st.ErrorCode=ir,Uc.COMPLETE="complete",ul=st.EventType=Uc,kc.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",_e.prototype.listen=_e.prototype.J,En=st.WebChannel=kc,b0=st.FetchXmlHttpFactory=sr,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,ll=st.XhrIo=ne}).apply(typeof Qr<"u"?Qr:typeof self<"u"?self:typeof window<"u"?window:{});var Sp="@firebase/firestore",Rp="4.9.2";var Re=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");var qn="12.3.0";var Wt=new Ue("@firebase/firestore");function yi(){return Wt.logLevel}function H(t,...e){if(Wt.logLevel<=W.DEBUG){let n=e.map(bu);Wt.debug(`Firestore (${qn}): ${t}`,...n)}}function Io(t,...e){if(Wt.logLevel<=W.ERROR){let n=e.map(bu);Wt.error(`Firestore (${qn}): ${t}`,...n)}}function em(t,...e){if(Wt.logLevel<=W.WARN){let n=e.map(bu);Wt.warn(`Firestore (${qn}): ${t}`,...n)}}function bu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Q(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,tm(t,i,n)}function tm(t,e,n){let i=`FIRESTORE (${qn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Io(i),new Error(i)}function De(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||tm(e,r,i)}function be(t,e){return t}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends fe{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $t=class{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}};var yl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_l=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Re.UNAUTHENTICATED)))}shutdown(){}};var Tl=class{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let i=this.i,r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve(),a=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $t,e.enqueueRetryable((()=>r(this.currentUser)))};let l=()=>{let h=a;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?c(h):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $t)}}),0),l()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(De(typeof i.accessToken=="string",31837,{l:i}),new yl(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Re(e)}},Il=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},El=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Il(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Re.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},no=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vl=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ne(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);let i=a=>{a.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let l=a.token!==this.m;return this.m=a.token,H("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};let r=a=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){let a=this.V.getImmediate({optional:!0});a?r(a):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new no(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new no(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k0(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var wl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=k0(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%62))}return i}};function Z(t,e){return t<e?-1:t>e?1:0}function Cl(t,e){let n=Math.min(t.length,e.length);for(let i=0;i<n;i++){let r=t.charAt(i),a=e.charAt(i);if(r!==a)return fl(r)===fl(a)?Z(r,a):fl(r)?1:-1}return Z(t.length,e.length)}var x0=55296,V0=57343;function fl(t){let e=t.charCodeAt(0);return e>=x0&&e<=V0}function Rn(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}var Pp="__name__",io=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Q(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let a=t.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return Z(e.length,n.length)}static compareSegments(e,n){let i=t.isNumericId(e),r=t.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?t.extractNumericId(e).compare(t.extractNumericId(n)):Cl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}},ve=class t extends io{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new $(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new t(n)}static emptyPath(){return new t([])}},L0=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=class t extends io{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return L0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pp}static keyField(){return new t([Pp])}static fromServerFormat(e){let n=[],i="",r=0,a=()=>{if(i.length===0)throw new $(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},l=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new $(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new $(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(a(),r++)}if(a(),l)throw new $(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(ve.fromString(e))}static fromName(e){return new t(ve.fromString(e).popFirst(5))}static empty(){return new t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ve(e.slice()))}};function F0(t,e,n,i){if(e===!0&&i===!0)throw new $(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function le(t,e){let n={typeString:t};return e&&(n.value=e),n}function Li(t,e){if(!U0(t))throw new $(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(let i in e)if(e[i]){let r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}let l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new $(U.INVALID_ARGUMENT,n);return!0}var Np=-62135596800,Dp=1e6,Me=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Dp);return new t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Np)throw new $(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dp}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Li(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Np;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:le("string",Me._jsonSchemaVersion),seconds:le("number"),nanoseconds:le("number")};var oe=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Me(0,0))}static max(){return new t(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pi=-1,Al=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};Al.UNKNOWN_ID=-1;function O0(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(i===1e9?new Me(n+1,0):new Me(n,i));return new Kt(r,K.empty(),e)}function q0(t){return new Kt(t.readTime,t.key,Pi)}var Kt=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(oe.min(),K.empty(),Pi)}static max(){return new t(oe.max(),K.empty(),Pi)}};function B0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}var Sl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};var b=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):t.reject(n)}static resolve(e){return new t(((n,i)=>{n(e)}))}static reject(e){return new t(((n,i)=>{i(e)}))}static waitFor(e){return new t(((n,i)=>{let r=0,a=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++a,l&&a===r&&n()}),(h=>i(h)))})),l=!0,a===r&&n()}))}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next((r=>r?t.resolve(r):i()));return n}static forEach(e,n){let i=[];return e.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(e,n){return new t(((i,r)=>{let a=e.length,l=new Array(a),c=0;for(let h=0;h<a;h++){let d=h;n(e[d]).next((f=>{l[d]=f,++c,c===a&&i(l)}),(f=>r(f)))}}))}static doWhile(e,n){return new t(((i,r)=>{let a=()=>{e()===!0?n().next((()=>{a()}),r):i()};a()}))}};function G0(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nm(t){return t.name==="IndexedDbTransactionError"}var ro=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};ro.ce=-1;var $0=-1;function ku(t){return t==null}function oo(t){return t===0&&1/t==-1/0}var H0="remoteDocuments",im="owner";var rm="mutationQueues";var om="mutations";var sm="documentMutations",z0="remoteDocumentsV14";var am="remoteDocumentGlobal";var lm="targets";var um="targetDocuments";var cm="targetGlobal",dm="collectionParents";var hm="clientMetadata";var fm="bundles";var pm="namedQueries";var W0="indexConfiguration";var K0="indexState";var J0="indexEntries";var mm="documentOverlays";var Y0="globals";var Q0=[rm,om,sm,H0,lm,im,cm,um,hm,am,dm,fm,pm],Xb=[...Q0,mm],X0=[rm,om,sm,z0,lm,im,cm,um,hm,am,dm,fm,pm,mm],Z0=X0,j0=[...Z0,W0,K0,J0];var Zb=[...j0,Y0];function Mp(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xu(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var qe=class t{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){let e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wn(this.root,e,this.comparator,!1)}getReverseIterator(){return new wn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wn(this.root,e,this.comparator,!0)}},wn=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ze=class t{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=a??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new t(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,i,r,a){return this}insert(e,n,i){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class t{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new so(this.data.getIterator())}getIteratorFrom(e){return new so(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((n=>{e.push(n)})),e}toString(){let e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},so=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bt=class t{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pe($e.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rn(this.fields,e.fields,((n,i)=>n.isEqual(i)))}};var Rl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Rl("Invalid base64 string: "+a):a}})(e);return new t(n)}static fromUint8Array(e){let n=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var tN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tt(t){if(De(!!t,39018),typeof t=="string"){let e=0,n=tN.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ae(t.seconds),nanos:ae(t.nanos)}}function ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pn(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}var gm="server_timestamp",ym="__type__",_m="__previous_value__",Tm="__local_write_time__";function Vu(t){return(t?.mapValue?.fields||{})[ym]?.stringValue===gm}function Im(t){let e=t.mapValue.fields[_m];return Vu(e)?Im(e):e}function ao(t){let e=Tt(t.mapValue.fields[Tm].timestampValue);return new Me(e.seconds,e.nanos)}var Pl="(default)",Nl=class t{constructor(e,n){this.projectId=e,this.database=n||Pl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Pl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Em="__type__",vm="__max__",Zr={mapValue:{fields:{__type__:{stringValue:vm}}}},wm="__vector__",lo="value";function Nn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vu(t)?4:Am(t)?9007199254740991:Cm(t)?10:11:Q(28295,{value:t})}function je(t,e){if(t===e)return!0;let n=Nn(t);if(n!==Nn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ao(t).isEqual(ao(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;let l=Tt(r.timestampValue),c=Tt(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,a){return Pn(r.bytesValue).isEqual(Pn(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,a){return ae(r.geoPointValue.latitude)===ae(a.geoPointValue.latitude)&&ae(r.geoPointValue.longitude)===ae(a.geoPointValue.longitude)})(t,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return ae(r.integerValue)===ae(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){let l=ae(r.doubleValue),c=ae(a.doubleValue);return l===c?oo(l)===oo(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Rn(t.arrayValue.values||[],e.arrayValue.values||[],je);case 10:case 11:return(function(r,a){let l=r.mapValue.fields||{},c=a.mapValue.fields||{};if(Mp(l)!==Mp(c))return!1;for(let h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!je(l[h],c[h])))return!1;return!0})(t,e);default:return Q(52216,{left:t})}}function Ni(t,e){return(t.values||[]).find((n=>je(n,e)))!==void 0}function Dn(t,e){if(t===e)return 0;let n=Nn(t),i=Nn(e);if(n!==i)return Z(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return(function(a,l){let c=ae(a.integerValue||a.doubleValue),h=ae(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(t,e);case 3:return bp(t.timestampValue,e.timestampValue);case 4:return bp(ao(t),ao(e));case 5:return Cl(t.stringValue,e.stringValue);case 6:return(function(a,l){let c=Pn(a),h=Pn(l);return c.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){let c=a.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){let f=Z(c[d],h[d]);if(f!==0)return f}return Z(c.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){let c=Z(ae(a.latitude),ae(l.latitude));return c!==0?c:Z(ae(a.longitude),ae(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return kp(t.arrayValue,e.arrayValue);case 10:return(function(a,l){let c=a.fields||{},h=l.fields||{},d=c[lo]?.arrayValue,f=h[lo]?.arrayValue,m=Z(d?.values?.length||0,f?.values?.length||0);return m!==0?m:kp(d,f)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Zr.mapValue&&l===Zr.mapValue)return 0;if(a===Zr.mapValue)return 1;if(l===Zr.mapValue)return-1;let c=a.fields||{},h=Object.keys(c),d=l.fields||{},f=Object.keys(d);h.sort(),f.sort();for(let m=0;m<h.length&&m<f.length;++m){let y=Cl(h[m],f[m]);if(y!==0)return y;let w=Dn(c[h[m]],d[f[m]]);if(w!==0)return w}return Z(h.length,f.length)})(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function bp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=Tt(t),i=Tt(e),r=Z(n.seconds,i.seconds);return r!==0?r:Z(n.nanos,i.nanos)}function kp(t,e){let n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){let a=Dn(n[r],i[r]);if(a)return a}return Z(n.length,i.length)}function Mn(t){return Dl(t)}function Dl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let i=Tt(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Pn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return K.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(let a of n.values||[])r?r=!1:i+=",",i+=Dl(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){let i=Object.keys(n.fields||{}).sort(),r="{",a=!0;for(let l of i)a?a=!1:r+=",",r+=`${l}:${Dl(n.fields[l])}`;return r+"}"})(t.mapValue):Q(61005,{value:t})}function Ml(t){return!!t&&"integerValue"in t}function Lu(t){return!!t&&"arrayValue"in t}function pl(t){return!!t&&"mapValue"in t}function Cm(t){return(t?.mapValue?.fields||{})[Em]?.stringValue===wm}function Ti(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){let e={mapValue:{fields:{}}};return xu(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ti(i))),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ti(t.arrayValue.values[n]);return e}return{...t}}function Am(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vm}var ek={mapValue:{fields:{[Em]:{stringValue:wm},[lo]:{arrayValue:{}}}}};var _t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ti(n)}setAll(e){let n=$e.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){let h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=Ti(l):r.push(c.lastSegment())}));let a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){let n=this.field(e.popLast());pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return je(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];pl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){xu(n,((r,a)=>e[r]=a));for(let r of i)delete e[r]}clone(){return new t(Ti(this.value))}};var bn=class t{constructor(e,n,i,r,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new t(e,0,oe.min(),oe.min(),oe.min(),_t.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,oe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,oe.min(),oe.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,oe.min(),oe.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var kn=class{constructor(e,n){this.position=e,this.inclusive=n}};function xp(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let a=e[r],l=t.position[r];if(a.field.isKeyField()?i=K.comparator(K.fromName(l.referenceValue),n.key):i=Dn(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!je(t.position[n],e.position[n]))return!1;return!0}var xn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function nN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var uo=class{},me=class t extends uo{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new kl(e,n,i):n==="array-contains"?new Ll(e,i):n==="in"?new Fl(e,i):n==="not-in"?new Ul(e,i):n==="array-contains-any"?new Ol(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new xl(e,i):new Vl(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dn(n,this.value)):n!==null&&Nn(this.value)===Nn(n)&&this.matchesComparison(Dn(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},It=class t extends uo{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return Sm(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Sm(t){return t.op==="and"}function Rm(t){return iN(t)&&Sm(t)}function iN(t){for(let e of t.filters)if(e instanceof It)return!1;return!0}function bl(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+Mn(t.value);if(Rm(t))return t.filters.map((e=>bl(e))).join(",");{let e=t.filters.map((n=>bl(n))).join(",");return`${t.op}(${e})`}}function Pm(t,e){return t instanceof me?(function(i,r){return r instanceof me&&i.op===r.op&&i.field.isEqual(r.field)&&je(i.value,r.value)})(t,e):t instanceof It?(function(i,r){return r instanceof It&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,c)=>a&&Pm(l,r.filters[c])),!0):!1})(t,e):void Q(19439)}function Nm(t){return t instanceof me?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mn(n.value)}`})(t):t instanceof It?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nm).join(" ,")+"}"})(t):"Filter"}var kl=class extends me{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},xl=class extends me{constructor(e,n){super(e,"in",n),this.keys=Dm("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}},Vl=class extends me{constructor(e,n){super(e,"not-in",n),this.keys=Dm("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}};function Dm(t,e){return(e.arrayValue?.values||[]).map((n=>K.fromName(n.referenceValue)))}var Ll=class extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Lu(n)&&Ni(n.arrayValue,this.value)}},Fl=class extends me{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ni(this.value.arrayValue,n)}},Ul=class extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ni(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ni(this.value.arrayValue,n)}},Ol=class extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ni(this.value.arrayValue,i)))}};var ql=class{constructor(e,n=null,i=[],r=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}};function Lp(t,e=null,n=[],i=[],r=null,a=null,l=null){return new ql(t,e,n,i,r,a,l)}function Fu(t){let e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>bl(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Mn(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Mn(i))).join(",")),e.Te=n}return e.Te}function Uu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pm(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vp(t.startAt,e.startAt)&&Vp(t.endAt,e.endAt)}var Vn=class{constructor(e,n=null,i=[],r=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function rN(t,e,n,i,r,a,l,c){return new Vn(t,e,n,i,r,a,l,c)}function oN(t){return new Vn(t)}function Fp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sN(t){return t.collectionGroup!==null}function Ii(t){let e=be(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Pe($e.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new xn(a,i))})),n.has($e.keyField().canonicalString())||e.Ie.push(new xn($e.keyField(),i))}return e.Ie}function Ht(t){let e=be(t);return e.Ee||(e.Ee=aN(e,Ii(t))),e.Ee}function aN(t,e){if(t.limitType==="F")return Lp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{let a=r.dir==="desc"?"asc":"desc";return new xn(r.field,a)}));let n=t.endAt?new kn(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kn(t.startAt.position,t.startAt.inclusive):null;return Lp(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bl(t,e,n){return new Vn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mm(t,e){return Uu(Ht(t),Ht(e))&&t.limitType===e.limitType}function bm(t){return`${Fu(Ht(t))}|lt:${t.limitType}`}function _i(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>Nm(r))).join(", ")}]`),ku(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Mn(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Mn(r))).join(",")),`Target(${i})`})(Ht(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&(function(i,r){let a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):K.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,r){for(let a of Ii(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(let a of i.filters)if(!a.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,h){let d=xp(l,c,h);return l.inclusive?d<=0:d<0})(i.startAt,Ii(i),r)||i.endAt&&!(function(l,c,h){let d=xp(l,c,h);return l.inclusive?d>=0:d>0})(i.endAt,Ii(i),r))})(t,e)}function lN(t){return(e,n)=>{let i=!1;for(let r of Ii(t)){let a=uN(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function uN(t,e,n){let i=t.field.isKeyField()?K.comparator(e.key,n.key):(function(a,l,c){let h=l.data.field(a),d=c.data.field(a);return h!==null&&d!==null?Dn(h,d):Q(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:t.dir})}}var Et=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xu(this.inner,((n,i)=>{for(let[r,a]of i)e(r,a)}))}isEmpty(){return eN(this.inner)}size(){return this.innerSize}};var cN=new qe(K.comparator);function Gl(){return cN}var km=new qe(K.comparator);function jr(...t){let e=km;for(let n of t)e=e.insert(n.key,n);return e}function dN(t){let e=km;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Gt(){return Ei()}function xm(){return Ei()}function Ei(){return new Et((t=>t.toString()),((t,e)=>t.isEqual(e)))}var tk=new qe(K.comparator),hN=new Pe(K.comparator);function Ve(...t){let e=hN;for(let n of t)e=e.add(n);return e}var fN=new Pe(Z);function pN(){return fN}function mN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(e)?"-0":e}}function gN(t){return{integerValue:""+t}}var Ln=class{constructor(){this._=void 0}};function yN(t,e,n){return t instanceof Di?(function(r,a){let l={fields:{[ym]:{stringValue:gm},[Tm]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Vu(a)&&(a=Im(a)),a&&(l.fields[_m]=a),{mapValue:l}})(n,e):t instanceof Fn?Vm(t,e):t instanceof Un?Lm(t,e):(function(r,a){let l=TN(r,a),c=Up(l)+Up(r.Ae);return Ml(l)&&Ml(r.Ae)?gN(c):mN(r.serializer,c)})(t,e)}function _N(t,e,n){return t instanceof Fn?Vm(t,e):t instanceof Un?Lm(t,e):n}function TN(t,e){return t instanceof Mi?(function(i){return Ml(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}var Di=class extends Ln{},Fn=class extends Ln{constructor(e){super(),this.elements=e}};function Vm(t,e){let n=Fm(e);for(let i of t.elements)n.some((r=>je(r,i)))||n.push(i);return{arrayValue:{values:n}}}var Un=class extends Ln{constructor(e){super(),this.elements=e}};function Lm(t,e){let n=Fm(e);for(let i of t.elements)n=n.filter((r=>!je(r,i)));return{arrayValue:{values:n}}}var Mi=class extends Ln{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function Up(t){return ae(t.integerValue||t.doubleValue)}function Fm(t){return Lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IN(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Fn&&r instanceof Fn||i instanceof Un&&r instanceof Un?Rn(i.elements,r.elements,je):i instanceof Mi&&r instanceof Mi?je(i.Ae,r.Ae):i instanceof Di&&r instanceof Di})(t.transform,e.transform)}var vi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function to(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var bi=class{};function Um(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $l(t.key,vi.none()):new ki(t.key,t.data,vi.none());{let n=t.data,i=_t.empty(),r=new Pe($e.comparator);for(let a of e.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new On(t.key,i,new Bt(r.toArray()),vi.none())}}function EN(t,e,n){t instanceof ki?(function(r,a,l){let c=r.value.clone(),h=qp(r.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof On?(function(r,a,l){if(!to(r.precondition,a))return void a.convertToUnknownDocument(l.version);let c=qp(r.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(Om(r)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function wi(t,e,n,i){return t instanceof ki?(function(a,l,c,h){if(!to(a.precondition,l))return c;let d=a.value.clone(),f=Bp(a.fieldTransforms,h,l);return d.setAll(f),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof On?(function(a,l,c,h){if(!to(a.precondition,l))return c;let d=Bp(a.fieldTransforms,h,l),f=l.data;return f.setAll(Om(a)),f.setAll(d),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((m=>m.field)))})(t,e,n,i):(function(a,l,c){return to(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function Op(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Rn(i,r,((a,l)=>IN(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ki=class extends bi{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},On=class extends bi{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}};function Om(t){let e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}})),e}function qp(t,e,n){let i=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){let a=t[r],l=a.transform,c=e.data.field(a.field);i.set(a.field,_N(l,c,n[r]))}return i}function Bp(t,e,n){let i=new Map;for(let r of t){let a=r.transform,l=n.data.field(r.field);i.set(r.field,yN(a,l,e))}return i}var $l=class extends bi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Hl=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let a=this.mutations[r];a.key.isEqual(e.key)&&EN(a,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=wi(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=wi(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=xm();return this.mutations.forEach((r=>{let a=e.get(r.key),l=a.overlayedDocument,c=this.applyToLocalView(l,a.mutatedFields);c=n.has(r.key)?null:c;let h=Um(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Rn(this.mutations,e.mutations,((n,i)=>Op(n,i)))&&Rn(this.baseMutations,e.baseMutations,((n,i)=>Op(n,i)))}};var zl=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var re,J;function vN(t){if(t===void 0)return Io("GRPC error has no .code"),U.UNKNOWN;switch(t){case re.OK:return U.OK;case re.CANCELLED:return U.CANCELLED;case re.UNKNOWN:return U.UNKNOWN;case re.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case re.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case re.INTERNAL:return U.INTERNAL;case re.UNAVAILABLE:return U.UNAVAILABLE;case re.UNAUTHENTICATED:return U.UNAUTHENTICATED;case re.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case re.NOT_FOUND:return U.NOT_FOUND;case re.ALREADY_EXISTS:return U.ALREADY_EXISTS;case re.PERMISSION_DENIED:return U.PERMISSION_DENIED;case re.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case re.ABORTED:return U.ABORTED;case re.OUT_OF_RANGE:return U.OUT_OF_RANGE;case re.UNIMPLEMENTED:return U.UNIMPLEMENTED;case re.DATA_LOSS:return U.DATA_LOSS;default:return Q(39323,{code:t})}}(J=re||(re={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";var nk=new Yr([4294967295,4294967295],0);var Wl=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Gp(t){return De(!!t,49232),oe.fromTimestamp((function(n){let i=Tt(n);return new Me(i.seconds,i.nanos)})(t))}function $p(t,e){let n=(function(r){return new ve(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wN(t){let e=ve.fromString(t);return De(RN(e),10190,{key:e.toString()}),e}function CN(t){let e=wN(t);return e.length===4?ve.emptyPath():AN(e)}function AN(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function SN(t){let e=CN(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){De(i===1,65062);let f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(m){let y=qm(m);return y instanceof It&&Rm(y)?y.getFilters():[y]})(n.where));let l=[];n.orderBy&&(l=(function(m){return m.map((y=>(function(N){return new xn(vn(N.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(y)))})(n.orderBy));let c=null;n.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,ku(y)?null:y})(n.limit));let h=null;n.startAt&&(h=(function(m){let y=!!m.before,w=m.values||[];return new kn(w,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){let y=!m.before,w=m.values||[];return new kn(w,y)})(n.endAt)),rN(e,r,l,a,c,"F",h,d)}function qm(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=vn(n.unaryFilter.field);return me.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=vn(n.unaryFilter.field);return me.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let a=vn(n.unaryFilter.field);return me.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let l=vn(n.unaryFilter.field);return me.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return me.create(vn(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return It.create(n.compositeFilter.filters.map((i=>qm(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}})(n.compositeFilter.op))})(t):Q(30097,{filter:t})}function vn(t){return $e.fromServerFormat(t.fieldPath)}function RN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Kl=class{constructor(e){this.yt=e}};function PN(t){let e=SN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bl(e,e.limit,"L"):e}var co=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ae(e.integerValue));else if("doubleValue"in e){let i=ae(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),oo(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Tt(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Pn(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?Am(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Cm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let i=e.fields||{};this.Ft(n,55);for(let r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){let i=e.fields||{};this.Ft(n,53);let r=lo,a=i[r].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ae(a)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){let i=e.values||[];this.Ft(n,50);for(let r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach((i=>{this.Ft(n,60),this.Ut(i,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};co.Kt=new co;var Jl=class{constructor(){this.Cn=new Yl}addToCollectionParentIndex(e,n){return this.Cn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Kt.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Kt.min())}updateCollectionGroup(e,n,i){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}},Yl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Pe(ve.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Pe(ve.comparator)).toArray()}};var ik=new Uint8Array(0);var Bm=41943040,Xe=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}};Xe.DEFAULT_COLLECTION_PERCENTILE=10,Xe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xe.DEFAULT=new Xe(Bm,Xe.DEFAULT_COLLECTION_PERCENTILE,Xe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xe.DISABLED=new Xe(-1,0,0);var xi=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var NN=1048576;var Ql=class{constructor(){this.changes=new Et((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xl=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Zl=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&wi(i.mutation,r,Bt.empty(),Me.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ve()){let r=Gt();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((a=>{let l=jr();return a.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){let i=Gt();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ve())))}populateOverlays(e,n,i){let r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let a=Gl(),l=Ei(),c=(function(){return Ei()})();return n.forEach(((h,d)=>{let f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof On)?a=a.insert(d.key,d):f!==void 0?(l.set(d.key,f.mutation.getFieldMask()),wi(f.mutation,d,f.mutation.getFieldMask(),Me.now())):l.set(d.key,Bt.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((d,f)=>l.set(d,f))),n.forEach(((d,f)=>c.set(d,new Xl(f,l.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){let i=Ei(),r=new qe(((l,c)=>l-c)),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(let c of l)c.keys().forEach((h=>{let d=n.get(h);if(d===null)return;let f=i.get(h)||Bt.empty();f=c.applyToLocalView(d,f),i.set(h,f);let m=(r.get(c.batchId)||Ve()).add(h);r=r.insert(c.batchId,m)}))})).next((()=>{let l=[],c=r.getReverseIterator();for(;c.hasNext();){let h=c.getNext(),d=h.key,f=h.value,m=xm();f.forEach((y=>{if(!a.has(y)){let w=Um(n.get(y),i.get(y));w!==null&&m.set(y,w),a=a.add(y)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,m))}return b.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return K.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((a=>{let l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):b.resolve(Gt()),c=Pi,h=a;return l.next((d=>b.forEach(d,((f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(f)?b.resolve():this.remoteDocumentCache.getEntry(e,f).next((y=>{h=h.insert(f,y)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,h,d,Ve()))).next((f=>({batchId:c,changes:dN(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next((i=>{let r=jr();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let a=n.collectionGroup,l=jr();return this.indexManager.getCollectionParents(e,a).next((c=>b.forEach(c,(h=>{let d=(function(m,y){return new Vn(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((f=>{f.forEach(((m,y)=>{l=l.insert(m,y)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r)))).next((l=>{a.forEach(((h,d)=>{let f=d.getKey();l.get(f)===null&&(l=l.insert(f,bn.newInvalidDocument(f)))}));let c=jr();return l.forEach(((h,d)=>{let f=a.get(h);f!==void 0&&wi(f.mutation,d,Bt.empty(),Me.now()),Ou(n,d)&&(c=c.insert(h,d))})),c}))}};var jl=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return b.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Gp(r.createTime)}})(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:PN(r.bundledQuery),readTime:Gp(r.readTime)}})(n)),b.resolve()}};var eu=class{constructor(){this.overlays=new qe(K.comparator),this.qr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Gt();return b.forEach(n,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,a)=>{this.St(e,n,a)})),b.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),b.resolve()}getOverlaysForCollection(e,n,i){let r=Gt(),a=n.length+1,l=new K(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){let h=c.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&h.largestBatchId>i&&r.set(h.getKey(),h)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new qe(((d,f)=>d-f)),l=this.overlays.getIterator();for(;l.hasNext();){let d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let f=a.get(d.largestBatchId);f===null&&(f=Gt(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Gt(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,f)=>c.set(d,f))),!(c.size()>=r)););return b.resolve(c)}St(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new zl(n,i));let a=this.qr.get(n);a===void 0&&(a=Ve(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}};var tu=class{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return b.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,b.resolve()}};var Vi=class{constructor(){this.Qr=new Pe(se.$r),this.Ur=new Pe(se.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let i=new se(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new se(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){let n=new K(new ve([])),i=new se(n,e),r=new se(n,e+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new K(new ve([])),i=new se(n,e),r=new se(n,e+1),a=Ve();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(e){let n=new se(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},se=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||Z(e.Yr,n.Yr)}static Kr(e,n){return Z(e.Yr,n.Yr)||K.comparator(e.key,n.key)}};var nu=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(se.$r)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let l=new Hl(a,n,i,r);this.mutationQueue.push(l);for(let c of r)this.Zr=this.Zr.add(new se(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return b.resolve(l)}lookupMutationBatch(e,n){return b.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.ei(i),a=r<0?0:r;return b.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?$0:this.tr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new se(n,0),r=new se(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{let c=this.Xr(l.Yr);a.push(c)})),b.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pe(Z);return n.forEach((r=>{let a=new se(r,0),l=new se(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(c=>{i=i.add(c.Yr)}))})),b.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,a=i;K.isDocumentKey(a)||(a=a.child(""));let l=new se(new K(a),0),c=new Pe(Z);return this.Zr.forEachWhile((h=>{let d=h.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(h.Yr)),!0)}),l),b.resolve(this.ti(c))}ti(e){let n=[];return e.forEach((i=>{let r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return b.forEach(n.mutations,(r=>{let a=new se(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){let i=new se(n,0),r=this.Zr.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var iu=class{constructor(e){this.ri=e,this.docs=(function(){return new qe(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let i=Gl();return n.forEach((r=>{let a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():bn.newInvalidDocument(r))})),b.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=Gl(),l=n.path,c=new K(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){let{key:d,value:{document:f}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||B0(q0(f),i)<=0||(r.has(f.key)||Ou(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return b.resolve(a)}getAllFromCollectionGroup(e,n,i,r){Q(9500)}ii(e,n){return b.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new ru(this)}getSize(e){return b.resolve(this.size)}},ru=class extends Ql{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),b.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var ou=class{constructor(e){this.persistence=e,this.si=new Et((n=>Fu(n)),Uu),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Vi,this.targetCount=0,this.ai=xi.ur()}forEachTarget(e,n){return this.si.forEach(((i,r)=>n(r))),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),b.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new xi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Pr(n),b.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,i){let r=0,a=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),b.waitFor(a).next((()=>r))}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){let i=this.si.get(n)||null;return b.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),b.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);let r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((l=>{a.push(r.markPotentiallyOrphaned(e,l))})),b.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),b.resolve()}getMatchingKeysForTargetId(e,n){let i=this._i.Hr(n);return b.resolve(i)}containsKey(e,n){return b.resolve(this._i.containsKey(n))}};var su=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new ro(0),this.li=!1,this.li=!0,this.hi=new tu,this.referenceDelegate=e(this),this.Pi=new ou(this),this.indexManager=new Jl,this.remoteDocumentCache=(function(r){return new iu(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Kl(n),this.Ii=new jl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eu,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new nu(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);let r=new au(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,n){return b.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}},au=class extends Sl{constructor(e){super(),this.currentSequenceNumber=e}},lu=class t{constructor(e){this.persistence=e,this.Ri=new Vi,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),b.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),b.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.fi,(i=>{let r=K.fromPath(i);return this.gi(e,r).next((a=>{a||n.removeEntry(r,oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return b.or([()=>b.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}};var uu=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Ve(),r=Ve();for(let a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new t(e,n.fromCache,i,r)}};var cu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var du=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Rf()?8:G0(pe())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){let a={result:null};return this.ys(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,n,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;let l=new cu;return this.Ss(e,n,l).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>a.result))}bs(e,n,i,r){return i.documentReadCount<this.fs?(yi()<=W.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",_i(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),b.resolve()):(yi()<=W.DEBUG&&H("QueryEngine","Query:",_i(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(yi()<=W.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",_i(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):b.resolve())}ys(e,n){if(Fp(n))return b.resolve(null);let i=Ht(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Bl(n,null,"F"),i=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{let l=Ve(...a);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{let d=this.Ds(n,c);return this.Cs(n,d,l,h.readTime)?this.ys(e,Bl(n,null,"F")):this.vs(e,d,n,h)}))))})))))}ws(e,n,i,r){return Fp(n)||r.isEqual(oe.min())?b.resolve(null):this.ps.getDocuments(e,i).next((a=>{let l=this.Ds(n,a);return this.Cs(n,l,i,r)?b.resolve(null):(yi()<=W.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_i(n)),this.vs(e,l,n,O0(r,Pi)).next((c=>c)))}))}Ds(e,n){let i=new Pe(lN(e));return n.forEach(((r,a)=>{Ou(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,n,i){return yi()<=W.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",_i(n)),this.ps.getDocumentsMatchingQuery(e,n,Kt.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}};var DN="LocalStore";var hu=class{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new qe(Z),this.xs=new Et((a=>Fu(a)),Uu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zl(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}};function MN(t,e,n,i){return new hu(t,e,n,i)}async function bN(t,e){let n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{let l=[],c=[],h=Ve();for(let d of r){l.push(d.batchId);for(let f of d.mutations)h=h.add(f.key)}for(let d of a){c.push(d.batchId);for(let f of d.mutations)h=h.add(f.key)}return n.localDocuments.getDocuments(i,h).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:c})))}))}))}var ho=class{constructor(){this.activeTargetIds=pN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var fu=class{constructor(){this.Mo=new ho,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ho,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pu=class{Oo(e){}shutdown(){}};var Hp="ConnectivityMonitor",fo=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Hp,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){H(Hp,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var eo=null;function mu(){return eo===null?eo=(function(){return 268435456+Math.round(2147483648*Math.random())})():eo++,"0x"+eo.toString(16)}var ml="RestConnection",kN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},gu=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Pl?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,a){let l=mu(),c=this.zo(e,n.toUriEncodedString());H(ml,`Sending RPC '${e}' ${l}:`,c,i);let h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,a);let{host:d}=new URL(c),f=Lt(d);return this.Jo(e,c,h,i,f).then((m=>(H(ml,`Received RPC '${e}' ${l}: `,m),m)),(m=>{throw em(ml,`RPC '${e}' ${l} failed with error: `,m,"url: ",c,"request:",i),m}))}Ho(e,n,i,r,a,l){return this.Go(e,n,i,r,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qn})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,n){let i=kN[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}};var yu=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ee="WebChannelConnection",_u=class extends gu{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,a){let l=mu();return new Promise(((c,h)=>{let d=new ll;d.setWithCredentials(!0),d.listenOnce(ul.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case gi.NO_ERROR:let m=d.getResponseJson();H(Ee,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(m)),c(m);break;case gi.TIMEOUT:H(Ee,`RPC '${e}' ${l} timed out`),h(new $(U.DEADLINE_EXCEEDED,"Request time out"));break;case gi.HTTP_ERROR:let y=d.getStatus();if(H(Ee,`RPC '${e}' ${l} failed with status:`,y,"response text:",d.getResponseText()),y>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);let N=w?.error;if(N&&N.status&&N.message){let D=(function(V){let k=V.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(k)>=0?k:U.UNKNOWN})(N.status);h(new $(D,N.message))}else h(new $(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new $(U.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(Ee,`RPC '${e}' ${l} completed.`)}}));let f=JSON.stringify(r);H(Ee,`RPC '${e}' ${l} sending request:`,r),d.send(n,"POST",f,i,15)}))}T_(e,n,i){let r=mu(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=hl(),c=dl(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;let f=a.join("");H(Ee,`Creating RPC '${e}' stream ${r}: ${f}`,h);let m=l.createWebChannel(f,h);this.I_(m);let y=!1,w=!1,N=new yu({Yo:M=>{w?H(Ee,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(y||(H(Ee,`Opening RPC '${e}' stream ${r} transport.`),m.open(),y=!0),H(Ee,`RPC '${e}' stream ${r} sending:`,M),m.send(M))},Zo:()=>m.close()}),D=(M,V,k)=>{M.listen(V,(L=>{try{k(L)}catch(q){setTimeout((()=>{throw q}),0)}}))};return D(m,En.EventType.OPEN,(()=>{w||(H(Ee,`RPC '${e}' stream ${r} transport opened.`),N.o_())})),D(m,En.EventType.CLOSE,(()=>{w||(w=!0,H(Ee,`RPC '${e}' stream ${r} transport closed`),N.a_(),this.E_(m))})),D(m,En.EventType.ERROR,(M=>{w||(w=!0,em(Ee,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),N.a_(new $(U.UNAVAILABLE,"The operation could not be completed")))})),D(m,En.EventType.MESSAGE,(M=>{if(!w){let V=M.data[0];De(!!V,16349);let k=V,L=k?.error||k[0]?.error;if(L){H(Ee,`RPC '${e}' stream ${r} received error:`,L);let q=L.status,O=(function(I){let T=re[I];if(T!==void 0)return vN(T)})(q),G=L.message;O===void 0&&(O=U.INTERNAL,G="Unknown error status: "+q+" with message "+L.message),w=!0,N.a_(new $(O,G)),m.close()}else H(Ee,`RPC '${e}' stream ${r} received:`,V),N.u_(V)}})),D(c,cl.STAT_EVENT,(M=>{M.stat===Xr.PROXY?H(Ee,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Xr.NOPROXY&&H(Ee,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}};function gl(){return typeof document<"u"?document:null}function Gm(t){return new Wl(t,!0)}var Tu=class{constructor(e,n,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Iu=class{},Eu=class extends Iu{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new $(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,$p(n,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(U.UNKNOWN,a.toString())}))}Ho(e,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,$p(n,i),r,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new $(U.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},vu=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Io(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var $m="RemoteStore",wu=class{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{zm(this)&&(H($m,"Restarting streams for network reachability change."),await(async function(h){let d=be(h);d.Ea.add(4),await qu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Hm(d)})(this))}))})),this.Ra=new vu(i,r)}};async function Hm(t){if(zm(t))for(let e of t.da)await e(!0)}async function qu(t){for(let e of t.da)await e(!1)}function zm(t){return be(t).Ea.size===0}async function xN(t,e){let n=be(t);e?(n.Ea.delete(2),await Hm(n)):e||(n.Ea.add(2),await qu(n),n.Ra.set("Unknown"))}var Cu=class t{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){let l=Date.now()+i,c=new t(e,n,l,r,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Au=class{constructor(){this.queries=zp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){let r=be(n),a=r.queries;r.queries=zp(),a.forEach(((l,c)=>{for(let h of c.Sa)h.onError(i)}))})(this,new $(U.ABORTED,"Firestore shutting down"))}};function zp(){return new Et((t=>bm(t)),Mm)}function VN(t){t.Ca.forEach((e=>{e.next()}))}var Wp,Kp;(Kp=Wp||(Wp={})).Ma="default",Kp.Cache="cache";var LN="SyncEngine";var Su=class{constructor(e,n,i,r,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Et((c=>bm(c)),Mm),this.Iu=new Map,this.Eu=new Set,this.du=new qe(K.comparator),this.Au=new Map,this.Ru=new Vi,this.Vu={},this.mu=new Map,this.fu=xi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Jp(t,e,n){let i=be(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.Tu.forEach(((a,l)=>{let c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){let h=be(l);h.onlineState=c;let d=!1;h.queries.forEach(((f,m)=>{for(let y of m.Sa)y.va(c)&&(d=!0)})),d&&VN(h)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FN(t,e,n){let i=be(t),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,h)=>{l.push(i.pu(h,e,n).then((d=>{if((d||n)&&i.isPrimaryClient){let f=d?!d.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,f?"current":"not-current")}if(d){r.push(d);let f=uu.As(h.targetId,d);a.push(f)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(h,d){let f=be(h);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>b.forEach(d,(y=>b.forEach(y.Es,(w=>f.persistence.referenceDelegate.addReference(m,y.targetId,w))).next((()=>b.forEach(y.ds,(w=>f.persistence.referenceDelegate.removeReference(m,y.targetId,w)))))))))}catch(m){if(!nm(m))throw m;H(DN,"Failed to update sequence numbers: "+m)}for(let m of d){let y=m.targetId;if(!m.fromCache){let w=f.Ms.get(y),N=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(N);f.Ms=f.Ms.insert(y,D)}}})(i.localStore,a))}async function UN(t,e){let n=be(t);if(!n.currentUser.isEqual(e)){H(LN,"User change. New user:",e.toKey());let i=await bN(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((h=>{h.reject(new $(U.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await FN(n,i.Ls)}}var po=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MN(this.persistence,new du,e.initialUser,this.serializer)}Cu(e){return new su(lu.mi,this.serializer)}Du(e){return new fu}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};po.provider={build:()=>new po};var mo=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UN.bind(null,this.syncEngine),await xN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Au})()}createDatastore(e){let n=Gm(e.databaseInfo.databaseId),i=(function(a){return new _u(a)})(e.databaseInfo);return(function(a,l,c,h){return new Eu(a,l,c,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,a,l,c){return new wu(i,r,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Jp(this.syncEngine,n,0)),(function(){return fo.v()?new fo:new pu})())}createSyncEngine(e,n){return(function(r,a,l,c,h,d,f){let m=new Su(r,a,l,c,h,d);return f&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){let i=be(n);H($m,"RemoteStore shutting down."),i.Ea.add(5),await qu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};mo.provider={build:()=>new mo};function ON(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Yp=new Map;var qN="firestore.googleapis.com",Qp=!0,go=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qN,this.ssl=Qp}else this.host=e.host,this.ssl=e.ssl??Qp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bm;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NN)throw new $(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ON(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ru=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new go({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new go(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _l;switch(i.type){case"firstParty":return new El(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let i=Yp.get(n);i&&(H("ComponentProvider","Removing Datastore"),Yp.delete(n),i.terminate())})(this),Promise.resolve()}};var Pu=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},zt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Li(n,t._jsonSchema))return new t(e,i||null,new K(ve.fromString(n.referencePath)))}};zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:le("string",zt._jsonSchemaVersion),referencePath:le("string")};var Nu=class t extends Pu{constructor(e,n,i){super(e,n,oN(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};var Xp="AsyncQueue",yo=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tu(this,"async_queue_retry"),this._c=()=>{let i=gl();i&&H(Xp,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let n=gl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=gl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let n=new $t;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nm(e))throw e;H(Xp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Io("INTERNAL UNHANDLED ERROR: ",Zp(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let r=Cu.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:Zp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function Zp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Du=class extends Ru{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new yo,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yo(e),this._firestoreClient=void 0,await e}}};var Ci=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(at.fromBase64String(e))}catch(n){throw new $(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Li(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:le("string",Ci._jsonSchemaVersion),bytes:le("string")};var _o=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ai=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Li(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:le("string",Ai._jsonSchemaVersion),latitude:le("number"),longitude:le("number")};var Si=class t{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Li(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new t(e.vectorValues);throw new $(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:le("string",Si._jsonSchemaVersion),vectorValues:le("object")};var BN=new RegExp("[~\\*/\\[\\]]");function GN(t,e,n){if(e.search(BN)>=0)throw jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _o(...e.split("."))._internalPath}catch{throw jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jp(t,e,n,i,r){let a=i&&!i.isEmpty(),l=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new $(U.INVALID_ARGUMENT,c+t+h)}var To=class{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Mu=class extends To{data(){return super.data()}};function Wm(t,e){return typeof e=="string"?GN(t,e):e instanceof _o?e._internalPath:e._delegate._internalPath}var Cn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},An=class t extends To{constructor(e,n,i,r,a,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Sn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Wm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};An._jsonSchemaVersion="firestore/documentSnapshot/1.0",An._jsonSchema={type:le("string",An._jsonSchemaVersion),bundleSource:le("string","DocumentSnapshot"),bundleName:le("string"),bundle:le("string")};var Sn=class extends An{data(e={}){return super.data(e)}},Ri=class t{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Cn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Sn(this._firestore,this._userDataWriter,i.key,i,new Cn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{let h=new Sn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{let h=new Sn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),f=l.indexOf(c.doc.key)),{type:$N(c.type),doc:h,oldIndex:d,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function $N(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}Ri._jsonSchemaVersion="firestore/querySnapshot/1.0",Ri._jsonSchema={type:le("string",Ri._jsonSchemaVersion),bundleSource:le("string","QuerySnapshot"),bundleName:le("string"),bundle:le("string")};(function(e,n=!0){(function(r){qn=r})(Ge),ye(new ie("firestore",((i,{instanceIdentifier:r,options:a})=>{let l=i.getProvider("app").getImmediate(),c=new Du(new Tl(i.getProvider("auth-internal")),new vl(l,i.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(d.options.projectId,f)})(l,r),l);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),te(Sp,Rp,e),te(Sp,Rp,"esm2020")})();var Bu=class{constructor(e,n){this._delegate=e,this.firebase=n,yn(e,new ie("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),zr(this._delegate)))}_getService(e,n=Ye){this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ye){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){yn(this._delegate,e)}_addOrOverwriteComponent(e){Ba(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var HN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Km=new Ie("app-compat","Firebase",HN);function zN(t){let e={},n={__esModule:!0,initializeApp:a,app:r,registerVersion:te,setLogLevel:Ha,onLog:$a,apps:null,SDK_VERSION:Ge,INTERNAL:{registerComponent:c,removeApp:i,useAsService:h,modularAPIs:za}};n.default=n,Object.defineProperty(n,"apps",{get:l});function i(d){delete e[d]}function r(d){if(d=d||Ye,!Sa(e,d))throw Km.create("no-app",{appName:d});return e[d]}r.App=t;function a(d,f={}){let m=_n(d,f);if(Sa(e,m.name))return e[m.name];let y=new t(m,n);return e[m.name]=y,y}function l(){return Object.keys(e).map(d=>e[d])}function c(d){let f=d.name,m=f.replace("-compat","");if(ye(d)&&d.type==="PUBLIC"){let y=(w=r())=>{if(typeof w[m]!="function")throw Km.create("invalid-app-argument",{appName:f});return w[m]()};d.serviceProps!==void 0&&hi(y,d.serviceProps),n[m]=y,t.prototype[m]=function(...w){return this._getService.bind(this,f).apply(this,d.multipleInstances?w:[])}}return d.type==="PUBLIC"?n[m]:null}function h(d,f){return f==="serverAuth"?null:f}return n}function Ym(){let t=zN(Bu);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:Ym,extendNamespace:e,createSubscribe:qr,ErrorFactory:Ie,deepExtend:hi};function e(n){hi(t,n)}return t}var WN=Ym();var Jm=new Ue("@firebase/app-compat"),KN="@firebase/app-compat",JN="0.5.4";function YN(t){te(KN,JN,t)}try{let t=Vr();if(t.firebase!==void 0){Jm.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Jm.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var Gu=WN;YN();var QN="firebase",XN="12.4.0";Gu.registerVersion(QN,XN,"app-compat");var Qm="AIzaSyAyI2s5OQhC8UciKz148cmBvH04lPEfTqg";function mg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gg=mg,yg=new Ie("auth","Firebase",mg());var Ro=new Ue("@firebase/auth");function ZN(t,...e){Ro.logLevel<=W.WARN&&Ro.warn(`Auth (${Ge}): ${t}`,...e)}function vo(t,...e){Ro.logLevel<=W.ERROR&&Ro.error(`Auth (${Ge}): ${t}`,...e)}function He(t,...e){throw fc(t,...e)}function tt(t,...e){return fc(t,...e)}function _g(t,e,n){let i={...gg(),[e]:n};return new Ie("auth","Firebase",i).create(e,{appName:t.name})}function Ct(t){return _g(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fc(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return yg.create(t,...e)}function B(t,e,...n){if(!t)throw fc(e,...n)}function et(t){let e="INTERNAL ASSERTION FAILED: "+t;throw vo(e),new Error(e)}function ut(t,e){t||et(e)}function Ju(){return typeof self<"u"&&self.location?.href||""}function jN(){return Xm()==="http:"||Xm()==="https:"}function Xm(){return typeof self<"u"&&self.location?.protocol||null}function eD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jN()||Ur()||"connection"in navigator)?navigator.onLine:!0}function tD(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Jt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ut(n>e,"Short delay should be less than long delay!"),this.isMobile=vf()||Af()}get(){return eD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pc(t,e){ut(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Po=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rD=new Jt(3e4,6e4);function ce(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function we(t,e,n,i,r={}){return Tg(t,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});let c=hn({key:t.config.apiKey,...l}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);let d={method:e,headers:h,...a};return Cf()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Lt(t.emulatorConfig.host)&&(d.credentials="include"),Po.fetch()(await Ig(t,t.config.apiHost,n,c),d)})}async function Tg(t,e,n){t._canInitEmulator=!1;let i={...nD,...e};try{let r=new Yu(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();let l=await a.json();if("needConfirmation"in l)throw Ui(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{let c=a.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ui(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Ui(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Ui(t,"user-disabled",l);let f=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _g(t,f,d);He(t,f)}}catch(r){if(r instanceof fe)throw r;He(t,"network-request-failed",{message:String(r)})}}async function At(t,e,n,i,r={}){let a=await we(t,e,n,i,r);return"mfaPendingCredential"in a&&He(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Ig(t,e,n,i){let r=`${e}${n}?${i}`,a=t,l=a.config.emulator?pc(t.config,r):`${t.config.apiScheme}://${r}`;return iD.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function oD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Yu=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(tt(this.auth,"network-request-failed")),rD.get())})}};function Ui(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=tt(t,e,i);return r.customData._tokenResponse=n,r}function Zm(t){return t!==void 0&&t.enterprise!==void 0}var No=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Eg(t,e){return we(t,"GET","/v2/recaptchaConfig",ce(t,e))}async function sD(t,e){return we(t,"POST","/v1/accounts:delete",e)}async function Do(t,e){return we(t,"POST","/v1/accounts:lookup",e)}function Oi(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vg(t,e=!1){let n=Fe(t),i=await n.getIdToken(e),r=mc(i);B(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:Oi($u(r.auth_time)),issuedAtTime:Oi($u(r.iat)),expirationTime:Oi($u(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function $u(t){return Number(t)*1e3}function mc(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vo("JWT malformed, contained fewer than 3 sections"),null;try{let r=di(n);return r?JSON.parse(r):(vo("Failed to decode base64 JWT payload"),null)}catch(r){return vo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function jm(t){let e=mc(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gi(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof fe&&aD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Qu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var $i=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oi(this.lastLoginAt),this.creationTime=Oi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Mo(t){let e=t.auth,n=await t.getIdToken(),i=await Gi(t,Do(e,{idToken:n}));B(i?.users.length,e,"internal-error");let r=i.users[0];t._notifyReloadListener(r);let a=r.providerUserInfo?.length?Cg(r.providerUserInfo):[],l=lD(t.providerData,a),c=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!l?.length,d=c?h:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new $i(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function wg(t){let e=Fe(t);await Mo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Cg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function uD(t,e){let n=await Tg(t,{},async()=>{let i=hn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,l=await Ig(t,r,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let h={method:"POST",headers:c,body:i};return t.emulatorConfig&&Lt(t.emulatorConfig.host)&&(h.credentials="include"),Po.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cD(t,e){return we(t,"POST","/v2/accounts:revokeToken",ce(t,e))}var qi=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=jm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:i,refreshToken:r,expiresIn:a}=await uD(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:a}=n,l=new t;return i&&(B(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(B(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(B(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return et("not implemented")}};function vt(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var wt=class t{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Qu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new $i(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let n=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vg(this,e)}reload(){return wg(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Mo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ne(this.auth.app))return Promise.reject(Ct(this.auth));let e=await this.getIdToken();return await Gi(this,sD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let i=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,h=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:w,providerData:N,stsTokenManager:D}=n;B(m&&D,e,"internal-error");let M=qi.fromJSON(this.name,D);B(typeof m=="string",e,"internal-error"),vt(i,e.name),vt(r,e.name),B(typeof y=="boolean",e,"internal-error"),B(typeof w=="boolean",e,"internal-error"),vt(a,e.name),vt(l,e.name),vt(c,e.name),vt(h,e.name),vt(d,e.name),vt(f,e.name);let V=new t({uid:m,auth:e,email:r,emailVerified:y,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:M,createdAt:d,lastLoginAt:f});return N&&Array.isArray(N)&&(V.providerData=N.map(k=>({...k}))),h&&(V._redirectEventId=h),V}static async _fromIdTokenResponse(e,n,i=!1){let r=new qi;r.updateFromServerResponse(n);let a=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Mo(a),a}static async _fromGetAccountInfoResponse(e,n,i){let r=n.users[0];B(r.localId!==void 0,"internal-error");let a=r.providerUserInfo!==void 0?Cg(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,c=new qi;c.updateFromIdToken(i);let h=new t({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new $i(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(h,d),h}};var eg=new Map;function lt(t){ut(t instanceof Function,"Expected a class definition");let e=eg.get(t);return e?(ut(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eg.set(t,e),e)}var bo=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};bo.type="NONE";var Xu=bo;function wo(t,e,n){return`firebase:${t}:${e}:${n}`}var ko=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:a}=this.auth;this.fullUserKey=wo(this.userKey,r.apiKey,a),this.fullPersistenceKey=wo("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Do(this.auth,{idToken:e}).catch(()=>{});return n?wt._fromGetAccountInfoResponse(this.auth,n,e):null}return wt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new t(lt(Xu),e,i);let r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),a=r[0]||lt(Xu),l=wo(i,e.config.apiKey,e.name),c=null;for(let d of n)try{let f=await d._get(l);if(f){let m;if(typeof f=="string"){let y=await Do(e,{idToken:f}).catch(()=>{});if(!y)break;m=await wt._fromGetAccountInfoResponse(e,y,f)}else m=wt._fromJSON(e,f);d!==a&&(c=m),a=d;break}}catch{}let h=r.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new t(a,e,i):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new t(a,e,i))}};function tg(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ag(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dg(e))return"Blackberry";if(Mg(e))return"Webos";if(Sg(e))return"Safari";if((e.includes("chrome/")||Rg(e))&&!e.includes("edge/"))return"Chrome";if(Ng(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function Ag(t=pe()){return/firefox\//i.test(t)}function Sg(t=pe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rg(t=pe()){return/crios\//i.test(t)}function Pg(t=pe()){return/iemobile/i.test(t)}function Ng(t=pe()){return/android/i.test(t)}function Dg(t=pe()){return/blackberry/i.test(t)}function Mg(t=pe()){return/webos/i.test(t)}function gc(t=pe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dD(t=pe()){return gc(t)&&!!window.navigator?.standalone}function hD(){return Sf()&&document.documentMode===10}function bg(t=pe()){return gc(t)||Ng(t)||Mg(t)||Dg(t)||/windows phone/i.test(t)||Pg(t)}function kg(t,e=[]){let n;switch(t){case"Browser":n=tg(pe());break;case"Worker":n=`${tg(pe())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ge}/${i}`}var Zu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=a=>new Promise((l,c)=>{try{let h=e(a);l(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function fD(t,e={}){return we(t,"GET","/v2/passwordPolicy",ce(t,e))}var pD=6,ju=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}};var ec=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xo(this),this.idTokenSubscription=new xo(this),this.beforeStateQueue=new Zu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lt(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Do(this,{idToken:e}),i=await wt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ne(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mo(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ne(this.app))return Promise.reject(Ct(this));let n=e?Fe(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ne(this.app)?Promise.reject(Ct(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ne(this.app)?Promise.reject(Ct(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await fD(this),n=new ju(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ie("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cD(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&lt(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[lt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let a=typeof n=="function"?n:n.next.bind(n),l=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){let h=e.addObserver(n,i,r);return()=>{l=!0,h()}}else{let h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ne(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZN(`Error while retrieving App Check token: ${e.error}`),e?.token}};function St(t){return Fe(t)}var xo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qr(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mD(t){Zo=t}function xg(t){return Zo.loadJS(t)}function gD(){return Zo.recaptchaEnterpriseScript}function yD(){return Zo.gapiScript}function Vg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var tc=class{constructor(){this.enterprise=new nc}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},nc=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var _D="recaptcha-enterprise",Bi="NO_RECAPTCHA",Vo=class{constructor(e){this.type=_D,this.auth=St(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{Eg(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new No(h);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function r(a,l,c){let h=window.grecaptcha;Zm(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l(Bi)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tc().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&Zm(window.grecaptcha))r(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=gD();h.length!==0&&(h+=c),xg(h).then(()=>{r(c,a,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}};async function Fi(t,e,n,i=!1,r=!1){let a=new Vo(t),l;if(r)l=Bi;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}let c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Bn(t,e,n,i,r){if(r==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Fi(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=await Fi(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)});else if(r==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let a=await Fi(t,e,n);return i(t,a).catch(async l=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let c=await Fi(t,e,n,!1,!0);return i(t,c)}return Promise.reject(l)})}else{let a=await Fi(t,e,n,!1,!0);return i(t,a)}else return Promise.reject(r+" provider is not supported.")}async function TD(t){let e=St(t),n=await Eg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new No(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new Vo(e).verify()}function Lg(t,e){let n=Qe(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),a=n.getOptions();if(Ke(a,e??{}))return r;He(r,"already-initialized")}return n.initialize({options:e})}function ID(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(lt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function Fg(t,e,n){let i=St(t);B(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,a=Ug(e),{host:l,port:c}=ED(e),h=c===null?"":`:${c}`,d={url:`${a}//${l}${h}/`},f=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){B(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),B(Ke(d,i.config.emulator)&&Ke(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,Lt(l)?(wa(`${a}//${l}${h}`),Ca("Auth",!0)):r||vD()}function Ug(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ED(t){let e=Ug(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let a=r[1];return{host:a,port:ng(i.substr(a.length+1))}}else{let[a,l]=i.split(":");return{host:a,port:ng(l)}}}function ng(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function vD(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Yt=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return et("not implemented")}_getIdTokenResponse(e){return et("not implemented")}_linkToIdToken(e,n){return et("not implemented")}_getReauthenticationResolver(e){return et("not implemented")}};async function wD(t,e){return we(t,"POST","/v1/accounts:signUp",e)}async function CD(t,e){return At(t,"POST","/v1/accounts:signInWithPassword",ce(t,e))}async function AD(t,e){return At(t,"POST","/v1/accounts:signInWithEmailLink",ce(t,e))}async function SD(t,e){return At(t,"POST","/v1/accounts:signInWithEmailLink",ce(t,e))}var Hi=class t extends Yt{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new t(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bn(e,n,"signInWithPassword",CD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AD(e,{email:this._email,oobCode:this._password});default:He(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bn(e,i,"signUpPassword",wD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SD(e,{idToken:n,email:this._email,oobCode:this._password});default:He(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Gn(t,e){return At(t,"POST","/v1/accounts:signInWithIdp",ce(t,e))}var RD="http://localhost",Qt=class t extends Yt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):He("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=n;if(!i||!r)return null;let l=new t(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){let n=this.buildRequest();return Gn(e,n)}_linkToIdToken(e,n){let i=this.buildRequest();return i.idToken=n,Gn(e,i)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Gn(e,n)}buildRequest(){let e={requestUri:RD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hn(n)}return e}};async function ig(t,e){return we(t,"POST","/v1/accounts:sendVerificationCode",ce(t,e))}async function PD(t,e){return At(t,"POST","/v1/accounts:signInWithPhoneNumber",ce(t,e))}async function ND(t,e){let n=await At(t,"POST","/v1/accounts:signInWithPhoneNumber",ce(t,e));if(n.temporaryProof)throw Ui(t,"account-exists-with-different-credential",n);return n}var DD={USER_NOT_FOUND:"user-not-found"};async function MD(t,e){let n={...e,operation:"REAUTH"};return At(t,"POST","/v1/accounts:signInWithPhoneNumber",ce(t,n),DD)}var zi=class t extends Yt{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new t({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new t({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return PD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return ND(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return MD(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:a}=e;return!i&&!n&&!r&&!a?null:new t({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:a})}};function bD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kD(t){let e=fn(pn(t)).link,n=e?fn(pn(e)).deep_link_id:null,i=fn(pn(t)).deep_link_id;return(i?fn(pn(i)).link:null)||i||n||e||t}var Lo=class t{constructor(e){let n=fn(pn(e)),i=n.apiKey??null,r=n.oobCode??null,a=bD(n.mode??null);B(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){let n=kD(e);try{return new t(n)}catch{return null}}};var $n=class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(e,n){return Hi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){let i=Lo.parseLink(n);return B(i,"argument-error"),Hi._fromEmailAndCode(e,i.code,i.tenantId)}};$n.PROVIDER_ID="password";$n.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Fo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xt=class extends Fo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Wi=class t extends Xt{constructor(){super("facebook.com")}static credential(e){return Qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch{return null}}};Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";var Ki=class t extends Xt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return t.credential(n,i)}catch{return null}}};Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";var Ji=class t extends Xt{constructor(){super("github.com")}static credential(e){return Qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch{return null}}};Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";var Yi=class t extends Xt{constructor(){super("twitter.com")}static credential(e,n){return Qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return t.credential(n,i)}catch{return null}}};Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";async function xD(t,e){return At(t,"POST","/v1/accounts:signUp",ce(t,e))}var Hn=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){let a=await wt._fromIdTokenResponse(e,i,r),l=rg(i);return new t({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);let r=rg(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})}};function rg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ic=class t extends fe{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function Og(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(t,a,e,i):a})}async function VD(t,e,n=!1){let i=await Gi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hn._forOperation(t,"link",i)}async function LD(t,e,n=!1){let{auth:i}=t;if(Ne(i.app))return Promise.reject(Ct(i));let r="reauthenticate";try{let a=await Gi(t,Og(i,r,e,t),n);B(a.idToken,i,"internal-error");let l=mc(a.idToken);B(l,i,"internal-error");let{sub:c}=l;return B(t.uid===c,i,"user-mismatch"),Hn._forOperation(t,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&He(i,"user-mismatch"),a}}async function FD(t,e,n=!1){if(Ne(t.app))return Promise.reject(Ct(t));let i="signIn",r=await Og(t,i,e),a=await Hn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}async function UD(t){let e=St(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yc(t,e,n){if(Ne(t.app))return Promise.reject(Ct(t));let i=St(t),l=await Bn(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xD,"EMAIL_PASSWORD_PROVIDER").catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&UD(t),h}),c=await Hn._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function qg(t,e,n,i){return Fe(t).onIdTokenChanged(e,n,i)}function Bg(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function og(t,e){return we(t,"POST","/v2/accounts/mfaEnrollment:start",ce(t,e))}function OD(t,e){return we(t,"POST","/v2/accounts/mfaEnrollment:finalize",ce(t,e))}function qD(t,e){return we(t,"POST","/v2/accounts/mfaEnrollment:start",ce(t,e))}function BD(t,e){return we(t,"POST","/v2/accounts/mfaEnrollment:finalize",ce(t,e))}var Uo="__sak";var Oo=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uo,"1"),this.storage.removeItem(Uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var GD=1e3,$D=10,qo=class extends Oo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}let i=e.key;n?this.detachListener():this.stopPolling();let r=()=>{let l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);hD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,$D):r()}notifyListeners(e,n){this.localCache[e]=n;let i=this.listeners[e];if(i)for(let r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},GD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};qo.type="LOCAL";var Gg=qo;var HD=1e3;function Hu(t){let e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function zu(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}var rc=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;let n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;let n=zu(e);return window.cookieStore?(await window.cookieStore.get(n))?.value:Hu(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let i=zu(e);document.cookie=`${i}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;let i=zu(e);if(window.cookieStore){let c=(d=>{let f=d.changed.find(y=>y.name===i);f&&n(f.value),d.deleted.find(y=>y.name===i)&&n(null)}),h=()=>window.cookieStore.removeEventListener("change",c);return this.listenerUnsubscribes.set(n,h),window.cookieStore.addEventListener("change",c)}let r=Hu(i),a=setInterval(()=>{let c=Hu(i);c!==r&&(n(c),r=c)},HD),l=()=>clearInterval(a);this.listenerUnsubscribes.set(n,l)}_removeListener(e,n){let i=this.listenerUnsubscribes.get(n);i&&(i(),this.listenerUnsubscribes.delete(n))}};rc.type="COOKIE";var Bo=class extends Oo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};Bo.type="SESSION";var _c=Bo;function zD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var Go=class t{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;let i=new t(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:i,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});let c=Array.from(l).map(async d=>d(n.origin,a)),h=await zD(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Go.receivers=[];function Tc(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var oc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{let d=Tc("",20);r.port1.start();let f=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(m){let y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(f),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};function nt(){return window}function WD(t){nt().location.href=t}function $g(){return typeof nt().WorkerGlobalScope<"u"&&typeof nt().importScripts=="function"}async function KD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JD(){return navigator?.serviceWorker?.controller||null}function YD(){return $g()?self:null}var Hg="firebaseLocalStorageDb",QD=1,$o="firebaseLocalStorage",zg="fbase_key",Zt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function jo(t,e){return t.transaction([$o],e?"readwrite":"readonly").objectStore($o)}function XD(){let t=indexedDB.deleteDatabase(Hg);return new Zt(t).toPromise()}function sc(){let t=indexedDB.open(Hg,QD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore($o,{keyPath:zg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{let i=t.result;i.objectStoreNames.contains($o)?e(i):(i.close(),await XD(),e(await sc()))})})}async function sg(t,e,n){let i=jo(t,!0).put({[zg]:e,value:n});return new Zt(i).toPromise()}async function ZD(t,e){let n=jo(t,!1).get(e),i=await new Zt(n).toPromise();return i===void 0?null:i.value}function ag(t,e){let n=jo(t,!0).delete(e);return new Zt(n).toPromise()}var jD=800,eM=3,Ho=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sc(),this.db)}async _withRetries(e){let n=0;for(;;)try{let i=await this._openDb();return await e(i)}catch(i){if(n++>eM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $g()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Go._getInstance(YD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KD(),!this.activeServiceWorker)return;this.sender=new oc(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await sc();return await sg(e,Uo,"1"),await ag(e,Uo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(i=>ZD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ag(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(r=>{let a=jo(r,!1).getAll();return new Zt(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],i=new Set;if(e.length!==0)for(let{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(let r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;let i=this.listeners[e];if(i)for(let r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ho.type="LOCAL";var Wg=Ho;function lg(t,e){return we(t,"POST","/v2/accounts/mfaSignIn:start",ce(t,e))}function tM(t,e){return we(t,"POST","/v2/accounts/mfaSignIn:finalize",ce(t,e))}function nM(t,e){return we(t,"POST","/v2/accounts/mfaSignIn:finalize",ce(t,e))}var Ik=Vg("rcb"),Ek=new Jt(3e4,6e4);var Co="recaptcha";async function iM(t,e,n){if(!t._getRecaptchaConfig())try{await TD(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){let r=i.session;if("phoneNumber"in i){B(r.type==="enroll",t,"internal-error");let a={idToken:r.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Bn(t,a,"mfaSmsEnrollment",async(d,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Bi){B(n?.type===Co,d,"argument-error");let m=await Wu(d,f,n);return og(d,m)}return og(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{B(r.type==="signin",t,"internal-error");let a=i.multiFactorHint?.uid||i.multiFactorUid;B(a,t,"missing-multi-factor-info");let l={mfaPendingCredential:r.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Bn(t,l,"mfaSmsSignIn",async(f,m)=>{if(m.phoneSignInInfo.captchaResponse===Bi){B(n?.type===Co,f,"argument-error");let y=await Wu(f,m,n);return lg(f,y)}return lg(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{let r={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Bn(t,r,"sendVerificationCode",async(h,d)=>{if(d.captchaResponse===Bi){B(n?.type===Co,h,"argument-error");let f=await Wu(h,d,n);return ig(h,f)}return ig(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{n?._reset()}}async function Wu(t,e,n){B(n.type===Co,t,"argument-error");let i=await n.verify();B(typeof i=="string",t,"argument-error");let r={...e};if("phoneEnrollmentInfo"in r){let a=r.phoneEnrollmentInfo.phoneNumber,l=r.phoneEnrollmentInfo.captchaResponse,c=r.phoneEnrollmentInfo.clientType,h=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:l,clientType:c,recaptchaVersion:h}}),r}else if("phoneSignInInfo"in r){let a=r.phoneSignInInfo.captchaResponse,l=r.phoneSignInInfo.clientType,c=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:l,recaptchaVersion:c}}),r}else return Object.assign(r,{recaptchaToken:i}),r}var Qi=class t{constructor(e){this.providerId=t.PROVIDER_ID,this.auth=St(e)}verifyPhoneNumber(e,n){return iM(this.auth,e,Fe(n))}static credential(e,n){return zi._fromVerification(e,n)}static credentialFromResult(e){let n=e;return t.credentialFromTaggedObject(n)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:n,temporaryProof:i}=e;return n&&i?zi._fromTokenResponse(n,i):null}};Qi.PROVIDER_ID="phone";Qi.PHONE_SIGN_IN_METHOD="phone";function rM(t,e){return e?lt(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Xi=class extends Yt{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function oM(t){return FD(t.auth,new Xi(t),t.bypassAuthState)}function sM(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),LD(n,new Xi(t),t.bypassAuthState)}async function aM(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),VD(n,new Xi(t),t.bypassAuthState)}var zo=class{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}let h={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oM;case"linkViaPopup":case"linkViaRedirect":return aM;case"reauthViaPopup":case"reauthViaRedirect":return sM;default:He(this.auth,"internal-error")}}resolve(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lM=new Jt(2e3,1e4);var ac=class t extends zo{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){ut(this.filter.length===1,"Popup operations only handle one event");let e=Tc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lM.get())};e()}};ac.currentPopupAction=null;var uM="pendingRedirect",Ao=new Map,lc=class extends zo{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ao.get(this.auth._key());if(!e){try{let i=await cM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ao.set(this.auth._key(),e)}return this.bypassAuthState||Ao.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function cM(t,e){let n=fM(e),i=hM(t);if(!await i._isAvailable())return!1;let r=await i._get(n)==="true";return await i._remove(n),r}function dM(t,e){Ao.set(t._key(),e)}function hM(t){return lt(t._redirectPersistence)}function fM(t){return wo(uM,t.config.apiKey,t.name)}async function pM(t,e,n=!1){if(Ne(t.app))return Promise.reject(Ct(t));let i=St(t),r=rM(i,e),l=await new lc(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}var mM=600*1e3,uc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Kg(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(tt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mM&&this.cachedEventUids.clear(),this.cachedEventUids.has(ug(e))}saveEventToCache(e){this.cachedEventUids.add(ug(e)),this.lastProcessedEventTime=Date.now()}};function ug(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kg(t);default:return!1}}async function yM(t,e={}){return we(t,"GET","/v1/projects",e)}var _M=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TM=/^https?/;async function IM(t){if(t.config.emulator)return;let{authorizedDomains:e}=await yM(t);for(let n of e)try{if(EM(n))return}catch{}He(t,"unauthorized-domain")}function EM(t){let e=Ju(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!TM.test(n))return!1;if(_M.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var vM=new Jt(3e4,6e4);function cg(){let t=nt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wM(t){return new Promise((e,n)=>{function i(){cg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cg(),n(tt(t,"network-request-failed"))},timeout:vM.get()})}if(nt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(nt().gapi?.load)i();else{let r=Vg("iframefcb");return nt()[r]=()=>{gapi.load?i():n(tt(t,"network-request-failed"))},xg(`${yD()}?onload=${r}`).catch(a=>n(a))}}).catch(e=>{throw So=null,e})}var So=null;function CM(t){return So=So||wM(t),So}var AM=new Jt(5e3,15e3),SM="__/auth/iframe",RM="emulator/auth/iframe",PM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DM(t){let e=t.config;B(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?pc(e,RM):`https://${t.config.authDomain}/${SM}`,i={apiKey:e.apiKey,appName:t.name,v:Ge},r=NM.get(t.config.apiHost);r&&(i.eid=r);let a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${hn(i).slice(1)}`}async function MM(t){let e=await CM(t),n=nt().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:DM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PM,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});let l=tt(t,"network-request-failed"),c=nt().setTimeout(()=>{a(l)},AM.get());function h(){nt().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{a(l)})}))}var bM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kM=500,xM=600,VM="_blank",LM="http://localhost",Wo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function FM(t,e,n,i=kM,r=xM){let a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",h={...bM,width:i.toString(),height:r.toString(),top:a,left:l},d=pe().toLowerCase();n&&(c=Rg(d)?VM:n),Ag(d)&&(e=e||LM,h.scrollbars="yes");let f=Object.entries(h).reduce((y,[w,N])=>`${y}${w}=${N},`,"");if(dD(d)&&c!=="_self")return UM(e||"",c),new Wo(null);let m=window.open(e||"",c,f);B(m,t,"popup-blocked");try{m.focus()}catch{}return new Wo(m)}function UM(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var OM="__/auth/handler",qM="emulator/auth/handler",BM=encodeURIComponent("fac");async function dg(t,e,n,i,r,a){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");let l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ge,eventId:r};if(e instanceof Fo){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Nf(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(a||{}))l[f]=m}if(e instanceof Xt){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);let c=l;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let h=await t._getAppCheckToken(),d=h?`#${BM}=${encodeURIComponent(h)}`:"";return`${GM(t)}?${hn(c).slice(1)}${d}`}function GM({config:t}){return t.emulator?pc(t,qM):`https://${t.authDomain}/${OM}`}var Ku="webStorageSupport",cc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_c,this._completeRedirectFn=pM,this._overrideRedirectResult=dM}async _openPopup(e,n,i,r){ut(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let a=await dg(e,n,i,Ju(),r);return FM(e,a,Tc())}async _openRedirect(e,n,i,r){await this._originValidation(e);let a=await dg(e,n,i,Ju(),r);return WD(a),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(ut(a,"If manager is not set, promise should be"),a)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){let n=await MM(e),i=new uc(e);return n.register("authEvent",r=>(B(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ku,{type:Ku},r=>{let a=r?.[0]?.[Ku];a!==void 0&&n(!!a),He(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bg()||Sg()||gc()}},Jg=cc,Ko=class{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return et("unexpected MultiFactorSessionType")}}},dc=class t extends Ko{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new t(e)}_finalizeEnroll(e,n,i){return OD(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return tM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Jo=class{constructor(){}static assertion(e){return dc._fromCredential(e)}};Jo.FACTOR_ID="phone";var Yo=class{static assertionForEnrollment(e,n){return Qo._fromSecret(e,n)}static assertionForSignIn(e,n){return Qo._fromEnrollmentId(e,n)}static async generateSecret(e){let n=e;B(typeof n.user?.auth<"u","internal-error");let i=await qD(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Xo._fromStartTotpMfaEnrollmentResponse(i,n.user.auth)}};Yo.FACTOR_ID="totp";var Qo=class t extends Ko{constructor(e,n,i){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=i}static _fromSecret(e,n){return new t(n,void 0,e)}static _fromEnrollmentId(e,n){return new t(n,e)}async _finalizeEnroll(e,n,i){return B(typeof this.secret<"u",e,"argument-error"),BD(e,{idToken:n,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){B(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let i={verificationCode:this.otp};return nM(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i})}},Xo=class t{constructor(e,n,i,r,a,l,c){this.sessionInfo=l,this.auth=c,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=i,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,n){return new t(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){let i=!1;return(Eo(e)||Eo(n))&&(i=!0),i&&(Eo(e)&&(e=this.auth.currentUser?.email||"unknownuser"),Eo(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Eo(t){return typeof t>"u"||t?.length===0}var hg="@firebase/auth",fg="1.11.0";var hc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $M(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HM(t){ye(new ie("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;B(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});let h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kg(t)},d=new ec(i,r,a,h);return ID(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ye(new ie("auth-internal",e=>{let n=St(e.getProvider("auth").getImmediate());return(i=>new hc(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),te(hg,fg,$M(t)),te(hg,fg,"esm2020")}var zM=300,WM=va("authIdTokenMaxAge")||zM,pg=null,KM=t=>async e=>{let n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>WM)return;let r=n?.token;pg!==r&&(pg=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Ic(t=Tn()){let e=Qe(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Lg(t,{popupRedirectResolver:Jg,persistence:[Wg,Gg,_c]}),i=va("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let a=new URL(i,location.origin);if(location.origin===a.origin){let l=KM(a.toString());Bg(n,l,()=>l(n.currentUser)),qg(n,c=>l(c))}}let r=Ef("auth");return r&&Fg(n,`http://${r}`),n}function JM(){return document.getElementsByTagName("head")?.[0]??document}mD({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let a=tt("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",JM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HM("Browser");console.log(al);var YM=async t=>{let e=Ic(al);try{let n=await yc(e,t.userEmail,t.userPassword);return console.log(n.user),{success:!0,user:n.user}}catch(n){let i=n.code,r=n.message;return console.log(i,r),{sucess:!1,error:n.code||n.message}}};async function QM(t){if("Proofreader"in self){console.log("Yeah we have proofReader");let e={expectedInputLanguages:["en"],monitor(l){l.addEventListener("downloadprogress",c=>{console.log(`Downloaded ${c.loaded*100} % `)})}},n=await Proofreader.availability();if(console.log(n),n==="unavailable"){console.log("Proofreader is unavailable");return}let r=await(await Proofreader.create(e)).proofread(t),{correctedInput:a}=r;return a}}async function XM(t){"Summarizer"in self&&console.log("Yeah it is installed");let e={sharedContext:"Make well written informative notes",type:"key-points",format:"markdown",length:"long",monitor(a){a.addEventListener("downloadprogress",l=>{console.log(`Downloaded ${l.loaded*100} % `)})}};if(await Summarizer.availability()==="unavailable"){console.log("Not downloaded");return}let r=await(await Summarizer.create(e)).summarize(t,{context:"This article should be intended to well infomative about the user interest."});return console.log("summry will be: ",r),r}async function ZM(t){"Writer"in self&&console.log("Yeah dude it is working");let e={sharedContext:"Write a well detailed information about the topics",expectedInputLanguages:["en","ja","es"],expectedContextLanguages:["en","ja","es"],outputLanguage:"en",tone:"casual",format:"markdown",length:"medium",monitor(a){a.addEventListener("downloadprogress",l=>{console.log(`Downloaded ${l.loaded*100}%`)})}};if(await Writer.availability()==="unavailable")return;let r=await(await Writer.create(e)).write(t,{context:"Give response with well meaning and deep in context"});return console.log("Response via writer api: ",r),r}var jM=Qm;async function eb(t){try{let i=(await new Mr({apiKey:jM}).models.generateContent({model:"gemini-2.5-flash",contents:[{inlineData:{mimeType:"image/png",data:t.base64Data}},{text:`Extract and summarize key information from this screenshot as concise bullet-point notes for a notes-taking app. Focus on main elements like text, code, structure, and actions. Output only in bullet points, starting each with.Make proper study material notes so that user could understand what's going on the image.

Example input: Screenshot of a code editor with a function called "helloWorld".
Example output:
- Function name: helloWorld
- Purpose: Prints a greeting
- Language: JavaScript

Now, extract notes from this screenshot:`}],config:{thinkingConfig:{thinkingBudget:1024}}})).text;console.log("Here is respo txt: ",i);let r=await QM(i),a=await XM(r),l=await ZM(a);if(console.log(l),t.synced===!0){console.log("we wiil add it to firebase cloud");let c={output:l,typeOf:t.data_type};await SetData(c)}}catch(e){console.error("AI Error:",e.message)}}chrome.runtime.onMessage.addListener(async(t,e,n)=>{if(t.action==="signUp"){let i=t.userEmail,r=t.userPassword;try{let a=await YM({userEmail:i,userPassword:r});console.log(a)}catch(a){console.log(a)}}if(t.action==="captureScreen"){console.log("Updataed message that we getting: ",t),console.log("Message received");let i=t.data.split(",")[1];console.log("Base64 snippet:",i.substring(0,50)+"...");let r={base64Data:i,data_type:t.type,synced:t.synced};eb(r)}return!0});
/*! Bundled license information:

@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/analytics/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
firebase/compat/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/analytics/dist/esm/index.esm.js:
@firebase/app-compat/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.esm.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-9ccb475d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
