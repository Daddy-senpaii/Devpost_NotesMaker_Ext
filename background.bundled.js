var Fm=Object.defineProperty;var Lm=(t,e)=>{for(var n in e)Fm(t,n,{get:e[n],enumerable:!0})};var Um,qm;function Bm(){return{geminiUrl:Um,vertexUrl:qm}}function Om(t,e,n,i){var o,a;if(!t?.baseUrl){let l=Bm();return e?(o=l.vertexUrl)!==null&&o!==void 0?o:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}var Je=class{};function U(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function s(t,e,n){for(let a=0;a<e.length-1;a++){let l=e[a];if(l.endsWith("[]")){let c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){let f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){let h=f[d];s(h,e.slice(a+1),n[d])}else for(let d of f)s(d,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){let c=l.slice(0,-3);c in t||(t[c]=[{}]);let f=t[c];s(f[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}let i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;let i=e[n];if(i.endsWith("[]")){let o=i.slice(0,-2);if(o in t){let a=t[o];return Array.isArray(a)?a.map(l=>r(l,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}function gs(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Gm(t){let e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function $m(t){let e={},n=r(t,["operationName"]);n!=null&&s(e,["operationName"],n);let i=r(t,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);let o=r(t,["config"]);return o!=null&&s(e,["config"],o),e}function Hm(t){let e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function zm(t){let e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);let i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],gs(i));let o=r(t,["encoding"]);return o!=null&&s(e,["mimeType"],o),e}function Km(t){let e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],zm(n)),e}function Jm(t){let e={},n=r(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Km(l))),s(e,["generatedVideos"],a)}let i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function Wm(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);a!=null&&s(e,["error"],a);let l=r(t,["response","generateVideoResponse"]);return l!=null&&s(e,["response"],Jm(l)),e}function Qm(t){let e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);let i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],gs(i));let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ym(t){let e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],Qm(n)),e}function Xm(t){let e={},n=r(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ym(l))),s(e,["generatedVideos"],a)}let i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function Zm(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);a!=null&&s(e,["error"],a);let l=r(t,["response"]);return l!=null&&s(e,["response"],Xm(l)),e}var sc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sc||(sc={}));var ac;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ac||(ac={}));var at;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(at||(at={}));var lc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(lc||(lc={}));var uc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(uc||(uc={}));var cc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(cc||(cc={}));var dc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dc||(dc={}));var fc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fc||(fc={}));var hc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hc||(hc={}));var pc;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(pc||(pc={}));var mc;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mc||(mc={}));var gc;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gc||(gc={}));var yc;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yc||(yc={}));var _c;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(_c||(_c={}));var Tc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tc||(Tc={}));var Ji;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ji||(Ji={}));var vc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vc||(vc={}));var Dr;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dr||(Dr={}));var Ec;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ec||(Ec={}));var Ic;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ic||(Ic={}));var Cc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Cc||(Cc={}));var wc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(wc||(wc={}));var Ac;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ac||(Ac={}));var Sc;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sc||(Sc={}));var Rc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Rc||(Rc={}));var Pc;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Pc||(Pc={}));var xc;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xc||(xc={}));var Mc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Mc||(Mc={}));var Dc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dc||(Dc={}));var Nc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Nc||(Nc={}));var Vc;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Vc||(Vc={}));var bc;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bc||(bc={}));var kc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(kc||(kc={}));var Fc;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Fc||(Fc={}));var Lc;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Lc||(Lc={}));var Uc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Uc||(Uc={}));var qc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qc||(qc={}));var Bc;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Bc||(Bc={}));var Oc;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Oc||(Oc={}));var Gc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Gc||(Gc={}));var $c;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})($c||($c={}));var Hc;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hc||(Hc={}));var zc;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zc||(zc={}));var Kc;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kc||(Kc={}));var Jc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Jc||(Jc={}));var Wc;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Wc||(Wc={}));var Qc;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Qc||(Qc={}));var Jt;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Jt||(Jt={}));var Jn=class{constructor(e){let n={};for(let i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var vt=class{get text(){var e,n,i,o,a,l,c,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1,m=[];for(let y of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(let[I,P]of Object.entries(y))I!=="text"&&I!=="thought"&&(P!==null||P!==void 0)&&m.push(I);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;h=!0,d+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,i,o,a,l,c,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",h=[];for(let m of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(let[y,I]of Object.entries(m))y!=="inlineData"&&(I!==null||I!==void 0)&&h.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,o,a,l,c,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,o,a,l,c,f,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let h=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,o,a,l,c,f,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let h=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.output}},Wi=class{},Qi=class{},Nr=class{},Vr=class{},br=class{},kr=class{},Yi=class{},Xi=class{},Zi=class{},Fr=class{};var ji=class t{_fromAPIResponse({apiResponse:e,isVertexAI:n}){let i=new t,o,a=e;return n?o=Zm(a):o=Wm(a),Object.assign(i,o),i}},eo=class{},to=class{},no=class{},Lr=class{},Ur=class{},qr=class{};var io=class{};var Br=class{get text(){var e,n,i;let o="",a=!1,l=[];for(let c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,o+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="",a=[];for(let l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var Or=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};function Q(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _d(t,e){let n=Q(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Td(t){return Array.isArray(t)?t.map(e=>oo(e)):[oo(t)]}function oo(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vd(t){let e=oo(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ed(t){let e=oo(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Id(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Yc(e)):[Yc(t)]}function Gr(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Xc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Zc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Te(t){if(t==null)throw new Error("ContentUnion is required");return Gr(t)?t:{role:"user",parts:Id(t)}}function ys(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let i=Te(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){let n=Te(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Te(n)):[Te(e)]}function Ve(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Xc(t)||Zc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Te(t)]}let e=[],n=[],i=Gr(t[0]);for(let o of t){let a=Gr(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Xc(o)||Zc(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:Id(n)}),e}function jm(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(at).includes(n[0].toUpperCase())?n[0].toUpperCase():at.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of n)e.anyOf.push({type:Object.values(at).includes(i.toUpperCase())?i.toUpperCase():at.TYPE_UNSPECIFIED})}}function Wt(t){let e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&jm(t.type,e);for(let[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(at).includes(c.toUpperCase())?c.toUpperCase():at.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Wt(c);else if(i.includes(l)){let f=[];for(let d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(Wt(d))}e[l]=f}else if(o.includes(l)){let f={};for(let[d,h]of Object.entries(c))f[d]=Wt(h);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function _s(t){return Wt(t)}function Ts(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function vs(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xt(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wt(e.response));return t}function Zt(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function eg(t,e,n,i=1){let o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function We(t,e){if(typeof e!="string")throw new Error("name must be a string");return eg(t,e,"cachedContents")}function Cd(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ct(t){return gs(t)}function tg(t){return t!=null&&typeof t=="object"&&"name"in t}function ng(t){return t!=null&&typeof t=="object"&&"video"in t}function ig(t){return t!=null&&typeof t=="object"&&"uri"in t}function wd(t){var e;let n;if(tg(t)&&(n=t.name),!(ig(t)&&(n=t.uri,n===void 0))&&!(ng(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ad(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Sd(t){for(let e of["models","tunedModels","publisherModels"])if(og(t,e))return t[e];return[]}function og(t,e){return t!==null&&typeof t=="object"&&e in t}function rg(t,e={}){let n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function sg(t,e={}){let n=[],i=new Set;for(let o of t){let a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);let l=rg(o,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Rd(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ag(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Pd(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(let l of o){if(typeof l!="object"||l===null)continue;let f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function jt(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xd(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}function lg(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function ug(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function cg(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function dg(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function fg(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],lg(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],ug(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],cg(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],dg(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Md(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>fg(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function hg(t){let e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=r(t,["default"]);i!=null&&s(e,["default"],i);let o=r(t,["description"]);o!=null&&s(e,["description"],o);let a=r(t,["enum"]);a!=null&&s(e,["enum"],a);let l=r(t,["example"]);l!=null&&s(e,["example"],l);let c=r(t,["format"]);c!=null&&s(e,["format"],c);let f=r(t,["items"]);f!=null&&s(e,["items"],f);let d=r(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let h=r(t,["maxLength"]);h!=null&&s(e,["maxLength"],h);let m=r(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=r(t,["maximum"]);y!=null&&s(e,["maximum"],y);let I=r(t,["minItems"]);I!=null&&s(e,["minItems"],I);let P=r(t,["minLength"]);P!=null&&s(e,["minLength"],P);let M=r(t,["minProperties"]);M!=null&&s(e,["minProperties"],M);let D=r(t,["minimum"]);D!=null&&s(e,["minimum"],D);let F=r(t,["nullable"]);F!=null&&s(e,["nullable"],F);let b=r(t,["pattern"]);b!=null&&s(e,["pattern"],b);let k=r(t,["properties"]);k!=null&&s(e,["properties"],k);let O=r(t,["propertyOrdering"]);O!=null&&s(e,["propertyOrdering"],O);let q=r(t,["required"]);q!=null&&s(e,["required"],q);let $=r(t,["title"]);$!=null&&s(e,["title"],$);let w=r(t,["type"]);return w!=null&&s(e,["type"],w),e}function pg(t){let e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=r(t,["category"]);n!=null&&s(e,["category"],n);let i=r(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function mg(t){let e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=r(t,["description"]);i!=null&&s(e,["description"],i);let o=r(t,["name"]);o!=null&&s(e,["name"],o);let a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=r(t,["response"]);c!=null&&s(e,["response"],c);let f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function gg(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function yg(t){let e={},n=r(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],gg(n)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _g(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Tg(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],_g(n)),e}function vg(){return{}}function Eg(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function Ig(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>mg(d))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],yg(i));let o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Tg(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],vg());let l=r(t,["computerUse"]);l!=null&&s(e,["computerUse"],Eg(l));let c=r(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Cg(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function wg(t){let e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Ag(t){let e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],wg(n));let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Sg(t){let e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Cg(n));let i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Ag(i)),e}function Rg(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Dd(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Rg(n)),e}function Pg(t){let e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Dd(i)),e}function xg(t){let e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pg(o))),s(e,["speakerVoiceConfigs"],i)}return e}function Mg(t){let e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Dd(n));let i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],xg(i));let o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Dg(t){let e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Ng(t,e,n){let i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],Md(Te(o)));let a=r(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=r(e,["topP"]);l!=null&&s(i,["topP"],l);let c=r(e,["topK"]);c!=null&&s(i,["topK"],c);let f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);let d=r(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let h=r(e,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);let m=r(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=r(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let I=r(e,["presencePenalty"]);I!=null&&s(i,["presencePenalty"],I);let P=r(e,["frequencyPenalty"]);P!=null&&s(i,["frequencyPenalty"],P);let M=r(e,["seed"]);M!=null&&s(i,["seed"],M);let D=r(e,["responseMimeType"]);D!=null&&s(i,["responseMimeType"],D);let F=r(e,["responseSchema"]);F!=null&&s(i,["responseSchema"],hg(_s(F)));let b=r(e,["responseJsonSchema"]);if(b!=null&&s(i,["responseJsonSchema"],b),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let k=r(e,["safetySettings"]);if(n!==void 0&&k!=null){let C=k;Array.isArray(C)&&(C=C.map(S=>pg(S))),s(n,["safetySettings"],C)}let O=r(e,["tools"]);if(n!==void 0&&O!=null){let C=Zt(O);Array.isArray(C)&&(C=C.map(S=>Ig(Xt(S)))),s(n,["tools"],C)}let q=r(e,["toolConfig"]);if(n!==void 0&&q!=null&&s(n,["toolConfig"],Sg(q)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let $=r(e,["cachedContent"]);n!==void 0&&$!=null&&s(n,["cachedContent"],We(t,$));let w=r(e,["responseModalities"]);w!=null&&s(i,["responseModalities"],w);let v=r(e,["mediaResolution"]);v!=null&&s(i,["mediaResolution"],v);let T=r(e,["speechConfig"]);if(T!=null&&s(i,["speechConfig"],Mg(Ts(T))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let A=r(e,["thinkingConfig"]);return A!=null&&s(i,["thinkingConfig"],Dg(A)),i}function Vg(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["request","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>Md(c))),s(n,["request","contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["request","generationConfig"],Ng(t,a,n)),n}function bg(t,e){let n={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=r(e,["fileName"]);i!=null&&s(n,["fileName"],i);let o=r(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Vg(t,l))),s(n,["requests","requests"],a)}return n}function kg(t,e){let n={},i=r(t,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Pr(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["src"]);o!=null&&s(n,["batch","inputConfig"],bg(t,Rd(t,o)));let a=r(e,["config"]);return a!=null&&s(n,["config"],kg(a,n)),n}function Fg(t,e){let n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);let o=r(t,["title"]);e!==void 0&&o!=null&&s(e,["requests[]","title"],o);let a=r(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&s(e,["requests[]","outputDimensionality"],a),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Lg(t,e){let n={},i=r(e,["contents"]);i!=null&&s(n,["requests[]","request","content"],ys(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],Fg(o,n)),n}function Ug(t,e){let n={},i=r(e,["fileName"]);i!=null&&s(n,["file_name"],i);let o=r(e,["inlinedRequests"]);return o!=null&&s(n,["requests"],Lg(t,o)),n}function qg(t,e){let n={},i=r(t,["displayName"]);return e!==void 0&&i!=null&&s(e,["batch","displayName"],i),n}function xr(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["src"]);o!=null&&s(n,["batch","inputConfig"],Ug(t,o));let a=r(e,["config"]);return a!=null&&s(n,["config"],qg(a,n)),n}function Bg(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Og(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Gg(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);if(e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $g(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Gg(n,e)),e}function Hg(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function zg(t){let e={},n=r(t,["format"]);n!=null&&s(e,["instancesFormat"],n);let i=r(t,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);let o=r(t,["bigqueryUri"]);if(o!=null&&s(e,["bigquerySource","inputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Kg(t){let e={},n=r(t,["format"]);n!=null&&s(e,["predictionsFormat"],n);let i=r(t,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);let o=r(t,["bigqueryUri"]);if(o!=null&&s(e,["bigqueryDestination","outputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jg(t,e){let n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let o=r(t,["dest"]);return e!==void 0&&o!=null&&s(e,["outputConfig"],Kg(ag(o))),n}function Wg(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["model"],Q(t,i));let o=r(e,["src"]);o!=null&&s(n,["inputConfig"],zg(Rd(t,o)));let a=r(e,["config"]);return a!=null&&s(n,["config"],Jg(a,n)),n}function Qg(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Yg(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Xg(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);let a=r(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function Zg(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Xg(n,e)),e}function jg(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],jt(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function ey(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function ty(t){let e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ny(t){let e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function iy(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function oy(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ey(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],ty(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],ny(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],iy(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function ry(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>oy(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function sy(t){let e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function ay(t){let e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function ly(t){let e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ay(o))),s(e,["urlMetadata"],i)}return e}function uy(t){let e={},n=r(t,["content"]);n!=null&&s(e,["content"],ry(n));let i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],sy(i));let o=r(t,["tokenCount"]);o!=null&&s(e,["tokenCount"],o);let a=r(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=r(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],ly(l));let c=r(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);let d=r(t,["index"]);d!=null&&s(e,["index"],d);let h=r(t,["logprobsResult"]);h!=null&&s(e,["logprobsResult"],h);let m=r(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function cy(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>uy(d))),s(e,["candidates"],f)}let o=r(t,["modelVersion"]);o!=null&&s(e,["modelVersion"],o);let a=r(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);let l=r(t,["responseId"]);l!=null&&s(e,["responseId"],l);let c=r(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Es(t){let e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);let i=r(t,["code"]);i!=null&&s(e,["code"],i);let o=r(t,["message"]);return o!=null&&s(e,["message"],o),e}function dy(t){let e={},n=r(t,["response"]);n!=null&&s(e,["response"],cy(n));let i=r(t,["error"]);return i!=null&&s(e,["error"],Es(i)),e}function fy(t){let e={},n=r(t,["values"]);return n!=null&&s(e,["values"],n),e}function hy(t){let e={},n=r(t,["embedding"]);n!=null&&s(e,["embedding"],fy(n));let i=r(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function py(t){let e={},n=r(t,["response"]);n!=null&&s(e,["response"],hy(n));let i=r(t,["error"]);return i!=null&&s(e,["error"],Es(i)),e}function my(t){let e={},n=r(t,["responsesFile"]);n!=null&&s(e,["fileName"],n);let i=r(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>dy(l))),s(e,["inlinedResponses"],a)}let o=r(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>py(l))),s(e,["inlinedEmbedContentResponses"],a)}return e}function Kt(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["metadata","state"]);o!=null&&s(e,["state"],xd(o));let a=r(t,["metadata","createTime"]);a!=null&&s(e,["createTime"],a);let l=r(t,["metadata","endTime"]);l!=null&&s(e,["endTime"],l);let c=r(t,["metadata","updateTime"]);c!=null&&s(e,["updateTime"],c);let f=r(t,["metadata","model"]);f!=null&&s(e,["model"],f);let d=r(t,["metadata","output"]);return d!=null&&s(e,["dest"],my(Pd(d))),e}function gy(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Kt(l))),s(e,["batchJobs"],a)}return e}function yy(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);return a!=null&&s(e,["error"],Es(a)),e}function Nd(t){let e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);let i=r(t,["code"]);i!=null&&s(e,["code"],i);let o=r(t,["message"]);return o!=null&&s(e,["message"],o),e}function _y(t){let e={},n=r(t,["instancesFormat"]);n!=null&&s(e,["format"],n);let i=r(t,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);let o=r(t,["bigquerySource","inputUri"]);return o!=null&&s(e,["bigqueryUri"],o),e}function Ty(t){let e={},n=r(t,["predictionsFormat"]);n!=null&&s(e,["format"],n);let i=r(t,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);let o=r(t,["bigqueryDestination","outputUri"]);return o!=null&&s(e,["bigqueryUri"],o),e}function $r(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["state"]);o!=null&&s(e,["state"],xd(o));let a=r(t,["error"]);a!=null&&s(e,["error"],Nd(a));let l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=r(t,["startTime"]);c!=null&&s(e,["startTime"],c);let f=r(t,["endTime"]);f!=null&&s(e,["endTime"],f);let d=r(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);let h=r(t,["model"]);h!=null&&s(e,["model"],h);let m=r(t,["inputConfig"]);m!=null&&s(e,["src"],_y(m));let y=r(t,["outputConfig"]);return y!=null&&s(e,["dest"],Ty(Pd(y))),e}function vy(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>$r(l))),s(e,["batchJobs"],a)}return e}function Ey(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);return a!=null&&s(e,["error"],Nd(a)),e}var Et;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Et||(Et={}));var It=class{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Hr=class extends Je{constructor(e){super(),this.apiClient=e,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);let a=n.src;if(!(Array.isArray(n.src)||a.inlinedRequests!==void 0))return this.createInternal(n);let c=this.createInlinedGenerateContentRequest(n),f=c.path,d=c.body,h=Pr(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()).then(y=>Kt(y))},this.createEmbeddings=async n=>{var i,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);let c=this.createInlinedEmbedContentRequest(n),f=c.path,d=c.body,h=xr(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()).then(y=>Kt(y))},this.list=async(n={})=>new It(Et.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){let n=Pr(this.apiClient,e),i=n._url,o=U("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(let h of f){let m=Object.assign({},h);if(m.systemInstruction){let y=m.systemInstruction;delete m.systemInstruction;let I=m.request;I.systemInstruction=y,m.request=I}d.push(m)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}createInlinedEmbedContentRequest(e){let n=xr(this.apiClient,e),i=n._url,o=U("{model}:asyncBatchEmbedContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];delete c.config;for(let h of f){let m=Object.assign({},h),y=m.request;for(let I in m)I!=="request"&&(y[I]=m[I],delete m[I]);d.push(m)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(l)i.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=Wg(this.apiClient,e);return c=U("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>$r(h))}else{let d=Pr(this.apiClient,e);return c=U("{model}:batchGenerateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>Kt(h))}}async createEmbeddingsInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=xr(this.apiClient,e);return a=U("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Kt(f))}}async get(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=Qg(this.apiClient,e);return c=U("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>$r(h))}else{let d=Bg(this.apiClient,e);return c=U("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>Kt(h))}}async cancel(e){var n,i,o,a;let l="",c={};if(this.apiClient.isVertexAI()){let f=Yg(this.apiClient,e);l=U("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let f=Og(this.apiClient,e);l=U("batches/{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=Zg(e);return c=U("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=vy(h),y=new io;return Object.assign(y,m),y})}else{let d=$g(e);return c=U("batches",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=gy(h),y=new io;return Object.assign(y,m),y})}}async delete(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=jg(this.apiClient,e);return c=U("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>Ey(h))}else{let d=Hg(this.apiClient,e);return c=U("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>yy(h))}}};function Iy(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Cy(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function wy(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ay(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function Sy(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Iy(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Cy(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],wy(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],Ay(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function jc(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Sy(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Ry(t){let e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=r(t,["description"]);i!=null&&s(e,["description"],i);let o=r(t,["name"]);o!=null&&s(e,["name"],o);let a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=r(t,["response"]);c!=null&&s(e,["response"],c);let f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Py(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function xy(t){let e={},n=r(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],Py(n)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function My(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Dy(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],My(n)),e}function Ny(){return{}}function Vy(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function by(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Ry(d))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],xy(i));let o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Dy(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],Ny());let l=r(t,["computerUse"]);l!=null&&s(e,["computerUse"],Vy(l));let c=r(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function ky(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Fy(t){let e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Ly(t){let e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Fy(n));let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Uy(t){let e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],ky(n));let i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Ly(i)),e}function qy(t,e){let n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let o=r(t,["expireTime"]);e!==void 0&&o!=null&&s(e,["expireTime"],o);let a=r(t,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);let l=r(t,["contents"]);if(e!==void 0&&l!=null){let h=Ve(l);Array.isArray(h)&&(h=h.map(m=>jc(m))),s(e,["contents"],h)}let c=r(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],jc(Te(c)));let f=r(t,["tools"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>by(m))),s(e,["tools"],h)}let d=r(t,["toolConfig"]);if(e!==void 0&&d!=null&&s(e,["toolConfig"],Uy(d)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function By(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["model"],_d(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],qy(o,n)),n}function Oy(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function Gy(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function $y(t,e){let n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let o=r(t,["expireTime"]);return e!==void 0&&o!=null&&s(e,["expireTime"],o),n}function Hy(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],$y(o,n)),n}function zy(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function Ky(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],zy(n,e)),e}function Jy(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Wy(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["data"]);i!=null&&s(e,["data"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Qy(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Yy(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function Xy(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Jy(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Wy(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],Qy(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],Yy(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function ed(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Xy(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Zy(t){let e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=r(t,["description"]);n!=null&&s(e,["description"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);let a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=r(t,["response"]);l!=null&&s(e,["response"],l);let c=r(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function jy(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function e_(t){let e={},n=r(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],jy(n));let i=r(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function t_(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function n_(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],t_(n)),e}function i_(t){let e={},n=r(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function o_(t){let e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function r_(t){let e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],o_(n));let i=r(t,["authType"]);i!=null&&s(e,["authType"],i);let o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);let a=r(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=r(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=r(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function s_(t){let e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],r_(n)),e}function a_(){return{}}function l_(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function u_(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>Zy(y))),s(e,["functionDeclarations"],m)}let i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],e_(o));let a=r(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],n_(a));let l=r(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],i_(l));let c=r(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],s_(c)),r(t,["urlContext"])!=null&&s(e,["urlContext"],a_());let d=r(t,["computerUse"]);d!=null&&s(e,["computerUse"],l_(d));let h=r(t,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function c_(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function d_(t){let e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function f_(t){let e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],d_(n));let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function h_(t){let e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],c_(n));let i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],f_(i)),e}function p_(t,e){let n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let o=r(t,["expireTime"]);e!==void 0&&o!=null&&s(e,["expireTime"],o);let a=r(t,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);let l=r(t,["contents"]);if(e!==void 0&&l!=null){let m=Ve(l);Array.isArray(m)&&(m=m.map(y=>ed(y))),s(e,["contents"],m)}let c=r(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],ed(Te(c)));let f=r(t,["tools"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>u_(y))),s(e,["tools"],m)}let d=r(t,["toolConfig"]);e!==void 0&&d!=null&&s(e,["toolConfig"],h_(d));let h=r(t,["kmsKeyName"]);return e!==void 0&&h!=null&&s(e,["encryption_spec","kmsKeyName"],h),n}function m_(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["model"],_d(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],p_(o,n)),n}function g_(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function y_(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function __(t,e){let n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);let o=r(t,["expireTime"]);return e!==void 0&&o!=null&&s(e,["expireTime"],o),n}function T_(t,e){let n={},i=r(e,["name"]);i!=null&&s(n,["_url","name"],We(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],__(o,n)),n}function v_(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function E_(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],v_(n,e)),e}function zi(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["model"]);o!=null&&s(e,["model"],o);let a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=r(t,["updateTime"]);l!=null&&s(e,["updateTime"],l);let c=r(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);let f=r(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function I_(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function C_(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>zi(l))),s(e,["cachedContents"],a)}return e}function Ki(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["model"]);o!=null&&s(e,["model"],o);let a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=r(t,["updateTime"]);l!=null&&s(e,["updateTime"],l);let c=r(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);let f=r(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function w_(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function A_(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Ki(l))),s(e,["cachedContents"],a)}return e}var zr=class extends Je{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new It(Et.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=m_(this.apiClient,e);return c=U("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>Ki(h))}else{let d=By(this.apiClient,e);return c=U("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>zi(h))}}async get(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=g_(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>Ki(h))}else{let d=Oy(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>zi(h))}}async delete(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=y_(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=w_(h),y=new to;return Object.assign(y,m),y})}else{let d=Gy(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=I_(h),y=new to;return Object.assign(y,m),y})}}async update(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=T_(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>Ki(h))}else{let d=Hy(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>zi(h))}}async listInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=E_(e);return c=U("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=A_(h),y=new no;return Object.assign(y,m),y})}else{let d=Ky(e);return c=U("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=C_(h),y=new no;return Object.assign(y,m),y})}}};function td(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ee(t){return this instanceof ee?(this.v=t,this):new ee(t)}function Qt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(I){return function(P){return Promise.resolve(P).then(I,m)}}function c(I,P){i[I]&&(o[I]=function(M){return new Promise(function(D,F){a.push([I,M,D,F])>1||f(I,M)})},P&&(o[I]=P(o[I])))}function f(I,P){try{d(i[I](P))}catch(M){y(a[0][3],M)}}function d(I){I.value instanceof ee?Promise.resolve(I.value.v).then(h,m):y(a[0][2],I)}function h(I){f("next",I)}function m(I){f("throw",I)}function y(I,P){I(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Kn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof td=="function"?td(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,f){l=t[a](l),o(c,f,l.done,l.value)})}}function o(a,l,c,f){Promise.resolve(f).then(function(d){a({value:d,done:c})},l)}}function S_(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Vd(n)}function Vd(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function R_(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nd(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{let o=[],a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!Vd(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}var Kr=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Jr(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Jr=class{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),R_(a)}async sendMessage(e){var n;await this.sendPromise;let i=Te(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;let f=await o,d=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,h=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length,y=[];h!=null&&(y=(c=h.slice(m))!==null&&c!==void 0?c:[]);let I=d?[d]:[];this.recordHistory(i,I,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;let i=Te(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){let n=e?nd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Qt(this,arguments,function*(){var l,c,f,d;let h=[];try{for(var m=!0,y=Kn(e),I;I=yield ee(y.next()),l=I.done,!l;m=!0){d=I.value,m=!1;let P=d;if(S_(P)){let M=(o=(i=P.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;M!==void 0&&h.push(M)}yield yield ee(P)}}catch(P){c={error:P}}finally{try{!m&&!l&&(f=y.return)&&(yield ee(f.call(y)))}finally{if(c)throw c.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...nd(i)):this.history.push(e),this.history.push(...o)}};var ro=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function P_(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);return e!==void 0&&o!=null&&s(e,["_query","pageToken"],o),n}function x_(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],P_(n,e)),e}function M_(t){let e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);let i=r(t,["message"]);i!=null&&s(e,["message"],i);let o=r(t,["code"]);return o!=null&&s(e,["code"],o),e}function D_(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);let a=r(t,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);let l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=r(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);let f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);let d=r(t,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);let h=r(t,["uri"]);h!=null&&s(e,["uri"],h);let m=r(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);let y=r(t,["state"]);y!=null&&s(e,["state"],y);let I=r(t,["source"]);I!=null&&s(e,["source"],I);let P=r(t,["videoMetadata"]);P!=null&&s(e,["videoMetadata"],P);let M=r(t,["error"]);return M!=null&&s(e,["error"],M_(M)),e}function N_(t){let e={},n=r(t,["file"]);n!=null&&s(e,["file"],D_(n));let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function V_(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],wd(n));let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function b_(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],wd(n));let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function k_(t){let e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);let i=r(t,["message"]);i!=null&&s(e,["message"],i);let o=r(t,["code"]);return o!=null&&s(e,["code"],o),e}function Wr(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);let a=r(t,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);let l=r(t,["createTime"]);l!=null&&s(e,["createTime"],l);let c=r(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);let f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);let d=r(t,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);let h=r(t,["uri"]);h!=null&&s(e,["uri"],h);let m=r(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);let y=r(t,["state"]);y!=null&&s(e,["state"],y);let I=r(t,["source"]);I!=null&&s(e,["source"],I);let P=r(t,["videoMetadata"]);P!=null&&s(e,["videoMetadata"],P);let M=r(t,["error"]);return M!=null&&s(e,["error"],k_(M)),e}function F_(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Wr(l))),s(e,["files"],a)}return e}function L_(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function U_(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}var Qr=class extends Je{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new It(Et.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Wr(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=x_(e);return a=U("files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>{let d=F_(f),h=new Lr;return Object.assign(h,d),h})}}async createInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=N_(e);return a=U("upload/v1beta/files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{let d=L_(f),h=new Ur;return Object.assign(h,d),h})}}async get(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=V_(e);return a=U("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Wr(f))}}async delete(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=b_(e);return a=U("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>{let d=U_(f),h=new qr;return Object.assign(h,d),h})}}};function q_(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function bd(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],q_(n)),e}function B_(t){let e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],bd(i)),e}function O_(t){let e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>B_(o))),s(e,["speakerVoiceConfigs"],i)}return e}function G_(t){let e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],bd(n));let i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],O_(i));let o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function $_(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function H_(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function z_(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function K_(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function J_(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],$_(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],H_(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],z_(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],K_(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function W_(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>J_(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Q_(t){let e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=r(t,["description"]);i!=null&&s(e,["description"],i);let o=r(t,["name"]);o!=null&&s(e,["name"],o);let a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=r(t,["response"]);c!=null&&s(e,["response"],c);let f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Y_(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function X_(t){let e={},n=r(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],Y_(n)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Z_(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function j_(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Z_(n)),e}function eT(){return{}}function tT(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function nT(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Q_(d))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],X_(i));let o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],j_(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],eT());let l=r(t,["computerUse"]);l!=null&&s(e,["computerUse"],tT(l));let c=r(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function iT(t){let e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function id(){return{}}function oT(t){let e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);let a=r(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=r(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function rT(t){let e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],oT(n));let i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function sT(t){let e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function aT(t){let e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],sT(i)),e}function lT(t){let e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function uT(t,e){let n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);let a=r(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=r(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=r(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);let d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let h=r(t,["seed"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","seed"],h);let m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],G_(vs(m)));let y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let I=r(t,["systemInstruction"]);e!==void 0&&I!=null&&s(e,["setup","systemInstruction"],W_(Te(I)));let P=r(t,["tools"]);if(e!==void 0&&P!=null){let q=Zt(P);Array.isArray(q)&&(q=q.map($=>nT(Xt($)))),s(e,["setup","tools"],q)}let M=r(t,["sessionResumption"]);e!==void 0&&M!=null&&s(e,["setup","sessionResumption"],iT(M));let D=r(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&s(e,["setup","inputAudioTranscription"],id());let F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&s(e,["setup","outputAudioTranscription"],id());let b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&s(e,["setup","realtimeInputConfig"],rT(b));let k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],aT(k));let O=r(t,["proactivity"]);return e!==void 0&&O!=null&&s(e,["setup","proactivity"],lT(O)),n}function cT(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],uT(o,n)),n}function dT(){return{}}function fT(){return{}}function hT(t){let e={},n=r(t,["media"]);n!=null&&s(e,["mediaChunks"],Td(n));let i=r(t,["audio"]);i!=null&&s(e,["audio"],Ed(i));let o=r(t,["audioStreamEnd"]);o!=null&&s(e,["audioStreamEnd"],o);let a=r(t,["video"]);a!=null&&s(e,["video"],vd(a));let l=r(t,["text"]);return l!=null&&s(e,["text"],l),r(t,["activityStart"])!=null&&s(e,["activityStart"],dT()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],fT()),e}function kd(t){let e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);let i=r(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function pT(t){let e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kd(o))),s(e,["weightedPrompts"],i)}return e}function Fd(t){let e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);let i=r(t,["topK"]);i!=null&&s(e,["topK"],i);let o=r(t,["seed"]);o!=null&&s(e,["seed"],o);let a=r(t,["guidance"]);a!=null&&s(e,["guidance"],a);let l=r(t,["bpm"]);l!=null&&s(e,["bpm"],l);let c=r(t,["density"]);c!=null&&s(e,["density"],c);let f=r(t,["brightness"]);f!=null&&s(e,["brightness"],f);let d=r(t,["scale"]);d!=null&&s(e,["scale"],d);let h=r(t,["muteBass"]);h!=null&&s(e,["muteBass"],h);let m=r(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);let y=r(t,["onlyBassAndDrums"]);y!=null&&s(e,["onlyBassAndDrums"],y);let I=r(t,["musicGenerationMode"]);return I!=null&&s(e,["musicGenerationMode"],I),e}function mT(t){let e={},n=r(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],Fd(n)),e}function Ld(t){let e={},n=r(t,["model"]);return n!=null&&s(e,["model"],n),e}function Ud(t){let e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kd(o))),s(e,["weightedPrompts"],i)}return e}function Yr(t){let e={},n=r(t,["setup"]);n!=null&&s(e,["setup"],Ld(n));let i=r(t,["clientContent"]);i!=null&&s(e,["clientContent"],Ud(i));let o=r(t,["musicGenerationConfig"]);o!=null&&s(e,["musicGenerationConfig"],Fd(o));let a=r(t,["playbackControl"]);return a!=null&&s(e,["playbackControl"],a),e}function gT(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function yT(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],gT(n)),e}function _T(t){let e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],yT(n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function TT(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function vT(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["data"]);i!=null&&s(e,["data"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ET(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function IT(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function CT(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],TT(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],vT(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],ET(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],IT(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function wT(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>CT(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function AT(t){let e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=r(t,["description"]);n!=null&&s(e,["description"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);let a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=r(t,["response"]);l!=null&&s(e,["response"],l);let c=r(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function ST(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function RT(t){let e={},n=r(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],ST(n));let i=r(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function PT(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function xT(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],PT(n)),e}function MT(t){let e={},n=r(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function DT(t){let e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function NT(t){let e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],DT(n));let i=r(t,["authType"]);i!=null&&s(e,["authType"],i);let o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);let a=r(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=r(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=r(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function VT(t){let e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],NT(n)),e}function bT(){return{}}function kT(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function FT(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>AT(y))),s(e,["functionDeclarations"],m)}let i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],RT(o));let a=r(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],xT(a));let l=r(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],MT(l));let c=r(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],VT(c)),r(t,["urlContext"])!=null&&s(e,["urlContext"],bT());let d=r(t,["computerUse"]);d!=null&&s(e,["computerUse"],kT(d));let h=r(t,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function LT(t){let e={},n=r(t,["handle"]);n!=null&&s(e,["handle"],n);let i=r(t,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function od(){return{}}function UT(t){let e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);let a=r(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=r(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function qT(t){let e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],UT(n));let i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function BT(t){let e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function OT(t){let e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],BT(i)),e}function GT(t){let e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function $T(t,e){let n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);let a=r(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=r(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=r(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);let d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let h=r(t,["seed"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","seed"],h);let m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],_T(vs(m)));let y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let I=r(t,["systemInstruction"]);e!==void 0&&I!=null&&s(e,["setup","systemInstruction"],wT(Te(I)));let P=r(t,["tools"]);if(e!==void 0&&P!=null){let q=Zt(P);Array.isArray(q)&&(q=q.map($=>FT(Xt($)))),s(e,["setup","tools"],q)}let M=r(t,["sessionResumption"]);e!==void 0&&M!=null&&s(e,["setup","sessionResumption"],LT(M));let D=r(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&s(e,["setup","inputAudioTranscription"],od());let F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&s(e,["setup","outputAudioTranscription"],od());let b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&s(e,["setup","realtimeInputConfig"],qT(b));let k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],OT(k));let O=r(t,["proactivity"]);return e!==void 0&&O!=null&&s(e,["setup","proactivity"],GT(O)),n}function HT(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],$T(o,n)),n}function zT(){return{}}function KT(){return{}}function JT(t){let e={},n=r(t,["media"]);n!=null&&s(e,["mediaChunks"],Td(n));let i=r(t,["audio"]);i!=null&&s(e,["audio"],Ed(i));let o=r(t,["audioStreamEnd"]);o!=null&&s(e,["audioStreamEnd"],o);let a=r(t,["video"]);a!=null&&s(e,["video"],vd(a));let l=r(t,["text"]);return l!=null&&s(e,["text"],l),r(t,["activityStart"])!=null&&s(e,["activityStart"],zT()),r(t,["activityEnd"])!=null&&s(e,["activityEnd"],KT()),e}function WT(){return{}}function QT(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function YT(t){let e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function XT(t){let e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function qd(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function ZT(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],QT(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],YT(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],XT(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],qd(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function jT(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ZT(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function rd(t){let e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);let i=r(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function ev(t){let e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function tv(t){let e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ev(o))),s(e,["urlMetadata"],i)}return e}function nv(t){let e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],jT(n));let i=r(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);let o=r(t,["interrupted"]);o!=null&&s(e,["interrupted"],o);let a=r(t,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);let l=r(t,["generationComplete"]);l!=null&&s(e,["generationComplete"],l);let c=r(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],rd(c));let f=r(t,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],rd(f));let d=r(t,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],tv(d));let h=r(t,["turnCompleteReason"]);h!=null&&s(e,["turnCompleteReason"],h);let m=r(t,["waitingForInput"]);return m!=null&&s(e,["waitingForInput"],m),e}function iv(t){let e={},n=r(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qd(o))),s(e,["functionCalls"],i)}return e}function ov(t){let e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function $i(t){let e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);let i=r(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function rv(t){let e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);let i=r(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);let o=r(t,["responseTokenCount"]);o!=null&&s(e,["responseTokenCount"],o);let a=r(t,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);let l=r(t,["thoughtsTokenCount"]);l!=null&&s(e,["thoughtsTokenCount"],l);let c=r(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);let f=r(t,["promptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(I=>$i(I))),s(e,["promptTokensDetails"],y)}let d=r(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(I=>$i(I))),s(e,["cacheTokensDetails"],y)}let h=r(t,["responseTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(I=>$i(I))),s(e,["responseTokensDetails"],y)}let m=r(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(I=>$i(I))),s(e,["toolUsePromptTokensDetails"],y)}return e}function sv(t){let e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function av(t){let e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);let i=r(t,["resumable"]);i!=null&&s(e,["resumable"],i);let o=r(t,["lastConsumedClientMessageIndex"]);return o!=null&&s(e,["lastConsumedClientMessageIndex"],o),e}function lv(t){let e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],WT());let i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],nv(i));let o=r(t,["toolCall"]);o!=null&&s(e,["toolCall"],iv(o));let a=r(t,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],ov(a));let l=r(t,["usageMetadata"]);l!=null&&s(e,["usageMetadata"],rv(l));let c=r(t,["goAway"]);c!=null&&s(e,["goAway"],sv(c));let f=r(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],av(f)),e}function uv(){return{}}function cv(t){let e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);let i=r(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function dv(t){let e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cv(o))),s(e,["weightedPrompts"],i)}return e}function fv(t){let e={},n=r(t,["temperature"]);n!=null&&s(e,["temperature"],n);let i=r(t,["topK"]);i!=null&&s(e,["topK"],i);let o=r(t,["seed"]);o!=null&&s(e,["seed"],o);let a=r(t,["guidance"]);a!=null&&s(e,["guidance"],a);let l=r(t,["bpm"]);l!=null&&s(e,["bpm"],l);let c=r(t,["density"]);c!=null&&s(e,["density"],c);let f=r(t,["brightness"]);f!=null&&s(e,["brightness"],f);let d=r(t,["scale"]);d!=null&&s(e,["scale"],d);let h=r(t,["muteBass"]);h!=null&&s(e,["muteBass"],h);let m=r(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);let y=r(t,["onlyBassAndDrums"]);y!=null&&s(e,["onlyBassAndDrums"],y);let I=r(t,["musicGenerationMode"]);return I!=null&&s(e,["musicGenerationMode"],I),e}function hv(t){let e={},n=r(t,["clientContent"]);n!=null&&s(e,["clientContent"],dv(n));let i=r(t,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],fv(i)),e}function pv(t){let e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);i!=null&&s(e,["mimeType"],i);let o=r(t,["sourceMetadata"]);return o!=null&&s(e,["sourceMetadata"],hv(o)),e}function mv(t){let e={},n=r(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pv(o))),s(e,["audioChunks"],i)}return e}function gv(t){let e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);let i=r(t,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function yv(t){let e={};r(t,["setupComplete"])!=null&&s(e,["setupComplete"],uv());let i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],mv(i));let o=r(t,["filteredPrompt"]);return o!=null&&s(e,["filteredPrompt"],gv(o)),e}function _v(t){let e={},n=r(t,["sessionId"]);return n!=null&&s(e,["sessionId"],n),e}function Tv(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function vv(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["data"]);i!=null&&s(e,["data"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ev(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Bd(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function Iv(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Tv(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],vv(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],Ev(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],Bd(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function Cv(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Iv(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function sd(t){let e={},n=r(t,["text"]);n!=null&&s(e,["text"],n);let i=r(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function wv(t){let e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],Cv(n));let i=r(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);let o=r(t,["interrupted"]);o!=null&&s(e,["interrupted"],o);let a=r(t,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);let l=r(t,["generationComplete"]);l!=null&&s(e,["generationComplete"],l);let c=r(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],sd(c));let f=r(t,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],sd(f));let d=r(t,["turnCompleteReason"]);d!=null&&s(e,["turnCompleteReason"],d);let h=r(t,["waitingForInput"]);return h!=null&&s(e,["waitingForInput"],h),e}function Av(t){let e={},n=r(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Bd(o))),s(e,["functionCalls"],i)}return e}function Sv(t){let e={},n=r(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function Hi(t){let e={},n=r(t,["modality"]);n!=null&&s(e,["modality"],n);let i=r(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function Rv(t){let e={},n=r(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);let i=r(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);let o=r(t,["candidatesTokenCount"]);o!=null&&s(e,["responseTokenCount"],o);let a=r(t,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);let l=r(t,["thoughtsTokenCount"]);l!=null&&s(e,["thoughtsTokenCount"],l);let c=r(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);let f=r(t,["promptTokensDetails"]);if(f!=null){let I=f;Array.isArray(I)&&(I=I.map(P=>Hi(P))),s(e,["promptTokensDetails"],I)}let d=r(t,["cacheTokensDetails"]);if(d!=null){let I=d;Array.isArray(I)&&(I=I.map(P=>Hi(P))),s(e,["cacheTokensDetails"],I)}let h=r(t,["candidatesTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(P=>Hi(P))),s(e,["responseTokensDetails"],I)}let m=r(t,["toolUsePromptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(P=>Hi(P))),s(e,["toolUsePromptTokensDetails"],I)}let y=r(t,["trafficType"]);return y!=null&&s(e,["trafficType"],y),e}function Pv(t){let e={},n=r(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function xv(t){let e={},n=r(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);let i=r(t,["resumable"]);i!=null&&s(e,["resumable"],i);let o=r(t,["lastConsumedClientMessageIndex"]);return o!=null&&s(e,["lastConsumedClientMessageIndex"],o),e}function Mv(t){let e={},n=r(t,["setupComplete"]);n!=null&&s(e,["setupComplete"],_v(n));let i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],wv(i));let o=r(t,["toolCall"]);o!=null&&s(e,["toolCall"],Av(o));let a=r(t,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],Sv(a));let l=r(t,["usageMetadata"]);l!=null&&s(e,["usageMetadata"],Rv(l));let c=r(t,["goAway"]);c!=null&&s(e,["goAway"],Pv(c));let f=r(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],xv(f)),e}function Dv(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function Nv(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Vv(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function bv(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function kv(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Dv(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],Nv(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],Vv(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],bv(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function ao(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>kv(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Fv(t){let e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=r(t,["default"]);i!=null&&s(e,["default"],i);let o=r(t,["description"]);o!=null&&s(e,["description"],o);let a=r(t,["enum"]);a!=null&&s(e,["enum"],a);let l=r(t,["example"]);l!=null&&s(e,["example"],l);let c=r(t,["format"]);c!=null&&s(e,["format"],c);let f=r(t,["items"]);f!=null&&s(e,["items"],f);let d=r(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let h=r(t,["maxLength"]);h!=null&&s(e,["maxLength"],h);let m=r(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=r(t,["maximum"]);y!=null&&s(e,["maximum"],y);let I=r(t,["minItems"]);I!=null&&s(e,["minItems"],I);let P=r(t,["minLength"]);P!=null&&s(e,["minLength"],P);let M=r(t,["minProperties"]);M!=null&&s(e,["minProperties"],M);let D=r(t,["minimum"]);D!=null&&s(e,["minimum"],D);let F=r(t,["nullable"]);F!=null&&s(e,["nullable"],F);let b=r(t,["pattern"]);b!=null&&s(e,["pattern"],b);let k=r(t,["properties"]);k!=null&&s(e,["properties"],k);let O=r(t,["propertyOrdering"]);O!=null&&s(e,["propertyOrdering"],O);let q=r(t,["required"]);q!=null&&s(e,["required"],q);let $=r(t,["title"]);$!=null&&s(e,["title"],$);let w=r(t,["type"]);return w!=null&&s(e,["type"],w),e}function Lv(t){let e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=r(t,["category"]);n!=null&&s(e,["category"],n);let i=r(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function Uv(t){let e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=r(t,["description"]);i!=null&&s(e,["description"],i);let o=r(t,["name"]);o!=null&&s(e,["name"],o);let a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=r(t,["response"]);c!=null&&s(e,["response"],c);let f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function qv(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Bv(t){let e={},n=r(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],qv(n)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ov(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Gv(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ov(n)),e}function $v(){return{}}function Hv(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function zv(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Uv(d))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],Bv(i));let o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],Gv(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],$v());let l=r(t,["computerUse"]);l!=null&&s(e,["computerUse"],Hv(l));let c=r(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Kv(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Jv(t){let e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Wv(t){let e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],Jv(n));let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Qv(t){let e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Kv(n));let i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Wv(i)),e}function Yv(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Od(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Yv(n)),e}function Xv(t){let e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Od(i)),e}function Zv(t){let e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Xv(o))),s(e,["speakerVoiceConfigs"],i)}return e}function jv(t){let e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Od(n));let i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Zv(i));let o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function eE(t){let e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function tE(t,e,n){let i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],ao(Te(o)));let a=r(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=r(e,["topP"]);l!=null&&s(i,["topP"],l);let c=r(e,["topK"]);c!=null&&s(i,["topK"],c);let f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);let d=r(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let h=r(e,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);let m=r(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=r(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let I=r(e,["presencePenalty"]);I!=null&&s(i,["presencePenalty"],I);let P=r(e,["frequencyPenalty"]);P!=null&&s(i,["frequencyPenalty"],P);let M=r(e,["seed"]);M!=null&&s(i,["seed"],M);let D=r(e,["responseMimeType"]);D!=null&&s(i,["responseMimeType"],D);let F=r(e,["responseSchema"]);F!=null&&s(i,["responseSchema"],Fv(_s(F)));let b=r(e,["responseJsonSchema"]);if(b!=null&&s(i,["responseJsonSchema"],b),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let k=r(e,["safetySettings"]);if(n!==void 0&&k!=null){let C=k;Array.isArray(C)&&(C=C.map(S=>Lv(S))),s(n,["safetySettings"],C)}let O=r(e,["tools"]);if(n!==void 0&&O!=null){let C=Zt(O);Array.isArray(C)&&(C=C.map(S=>zv(Xt(S)))),s(n,["tools"],C)}let q=r(e,["toolConfig"]);if(n!==void 0&&q!=null&&s(n,["toolConfig"],Qv(q)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let $=r(e,["cachedContent"]);n!==void 0&&$!=null&&s(n,["cachedContent"],We(t,$));let w=r(e,["responseModalities"]);w!=null&&s(i,["responseModalities"],w);let v=r(e,["mediaResolution"]);v!=null&&s(i,["mediaResolution"],v);let T=r(e,["speechConfig"]);if(T!=null&&s(i,["speechConfig"],jv(Ts(T))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let A=r(e,["thinkingConfig"]);return A!=null&&s(i,["thinkingConfig"],eE(A)),i}function ad(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>ao(c))),s(n,["contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["generationConfig"],tE(t,a,n)),n}function nE(t,e){let n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);let o=r(t,["title"]);e!==void 0&&o!=null&&s(e,["requests[]","title"],o);let a=r(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&s(e,["requests[]","outputDimensionality"],a),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);o!=null&&s(n,["requests[]","content"],ys(t,o));let a=r(e,["config"]);a!=null&&s(n,["config"],nE(a,n));let l=r(e,["model"]);return l!==void 0&&s(n,["requests[]","model"],Q(t,l)),n}function oE(t,e){let n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let o=r(t,["aspectRatio"]);e!==void 0&&o!=null&&s(e,["parameters","aspectRatio"],o);let a=r(t,["guidanceScale"]);if(e!==void 0&&a!=null&&s(e,["parameters","guidanceScale"],a),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let l=r(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&s(e,["parameters","safetySetting"],l);let c=r(t,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);let f=r(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&s(e,["parameters","includeSafetyAttributes"],f);let d=r(t,["includeRaiReason"]);e!==void 0&&d!=null&&s(e,["parameters","includeRaiReason"],d);let h=r(t,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);let m=r(t,["outputMimeType"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","mimeType"],m);let y=r(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");let I=r(t,["imageSize"]);if(e!==void 0&&I!=null&&s(e,["parameters","sampleImageSize"],I),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function rE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);let a=r(e,["config"]);return a!=null&&s(n,["config"],oE(a,n)),n}function sE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function aE(t,e,n){let i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&s(n,["_query","pageSize"],o);let a=r(e,["pageToken"]);n!==void 0&&a!=null&&s(n,["_query","pageToken"],a);let l=r(e,["filter"]);n!==void 0&&l!=null&&s(n,["_query","filter"],l);let c=r(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],Ad(t,c)),i}function lE(t,e){let n={},i=r(e,["config"]);return i!=null&&s(n,["config"],aE(t,i,n)),n}function uE(t,e){let n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let o=r(t,["description"]);e!==void 0&&o!=null&&s(e,["description"],o);let a=r(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&s(e,["defaultCheckpointId"],a),n}function cE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],uE(o,n)),n}function dE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function fE(t){let e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function hE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>ao(c))),s(n,["contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["config"],fE(a)),n}function Gd(t){let e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=r(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],Ct(n));let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function pE(t,e){let n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let o=r(t,["image"]);if(e!==void 0&&o!=null&&s(e,["instances[0]","image"],Gd(o)),r(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function mE(t,e){let n={},i=r(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=r(t,["durationSeconds"]);if(e!==void 0&&o!=null&&s(e,["parameters","durationSeconds"],o),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);let l=r(t,["resolution"]);e!==void 0&&l!=null&&s(e,["parameters","resolution"],l);let c=r(t,["personGeneration"]);if(e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let f=r(t,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);let d=r(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(r(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function gE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);let a=r(e,["image"]);if(a!=null&&s(n,["instances[0]","image"],Gd(a)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");let l=r(e,["source"]);l!=null&&s(n,["config"],pE(l,n));let c=r(e,["config"]);return c!=null&&s(n,["config"],mE(c,n)),n}function yE(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function _E(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["data"]);i!=null&&s(e,["data"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function TE(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function vE(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function EE(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],yE(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],_E(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],TE(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],vE(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function en(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>EE(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function IE(t){let e={},n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);let i=r(t,["default"]);i!=null&&s(e,["default"],i);let o=r(t,["description"]);o!=null&&s(e,["description"],o);let a=r(t,["enum"]);a!=null&&s(e,["enum"],a);let l=r(t,["example"]);l!=null&&s(e,["example"],l);let c=r(t,["format"]);c!=null&&s(e,["format"],c);let f=r(t,["items"]);f!=null&&s(e,["items"],f);let d=r(t,["maxItems"]);d!=null&&s(e,["maxItems"],d);let h=r(t,["maxLength"]);h!=null&&s(e,["maxLength"],h);let m=r(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);let y=r(t,["maximum"]);y!=null&&s(e,["maximum"],y);let I=r(t,["minItems"]);I!=null&&s(e,["minItems"],I);let P=r(t,["minLength"]);P!=null&&s(e,["minLength"],P);let M=r(t,["minProperties"]);M!=null&&s(e,["minProperties"],M);let D=r(t,["minimum"]);D!=null&&s(e,["minimum"],D);let F=r(t,["nullable"]);F!=null&&s(e,["nullable"],F);let b=r(t,["pattern"]);b!=null&&s(e,["pattern"],b);let k=r(t,["properties"]);k!=null&&s(e,["properties"],k);let O=r(t,["propertyOrdering"]);O!=null&&s(e,["propertyOrdering"],O);let q=r(t,["required"]);q!=null&&s(e,["required"],q);let $=r(t,["title"]);$!=null&&s(e,["title"],$);let w=r(t,["type"]);return w!=null&&s(e,["type"],w),e}function CE(t){let e={},n=r(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function wE(t){let e={},n=r(t,["method"]);n!=null&&s(e,["method"],n);let i=r(t,["category"]);i!=null&&s(e,["category"],i);let o=r(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function AE(t){let e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=r(t,["description"]);n!=null&&s(e,["description"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["parameters"]);o!=null&&s(e,["parameters"],o);let a=r(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);let l=r(t,["response"]);l!=null&&s(e,["response"],l);let c=r(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function SE(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function RE(t){let e={},n=r(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],SE(n));let i=r(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function PE(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function xE(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],PE(n)),e}function ME(t){let e={},n=r(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function DE(t){let e={},n=r(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function NE(t){let e={},n=r(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],DE(n));let i=r(t,["authType"]);i!=null&&s(e,["authType"],i);let o=r(t,["googleServiceAccountConfig"]);o!=null&&s(e,["googleServiceAccountConfig"],o);let a=r(t,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);let l=r(t,["oauthConfig"]);l!=null&&s(e,["oauthConfig"],l);let c=r(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function VE(t){let e={},n=r(t,["authConfig"]);return n!=null&&s(e,["authConfig"],NE(n)),e}function bE(){return{}}function kE(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function $d(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>AE(y))),s(e,["functionDeclarations"],m)}let i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);let o=r(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],RE(o));let a=r(t,["googleSearchRetrieval"]);a!=null&&s(e,["googleSearchRetrieval"],xE(a));let l=r(t,["enterpriseWebSearch"]);l!=null&&s(e,["enterpriseWebSearch"],ME(l));let c=r(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],VE(c)),r(t,["urlContext"])!=null&&s(e,["urlContext"],bE());let d=r(t,["computerUse"]);d!=null&&s(e,["computerUse"],kE(d));let h=r(t,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function FE(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function LE(t){let e={},n=r(t,["latitude"]);n!=null&&s(e,["latitude"],n);let i=r(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function UE(t){let e={},n=r(t,["latLng"]);n!=null&&s(e,["latLng"],LE(n));let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function qE(t){let e={},n=r(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],FE(n));let i=r(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],UE(i)),e}function BE(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function OE(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],BE(n)),e}function GE(t){let e={},n=r(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],OE(n)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let i=r(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function $E(t){let e={},n=r(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);let i=r(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function HE(t,e,n){let i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&s(n,["systemInstruction"],en(Te(o)));let a=r(e,["temperature"]);a!=null&&s(i,["temperature"],a);let l=r(e,["topP"]);l!=null&&s(i,["topP"],l);let c=r(e,["topK"]);c!=null&&s(i,["topK"],c);let f=r(e,["candidateCount"]);f!=null&&s(i,["candidateCount"],f);let d=r(e,["maxOutputTokens"]);d!=null&&s(i,["maxOutputTokens"],d);let h=r(e,["stopSequences"]);h!=null&&s(i,["stopSequences"],h);let m=r(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);let y=r(e,["logprobs"]);y!=null&&s(i,["logprobs"],y);let I=r(e,["presencePenalty"]);I!=null&&s(i,["presencePenalty"],I);let P=r(e,["frequencyPenalty"]);P!=null&&s(i,["frequencyPenalty"],P);let M=r(e,["seed"]);M!=null&&s(i,["seed"],M);let D=r(e,["responseMimeType"]);D!=null&&s(i,["responseMimeType"],D);let F=r(e,["responseSchema"]);F!=null&&s(i,["responseSchema"],IE(_s(F)));let b=r(e,["responseJsonSchema"]);b!=null&&s(i,["responseJsonSchema"],b);let k=r(e,["routingConfig"]);k!=null&&s(i,["routingConfig"],k);let O=r(e,["modelSelectionConfig"]);O!=null&&s(i,["modelConfig"],CE(O));let q=r(e,["safetySettings"]);if(n!==void 0&&q!=null){let fe=q;Array.isArray(fe)&&(fe=fe.map(xn=>wE(xn))),s(n,["safetySettings"],fe)}let $=r(e,["tools"]);if(n!==void 0&&$!=null){let fe=Zt($);Array.isArray(fe)&&(fe=fe.map(xn=>$d(Xt(xn)))),s(n,["tools"],fe)}let w=r(e,["toolConfig"]);n!==void 0&&w!=null&&s(n,["toolConfig"],qE(w));let v=r(e,["labels"]);n!==void 0&&v!=null&&s(n,["labels"],v);let T=r(e,["cachedContent"]);n!==void 0&&T!=null&&s(n,["cachedContent"],We(t,T));let A=r(e,["responseModalities"]);A!=null&&s(i,["responseModalities"],A);let C=r(e,["mediaResolution"]);C!=null&&s(i,["mediaResolution"],C);let S=r(e,["speechConfig"]);S!=null&&s(i,["speechConfig"],GE(Ts(S)));let E=r(e,["audioTimestamp"]);E!=null&&s(i,["audioTimestamp"],E);let ge=r(e,["thinkingConfig"]);return ge!=null&&s(i,["thinkingConfig"],$E(ge)),i}function ld(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>en(c))),s(n,["contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["generationConfig"],HE(t,a,n)),n}function zE(t,e){let n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);let o=r(t,["title"]);e!==void 0&&o!=null&&s(e,["instances[]","title"],o);let a=r(t,["outputDimensionality"]);e!==void 0&&a!=null&&s(e,["parameters","outputDimensionality"],a);let l=r(t,["mimeType"]);e!==void 0&&l!=null&&s(e,["instances[]","mimeType"],l);let c=r(t,["autoTruncate"]);return e!==void 0&&c!=null&&s(e,["parameters","autoTruncate"],c),n}function KE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);o!=null&&s(n,["instances[]","content"],ys(t,o));let a=r(e,["config"]);return a!=null&&s(n,["config"],zE(a,n)),n}function JE(t,e){let n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&s(e,["parameters","negativePrompt"],o);let a=r(t,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);let l=r(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);let c=r(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);let f=r(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);let d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);let h=r(t,["personGeneration"]);e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h);let m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);let y=r(t,["includeRaiReason"]);e!==void 0&&y!=null&&s(e,["parameters","includeRaiReason"],y);let I=r(t,["language"]);e!==void 0&&I!=null&&s(e,["parameters","language"],I);let P=r(t,["outputMimeType"]);e!==void 0&&P!=null&&s(e,["parameters","outputOptions","mimeType"],P);let M=r(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&s(e,["parameters","outputOptions","compressionQuality"],M);let D=r(t,["addWatermark"]);e!==void 0&&D!=null&&s(e,["parameters","addWatermark"],D);let F=r(t,["imageSize"]);e!==void 0&&F!=null&&s(e,["parameters","sampleImageSize"],F);let b=r(t,["enhancePrompt"]);return e!==void 0&&b!=null&&s(e,["parameters","enhancePrompt"],b),n}function WE(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);let a=r(e,["config"]);return a!=null&&s(n,["config"],JE(a,n)),n}function Le(t){let e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);let i=r(t,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Ct(i));let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function QE(t){let e={},n=r(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);let i=r(t,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);let o=r(t,["maskDilation"]);return o!=null&&s(e,["dilation"],o),e}function YE(t){let e={},n=r(t,["controlType"]);n!=null&&s(e,["controlType"],n);let i=r(t,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function XE(t){let e={},n=r(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function ZE(t){let e={},n=r(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);let i=r(t,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function jE(t){let e={},n=r(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],Le(n));let i=r(t,["referenceId"]);i!=null&&s(e,["referenceId"],i);let o=r(t,["referenceType"]);o!=null&&s(e,["referenceType"],o);let a=r(t,["maskImageConfig"]);a!=null&&s(e,["maskImageConfig"],QE(a));let l=r(t,["controlImageConfig"]);l!=null&&s(e,["controlImageConfig"],YE(l));let c=r(t,["styleImageConfig"]);c!=null&&s(e,["styleImageConfig"],XE(c));let f=r(t,["subjectImageConfig"]);return f!=null&&s(e,["subjectImageConfig"],ZE(f)),e}function eI(t,e){let n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&s(e,["parameters","negativePrompt"],o);let a=r(t,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);let l=r(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);let c=r(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);let f=r(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);let d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);let h=r(t,["personGeneration"]);e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h);let m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);let y=r(t,["includeRaiReason"]);e!==void 0&&y!=null&&s(e,["parameters","includeRaiReason"],y);let I=r(t,["language"]);e!==void 0&&I!=null&&s(e,["parameters","language"],I);let P=r(t,["outputMimeType"]);e!==void 0&&P!=null&&s(e,["parameters","outputOptions","mimeType"],P);let M=r(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&s(e,["parameters","outputOptions","compressionQuality"],M);let D=r(t,["addWatermark"]);e!==void 0&&D!=null&&s(e,["parameters","addWatermark"],D);let F=r(t,["editMode"]);e!==void 0&&F!=null&&s(e,["parameters","editMode"],F);let b=r(t,["baseSteps"]);return e!==void 0&&b!=null&&s(e,["parameters","editConfig","baseSteps"],b),n}function tI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);let a=r(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>jE(f))),s(n,["instances[0]","referenceImages"],c)}let l=r(e,["config"]);return l!=null&&s(n,["config"],eI(l,n)),n}function nI(t,e){let n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);let o=r(t,["includeRaiReason"]);e!==void 0&&o!=null&&s(e,["parameters","includeRaiReason"],o);let a=r(t,["outputMimeType"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","mimeType"],a);let l=r(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);let c=r(t,["enhanceInputImage"]);e!==void 0&&c!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],c);let f=r(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);let d=r(t,["numberOfImages"]);e!==void 0&&d!=null&&s(e,["parameters","sampleCount"],d);let h=r(t,["mode"]);return e!==void 0&&h!=null&&s(e,["parameters","mode"],h),n}function iI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["image"]);o!=null&&s(n,["instances[0]","image"],Le(o));let a=r(e,["upscaleFactor"]);a!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],a);let l=r(e,["config"]);return l!=null&&s(n,["config"],nI(l,n)),n}function oI(t){let e={},n=r(t,["productImage"]);return n!=null&&s(e,["image"],Le(n)),e}function rI(t,e){let n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let o=r(t,["personImage"]);e!==void 0&&o!=null&&s(e,["instances[0]","personImage","image"],Le(o));let a=r(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>oI(c))),s(e,["instances[0]","productImages"],l)}return n}function sI(t,e){let n={},i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let o=r(t,["baseSteps"]);e!==void 0&&o!=null&&s(e,["parameters","editConfig","baseSteps"],o);let a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&s(e,["parameters","storageUri"],a);let l=r(t,["seed"]);e!==void 0&&l!=null&&s(e,["parameters","seed"],l);let c=r(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);let f=r(t,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);let d=r(t,["addWatermark"]);e!==void 0&&d!=null&&s(e,["parameters","addWatermark"],d);let h=r(t,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);let m=r(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m);let y=r(t,["enhancePrompt"]);return e!==void 0&&y!=null&&s(e,["parameters","enhancePrompt"],y),n}function aI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["source"]);o!=null&&s(n,["config"],rI(o,n));let a=r(e,["config"]);return a!=null&&s(n,["config"],sI(a,n)),n}function lI(t){let e={},n=r(t,["image"]);return n!=null&&s(e,["image"],Le(n)),e}function uI(t,e){let n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let o=r(t,["image"]);e!==void 0&&o!=null&&s(e,["instances[0]","image"],Le(o));let a=r(t,["scribbleImage"]);return e!==void 0&&a!=null&&s(e,["instances[0]","scribble"],lI(a)),n}function cI(t,e){let n={},i=r(t,["mode"]);e!==void 0&&i!=null&&s(e,["parameters","mode"],i);let o=r(t,["maxPredictions"]);e!==void 0&&o!=null&&s(e,["parameters","maxPredictions"],o);let a=r(t,["confidenceThreshold"]);e!==void 0&&a!=null&&s(e,["parameters","confidenceThreshold"],a);let l=r(t,["maskDilation"]);e!==void 0&&l!=null&&s(e,["parameters","maskDilation"],l);let c=r(t,["binaryColorThreshold"]);return e!==void 0&&c!=null&&s(e,["parameters","binaryColorThreshold"],c),n}function dI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["source"]);o!=null&&s(n,["config"],uI(o,n));let a=r(e,["config"]);return a!=null&&s(n,["config"],cI(a,n)),n}function fI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function hI(t,e,n){let i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&s(n,["_query","pageSize"],o);let a=r(e,["pageToken"]);n!==void 0&&a!=null&&s(n,["_query","pageToken"],a);let l=r(e,["filter"]);n!==void 0&&l!=null&&s(n,["_query","filter"],l);let c=r(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],Ad(t,c)),i}function pI(t,e){let n={},i=r(e,["config"]);return i!=null&&s(n,["config"],hI(t,i,n)),n}function mI(t,e){let n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);let o=r(t,["description"]);e!==void 0&&o!=null&&s(e,["description"],o);let a=r(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&s(e,["defaultCheckpointId"],a),n}function gI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],mI(o,n)),n}function yI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","name"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],o),n}function _I(t,e){let n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],en(Te(i)));let o=r(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$d(c))),s(e,["tools"],l)}let a=r(t,["generationConfig"]);return e!==void 0&&a!=null&&s(e,["generationConfig"],a),n}function TI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>en(c))),s(n,["contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["config"],_I(a,n)),n}function vI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>en(c))),s(n,["contents"],l)}let a=r(e,["config"]);return a!=null&&s(n,["config"],a),n}function Hd(t){let e={},n=r(t,["uri"]);n!=null&&s(e,["gcsUri"],n);let i=r(t,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],Ct(i));let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function EI(t,e){let n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);let o=r(t,["image"]);e!==void 0&&o!=null&&s(e,["instances[0]","image"],Le(o));let a=r(t,["video"]);return e!==void 0&&a!=null&&s(e,["instances[0]","video"],Hd(a)),n}function II(t){let e={},n=r(t,["image"]);n!=null&&s(e,["image"],Le(n));let i=r(t,["referenceType"]);return i!=null&&s(e,["referenceType"],i),e}function CI(t){let e={},n=r(t,["image"]);n!=null&&s(e,["_self"],Le(n));let i=r(t,["maskMode"]);return i!=null&&s(e,["maskMode"],i),e}function wI(t,e){let n={},i=r(t,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);let o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);let a=r(t,["fps"]);e!==void 0&&a!=null&&s(e,["parameters","fps"],a);let l=r(t,["durationSeconds"]);e!==void 0&&l!=null&&s(e,["parameters","durationSeconds"],l);let c=r(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);let f=r(t,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);let d=r(t,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);let h=r(t,["personGeneration"]);e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h);let m=r(t,["pubsubTopic"]);e!==void 0&&m!=null&&s(e,["parameters","pubsubTopic"],m);let y=r(t,["negativePrompt"]);e!==void 0&&y!=null&&s(e,["parameters","negativePrompt"],y);let I=r(t,["enhancePrompt"]);e!==void 0&&I!=null&&s(e,["parameters","enhancePrompt"],I);let P=r(t,["generateAudio"]);e!==void 0&&P!=null&&s(e,["parameters","generateAudio"],P);let M=r(t,["lastFrame"]);e!==void 0&&M!=null&&s(e,["instances[0]","lastFrame"],Le(M));let D=r(t,["referenceImages"]);if(e!==void 0&&D!=null){let k=D;Array.isArray(k)&&(k=k.map(O=>II(O))),s(e,["instances[0]","referenceImages"],k)}let F=r(t,["mask"]);e!==void 0&&F!=null&&s(e,["instances[0]","mask"],CI(F));let b=r(t,["compressionQuality"]);return e!==void 0&&b!=null&&s(e,["parameters","compressionQuality"],b),n}function AI(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["_url","model"],Q(t,i));let o=r(e,["prompt"]);o!=null&&s(n,["instances[0]","prompt"],o);let a=r(e,["image"]);a!=null&&s(n,["instances[0]","image"],Le(a));let l=r(e,["video"]);l!=null&&s(n,["instances[0]","video"],Hd(l));let c=r(e,["source"]);c!=null&&s(n,["config"],EI(c,n));let f=r(e,["config"]);return f!=null&&s(n,["config"],wI(f,n)),n}function SI(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function RI(t){let e={},n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function PI(t){let e={},n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function xI(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function MI(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],SI(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],RI(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],PI(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],xI(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function DI(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>MI(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function NI(t){let e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function VI(t){let e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function bI(t){let e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>VI(o))),s(e,["urlMetadata"],i)}return e}function kI(t){let e={},n=r(t,["content"]);n!=null&&s(e,["content"],DI(n));let i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],NI(i));let o=r(t,["tokenCount"]);o!=null&&s(e,["tokenCount"],o);let a=r(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=r(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],bI(l));let c=r(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);let d=r(t,["index"]);d!=null&&s(e,["index"],d);let h=r(t,["logprobsResult"]);h!=null&&s(e,["logprobsResult"],h);let m=r(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function ud(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>kI(d))),s(e,["candidates"],f)}let o=r(t,["modelVersion"]);o!=null&&s(e,["modelVersion"],o);let a=r(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);let l=r(t,["responseId"]);l!=null&&s(e,["responseId"],l);let c=r(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function FI(t){let e={},n=r(t,["values"]);return n!=null&&s(e,["values"],n),e}function LI(){return{}}function UI(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>FI(l))),s(e,["embeddings"],a)}return r(t,["metadata"])!=null&&s(e,["metadata"],LI()),e}function qI(t){let e={},n=r(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],Ct(n));let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function zd(t){let e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);let i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);let o=r(t,["contentType"]);return o!=null&&s(e,["contentType"],o),e}function BI(t){let e={},n=r(t,["_self"]);n!=null&&s(e,["image"],qI(n));let i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);let o=r(t,["_self"]);return o!=null&&s(e,["safetyAttributes"],zd(o)),e}function OI(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>BI(l))),s(e,["generatedImages"],a)}let o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],zd(o)),e}function GI(t){let e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);let o=r(t,["updateTime"]);return o!=null&&s(e,["updateTime"],o),e}function Xr(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["description"]);o!=null&&s(e,["description"],o);let a=r(t,["version"]);a!=null&&s(e,["version"],a);let l=r(t,["_self"]);l!=null&&s(e,["tunedModelInfo"],GI(l));let c=r(t,["inputTokenLimit"]);c!=null&&s(e,["inputTokenLimit"],c);let f=r(t,["outputTokenLimit"]);f!=null&&s(e,["outputTokenLimit"],f);let d=r(t,["supportedGenerationMethods"]);return d!=null&&s(e,["supportedActions"],d),e}function $I(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["_self"]);if(o!=null){let a=Sd(o);Array.isArray(a)&&(a=a.map(l=>Xr(l))),s(e,["models"],a)}return e}function HI(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function zI(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["totalTokens"]);i!=null&&s(e,["totalTokens"],i);let o=r(t,["cachedContentTokenCount"]);return o!=null&&s(e,["cachedContentTokenCount"],o),e}function KI(t){let e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);let i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],Ct(i));let o=r(t,["encoding"]);return o!=null&&s(e,["mimeType"],o),e}function JI(t){let e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],KI(n)),e}function WI(t){let e={},n=r(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>JI(l))),s(e,["generatedVideos"],a)}let i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function QI(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);a!=null&&s(e,["error"],a);let l=r(t,["response","generateVideoResponse"]);return l!=null&&s(e,["response"],WI(l)),e}function YI(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function XI(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["data"]);i!=null&&s(e,["data"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ZI(t){let e={},n=r(t,["displayName"]);n!=null&&s(e,["displayName"],n);let i=r(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function jI(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function eC(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],YI(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],XI(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],ZI(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],jI(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function tC(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>eC(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function nC(t){let e={},n=r(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function iC(t){let e={},n=r(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);let i=r(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function oC(t){let e={},n=r(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iC(o))),s(e,["urlMetadata"],i)}return e}function rC(t){let e={},n=r(t,["content"]);n!=null&&s(e,["content"],tC(n));let i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],nC(i));let o=r(t,["finishMessage"]);o!=null&&s(e,["finishMessage"],o);let a=r(t,["finishReason"]);a!=null&&s(e,["finishReason"],a);let l=r(t,["urlContextMetadata"]);l!=null&&s(e,["urlContextMetadata"],oC(l));let c=r(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);let f=r(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);let d=r(t,["index"]);d!=null&&s(e,["index"],d);let h=r(t,["logprobsResult"]);h!=null&&s(e,["logprobsResult"],h);let m=r(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function cd(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>rC(h))),s(e,["candidates"],d)}let o=r(t,["createTime"]);o!=null&&s(e,["createTime"],o);let a=r(t,["modelVersion"]);a!=null&&s(e,["modelVersion"],a);let l=r(t,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);let c=r(t,["responseId"]);c!=null&&s(e,["responseId"],c);let f=r(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function sC(t){let e={},n=r(t,["truncated"]);n!=null&&s(e,["truncated"],n);let i=r(t,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function aC(t){let e={},n=r(t,["values"]);n!=null&&s(e,["values"],n);let i=r(t,["statistics"]);return i!=null&&s(e,["statistics"],sC(i)),e}function lC(t){let e={},n=r(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function uC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>aC(l))),s(e,["embeddings"],a)}let o=r(t,["metadata"]);return o!=null&&s(e,["metadata"],lC(o)),e}function Kd(t){let e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);let i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],Ct(i));let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Jd(t){let e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);let i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);let o=r(t,["contentType"]);return o!=null&&s(e,["contentType"],o),e}function lo(t){let e={},n=r(t,["_self"]);n!=null&&s(e,["image"],Kd(n));let i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);let o=r(t,["_self"]);o!=null&&s(e,["safetyAttributes"],Jd(o));let a=r(t,["prompt"]);return a!=null&&s(e,["enhancedPrompt"],a),e}function cC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>lo(l))),s(e,["generatedImages"],a)}let o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&s(e,["positivePromptSafetyAttributes"],Jd(o)),e}function dC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>lo(a))),s(e,["generatedImages"],o)}return e}function fC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>lo(a))),s(e,["generatedImages"],o)}return e}function hC(t){let e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lo(o))),s(e,["generatedImages"],i)}return e}function pC(t){let e={},n=r(t,["label"]);n!=null&&s(e,["label"],n);let i=r(t,["score"]);return i!=null&&s(e,["score"],i),e}function mC(t){let e={},n=r(t,["_self"]);n!=null&&s(e,["mask"],Kd(n));let i=r(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pC(a))),s(e,["labels"],o)}return e}function gC(t){let e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mC(o))),s(e,["generatedMasks"],i)}return e}function yC(t){let e={},n=r(t,["endpoint"]);n!=null&&s(e,["name"],n);let i=r(t,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function _C(t){let e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);let i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);let o=r(t,["updateTime"]);return o!=null&&s(e,["updateTime"],o),e}function TC(t){let e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);let i=r(t,["epoch"]);i!=null&&s(e,["epoch"],i);let o=r(t,["step"]);return o!=null&&s(e,["step"],o),e}function Zr(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);let o=r(t,["description"]);o!=null&&s(e,["description"],o);let a=r(t,["versionId"]);a!=null&&s(e,["version"],a);let l=r(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>yC(y))),s(e,["endpoints"],m)}let c=r(t,["labels"]);c!=null&&s(e,["labels"],c);let f=r(t,["_self"]);f!=null&&s(e,["tunedModelInfo"],_C(f));let d=r(t,["defaultCheckpointId"]);d!=null&&s(e,["defaultCheckpointId"],d);let h=r(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>TC(y))),s(e,["checkpoints"],m)}return e}function vC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["_self"]);if(o!=null){let a=Sd(o);Array.isArray(a)&&(a=a.map(l=>Zr(l))),s(e,["models"],a)}return e}function EC(t){let e={},n=r(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function IC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["totalTokens"]);return i!=null&&s(e,["totalTokens"],i),e}function CC(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["tokensInfo"]);return i!=null&&s(e,["tokensInfo"],i),e}function wC(t){let e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);let i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],Ct(i));let o=r(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function AC(t){let e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],wC(n)),e}function SC(t){let e={},n=r(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>AC(l))),s(e,["generatedVideos"],a)}let i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);let o=r(t,["raiMediaFilteredReasons"]);return o!=null&&s(e,["raiMediaFilteredReasons"],o),e}function RC(t){let e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);let i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);let o=r(t,["done"]);o!=null&&s(e,["done"],o);let a=r(t,["error"]);a!=null&&s(e,["error"],a);let l=r(t,["response"]);return l!=null&&s(e,["response"],SC(l)),e}var PC="Content-Type",xC="X-Server-Timeout",MC="User-Agent",jr="x-goog-api-client",DC="1.20.0",NC=`google-genai-sdk/${DC}`,VC="v1beta1",bC="v1beta",dd=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,es=class{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VC,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bC,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(let[l,c]of Object.entries(e.queryParams))o.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){let i=JSON.parse(JSON.stringify(e));for(let[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){let o=new AbortController,a=o.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&kC(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await fd(o),new Jn(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await fd(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Qt(this,arguments,function*(){let o=(n=e?.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){let{done:c,value:f}=yield ee(o.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=a.decode(f,{stream:!0});try{let m=JSON.parse(d);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),I=y.status,P=y.code,M=`got status: ${I}. ${JSON.stringify(m)}`;if(P>=400&&P<600)throw new ro({message:M,status:P})}}catch(m){if(m.name==="ApiError")throw m}l+=d;let h=l.match(dd);for(;h;){let m=h[1];try{let y=new Response(m,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ee(new Jn(y)),l=l.slice(h[0].length),h=l.match(dd)}catch(y){throw new Error(`exception parsing stream chunk ${m}. ${y}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},n=NC+" "+this.clientOptions.userAgentExtra;return e[MC]=n,e[jr]=n,e[PC]="application/json",e}async getHeadersInternal(e){let n=new Headers;if(e&&e.headers){for(let[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(xC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let a=this.clientOptions.uploader,l=await a.stat(e);o.sizeBytes=String(l.size);let c=(i=n?.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=c;let f=await this.fetchUploadUrl(o,n);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let o={};n?.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let a={file:e},l=await this.request({path:U("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!l||!l?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let c=(i=l?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}};async function fd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new ro({message:o,status:n}):new Error(o)}}function kC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){let c=Object.assign({},a);for(let f in l)if(Object.prototype.hasOwnProperty.call(l,f)){let d=l[f],h=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?c[f]=i(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}let o=i(n,e);t.body=JSON.stringify(o)}var FC="mcp_used/unknown",LC=!1;function Wd(t){for(let e of t)if(UC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return LC}function Qd(t){var e;let n=(e=t[jr])!==null&&e!==void 0?e:"";t[jr]=(n+` ${FC}`).trimStart()}function UC(t){return t!==null&&typeof t=="object"&&t instanceof ts}function qC(t,e=100){return Qt(this,arguments,function*(){let i,o=0;for(;o<e;){let a=yield ee(t.listTools({cursor:i}));for(let l of a.tools)yield yield ee(l),o++;if(!a.nextCursor)break;i=a.nextCursor}})}var ts=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;let a={},l=[];for(let h of this.mcpClients)try{for(var c=!0,f=(n=void 0,Kn(qC(h))),d;d=await f.next(),e=d.done,!e;c=!0){o=d.value,c=!1;let m=o;l.push(m);let y=m.name;if(a[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);a[y]=h}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),sg(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],a;this.config.timeout&&(a={timeout:this.config.timeout});let l=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}};async function BC(t,e,n){let i=new Or,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);let a=yv(o);Object.assign(i,a),e(i)}var ns=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=GC(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`,d=()=>{},h=new Promise(k=>{d=k}),m=e.callbacks,y=function(){d({})},I=this.apiClient,P={onopen:y,onmessage:k=>{BC(I,m.onmessage,k)},onerror:(n=m?.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=m?.onclose)!==null&&i!==void 0?i:function(k){}},M=this.webSocketFactory.create(f,OC(l),P);M.connect(),await h;let D=Q(this.apiClient,e.model),F=Ld({model:D}),b=Yr({setup:F});return M.send(JSON.stringify(b)),new is(M,this.apiClient)}},is=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=pT(e),i=Ud(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=mT(e),i=Yr(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){let n=Yr({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Jt.PLAY)}pause(){this.sendPlaybackControl(Jt.PAUSE)}stop(){this.sendPlaybackControl(Jt.STOP)}resetContext(){this.sendPlaybackControl(Jt.RESET_CONTEXT)}close(){this.conn.close()}};function OC(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function GC(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var $C="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function HC(t,e,n){let i=new Br,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let a=JSON.parse(o);if(t.isVertexAI()){let l=Mv(a);Object.assign(i,l)}else{let l=lv(a);Object.assign(i,l)}e(i)}var os=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new ns(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h,m=this.apiClient.getHeaders();e.config&&e.config.tools&&Wd(e.config.tools)&&Qd(m);let y=JC(m);if(this.apiClient.isVertexAI())h=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y);else{let T=this.apiClient.getApiKey(),A="BidiGenerateContent",C="key";T?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",C="access_token"),h=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${A}?${C}=${T}`}let I=()=>{},P=new Promise(T=>{I=T}),M=e.callbacks,D=function(){var T;(T=M?.onopen)===null||T===void 0||T.call(M),I({})},F=this.apiClient,b={onopen:D,onmessage:T=>{HC(F,M.onmessage,T)},onerror:(n=M?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=M?.onclose)!==null&&i!==void 0?i:function(T){}},k=this.webSocketFactory.create(h,KC(y),b);k.connect(),await P;let O=Q(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){let T=this.apiClient.getProject(),A=this.apiClient.getLocation();O=`projects/${T}/locations/${A}/`+O}let q={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ji.AUDIO]}:e.config.responseModalities=[Ji.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let $=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],w=[];for(let T of $)if(this.isCallableTool(T)){let A=T;w.push(await A.tool())}else w.push(T);w.length>0&&(e.config.tools=w);let v={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=HT(this.apiClient,v):q=cT(this.apiClient,v),delete q.config,k.send(JSON.stringify(q)),new rs(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},zC={turnComplete:!0},rs=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ve(n.turns),e.isVertexAI()?i=i.map(o=>en(o)):i=i.map(o=>ao(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error($C)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},zC),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:JT(e)}:n={realtimeInput:hT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function KC(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function JC(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var hd=10;function pd(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let l of(n=t?.tools)!==null&&n!==void 0?n:[])if(Yt(l)){o=!0;break}if(!o)return!0;let a=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Yt(t){return"callTool"in t&&typeof t.callTool=="function"}function WC(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Yt(o)))!==null&&i!==void 0?i:!1}function QC(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Yt(o)))!==null&&i!==void 0?i:!1}function md(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var ss=class extends Je{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,l,c;let f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!WC(n)||pd(n.config))return await this.generateContentInternal(f);if(QC(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h,m=Ve(f.contents),y=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:hd,I=0;for(;I<y&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){let P=d.candidates[0].content,M=[];for(let D of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Yt(D)){let b=await D.callTool(d.functionCalls);M.push(...b)}I++,h={role:"user",parts:M},f.contents=Ve(f.contents),f.contents.push(P),f.contents.push(h),md(f.config)&&(m.push(P),m.push(h))}return md(f.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),pd(n.config)){let i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a,l=[];if(i?.generatedImages)for(let f of i.generatedImages)f&&f?.safetyAttributes&&((o=f?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f?.safetyAttributes:l.push(f);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;let l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new It(Et.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;let a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;let l=await Promise.all(a.map(async f=>Yt(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&Wd(e.config.tools)){let f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Qd(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,o;let a=new Map;for(let l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Yt(l)){let c=l,f=await c.tool();for(let d of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,i,o;let a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:hd,l=!1,c=0,f=await this.initAfcToolsMap(e);return(function(d,h,m){var y,I;return Qt(this,arguments,function*(){for(var P,M,D,F;c<a;){l&&(c++,l=!1);let q=yield ee(d.processParamsMaybeAddMcpUsage(m)),$=yield ee(d.generateContentStreamInternal(q)),w=[],v=[];try{for(var b=!0,k=(M=void 0,Kn($)),O;O=yield ee(k.next()),P=O.done,!P;b=!0){F=O.value,b=!1;let T=F;if(yield yield ee(T),T.candidates&&(!((y=T.candidates[0])===null||y===void 0)&&y.content)){v.push(T.candidates[0].content);for(let A of(I=T.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(c<a&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(A.functionCall.name)){let C=yield ee(h.get(A.functionCall.name).callTool([A.functionCall]));w.push(...C)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(T){M={error:T}}finally{try{!b&&!P&&(D=k.return)&&(yield ee(D.call(k)))}finally{if(M)throw M.error}}if(w.length>0){l=!0;let T=new vt;T.candidates=[{content:{role:"user",parts:w}}],yield yield ee(T);let A=[];A.push(...v),A.push({role:"user",parts:w});let C=Ve(m.contents).concat(A);m.contents=C}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=ld(this.apiClient,e);return c=U("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=cd(h),y=new vt;return Object.assign(y,m),y})}else{let d=ad(this.apiClient,e);return c=U("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=ud(h),y=new vt;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=ld(this.apiClient,e);return c=U("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return Qt(this,arguments,function*(){var y,I,P,M;try{for(var D=!0,F=Kn(m),b;b=yield ee(F.next()),y=b.done,!y;D=!0){M=b.value,D=!1;let k=M,O=cd(yield ee(k.json()));O.sdkHttpResponse={headers:k.headers};let q=new vt;Object.assign(q,O),yield yield ee(q)}}catch(k){I={error:k}}finally{try{!D&&!y&&(P=F.return)&&(yield ee(P.call(F)))}finally{if(I)throw I.error}}})})}else{let d=ad(this.apiClient,e);return c=U("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(m){return Qt(this,arguments,function*(){var y,I,P,M;try{for(var D=!0,F=Kn(m),b;b=yield ee(F.next()),y=b.done,!y;D=!0){M=b.value,D=!1;let k=M,O=ud(yield ee(k.json()));O.sdkHttpResponse={headers:k.headers};let q=new vt;Object.assign(q,O),yield yield ee(q)}}catch(k){I={error:k}}finally{try{!D&&!y&&(P=F.return)&&(yield ee(P.call(F)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=KE(this.apiClient,e);return c=U("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=uC(h),y=new Wi;return Object.assign(y,m),y})}else{let d=iE(this.apiClient,e);return c=U("{model}:batchEmbedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=UI(h),y=new Wi;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=WE(this.apiClient,e);return c=U("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=cC(h),y=new Qi;return Object.assign(y,m),y})}else{let d=rE(this.apiClient,e);return c=U("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=OI(h),y=new Qi;return Object.assign(y,m),y})}}async editImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=tI(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>{let d=dC(f),h=new Nr;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=iI(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>{let d=fC(f),h=new Vr;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=aI(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{let d=hC(f),h=new br;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=dI(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{let d=gC(f),h=new kr;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=fI(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>Zr(h))}else{let d=sE(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>Xr(h))}}async listInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=pI(this.apiClient,e);return c=U("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=vC(h),y=new Yi;return Object.assign(y,m),y})}else{let d=lE(this.apiClient,e);return c=U("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=$I(h),y=new Yi;return Object.assign(y,m),y})}}async update(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=gI(this.apiClient,e);return c=U("{model}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>Zr(h))}else{let d=cE(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>Xr(h))}}async delete(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=yI(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=EC(h),y=new Xi;return Object.assign(y,m),y})}else{let d=dE(this.apiClient,e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=HI(h),y=new Xi;return Object.assign(y,m),y})}}async countTokens(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=TI(this.apiClient,e);return c=U("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=IC(h),y=new Zi;return Object.assign(y,m),y})}else{let d=hE(this.apiClient,e);return c=U("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=zI(h),y=new Zi;return Object.assign(y,m),y})}}async computeTokens(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=vI(this.apiClient,e);return a=U("{model}:computeTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>{let d=CC(f),h=new Fr;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=AI(this.apiClient,e);return c=U("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>{let m=RC(h),y=new ji;return Object.assign(y,m),y})}else{let d=gE(this.apiClient,e);return c=U("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{let m=QI(h),y=new ji;return Object.assign(y,m),y})}}};var as=class extends Je{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],a;i&&"httpOptions"in i&&(a=i.httpOptions);let l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],a;i&&"httpOptions"in i&&(a=i.httpOptions);let l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=Hm(e);return c=U("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l}else{let d=Gm(e);return c=U("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=$m(e);return a=U("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function YC(t){let e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Yd(t){let e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],YC(n)),e}function XC(t){let e={},n=r(t,["speaker"]);n!=null&&s(e,["speaker"],n);let i=r(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Yd(i)),e}function ZC(t){let e={},n=r(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>XC(o))),s(e,["speakerVoiceConfigs"],i)}return e}function jC(t){let e={},n=r(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Yd(n));let i=r(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],ZC(i));let o=r(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ew(t){let e={},n=r(t,["fps"]);n!=null&&s(e,["fps"],n);let i=r(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);let o=r(t,["startOffset"]);return o!=null&&s(e,["startOffset"],o),e}function tw(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["data"]);n!=null&&s(e,["data"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function nw(t){let e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=r(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);let i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function iw(t){let e={},n=r(t,["id"]);n!=null&&s(e,["id"],n);let i=r(t,["args"]);i!=null&&s(e,["args"],i);let o=r(t,["name"]);return o!=null&&s(e,["name"],o),e}function ow(t){let e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ew(n));let i=r(t,["thought"]);i!=null&&s(e,["thought"],i);let o=r(t,["inlineData"]);o!=null&&s(e,["inlineData"],tw(o));let a=r(t,["fileData"]);a!=null&&s(e,["fileData"],nw(a));let l=r(t,["thoughtSignature"]);l!=null&&s(e,["thoughtSignature"],l);let c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],iw(c));let f=r(t,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);let d=r(t,["executableCode"]);d!=null&&s(e,["executableCode"],d);let h=r(t,["functionResponse"]);h!=null&&s(e,["functionResponse"],h);let m=r(t,["text"]);return m!=null&&s(e,["text"],m),e}function rw(t){let e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ow(a))),s(e,["parts"],o)}let i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function sw(t){let e={},n=r(t,["behavior"]);n!=null&&s(e,["behavior"],n);let i=r(t,["description"]);i!=null&&s(e,["description"],i);let o=r(t,["name"]);o!=null&&s(e,["name"],o);let a=r(t,["parameters"]);a!=null&&s(e,["parameters"],a);let l=r(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);let c=r(t,["response"]);c!=null&&s(e,["response"],c);let f=r(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function aw(t){let e={},n=r(t,["startTime"]);n!=null&&s(e,["startTime"],n);let i=r(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function lw(t){let e={},n=r(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],aw(n)),r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function uw(t){let e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);let i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function cw(t){let e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],uw(n)),e}function dw(){return{}}function fw(t){let e={},n=r(t,["environment"]);return n!=null&&s(e,["environment"],n),e}function hw(t){let e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>sw(d))),s(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=r(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],lw(i));let o=r(t,["googleSearchRetrieval"]);if(o!=null&&s(e,["googleSearchRetrieval"],cw(o)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&s(e,["urlContext"],dw());let l=r(t,["computerUse"]);l!=null&&s(e,["computerUse"],fw(l));let c=r(t,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function pw(t){let e={},n=r(t,["handle"]);if(n!=null&&s(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gd(){return{}}function mw(t){let e={},n=r(t,["disabled"]);n!=null&&s(e,["disabled"],n);let i=r(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);let o=r(t,["endOfSpeechSensitivity"]);o!=null&&s(e,["endOfSpeechSensitivity"],o);let a=r(t,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);let l=r(t,["silenceDurationMs"]);return l!=null&&s(e,["silenceDurationMs"],l),e}function gw(t){let e={},n=r(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],mw(n));let i=r(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);let o=r(t,["turnCoverage"]);return o!=null&&s(e,["turnCoverage"],o),e}function yw(t){let e={},n=r(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function _w(t){let e={},n=r(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);let i=r(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],yw(i)),e}function Tw(t){let e={},n=r(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function vw(t,e){let n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);let o=r(t,["responseModalities"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","responseModalities"],o);let a=r(t,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);let l=r(t,["topP"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","topP"],l);let c=r(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);let f=r(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);let d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);let h=r(t,["seed"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","seed"],h);let m=r(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],jC(vs(m)));let y=r(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],y);let I=r(t,["systemInstruction"]);e!==void 0&&I!=null&&s(e,["setup","systemInstruction"],rw(Te(I)));let P=r(t,["tools"]);if(e!==void 0&&P!=null){let q=Zt(P);Array.isArray(q)&&(q=q.map($=>hw(Xt($)))),s(e,["setup","tools"],q)}let M=r(t,["sessionResumption"]);e!==void 0&&M!=null&&s(e,["setup","sessionResumption"],pw(M));let D=r(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&s(e,["setup","inputAudioTranscription"],gd());let F=r(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&s(e,["setup","outputAudioTranscription"],gd());let b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&s(e,["setup","realtimeInputConfig"],gw(b));let k=r(t,["contextWindowCompression"]);e!==void 0&&k!=null&&s(e,["setup","contextWindowCompression"],_w(k));let O=r(t,["proactivity"]);return e!==void 0&&O!=null&&s(e,["setup","proactivity"],Tw(O)),n}function Ew(t,e){let n={},i=r(e,["model"]);i!=null&&s(n,["setup","model"],Q(t,i));let o=r(e,["config"]);return o!=null&&s(n,["config"],vw(o,n)),n}function Iw(t,e,n){let i={},o=r(e,["expireTime"]);n!==void 0&&o!=null&&s(n,["expireTime"],o);let a=r(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&s(n,["newSessionExpireTime"],a);let l=r(e,["uses"]);n!==void 0&&l!=null&&s(n,["uses"],l);let c=r(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&s(n,["bidiGenerateContentSetup"],Ew(t,c));let f=r(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&s(n,["fieldMask"],f),i}function Cw(t,e){let n={},i=r(e,["config"]);return i!=null&&s(n,["config"],Iw(t,i,n)),n}function ww(t){let e={},n=r(t,["name"]);return n!=null&&s(e,["name"],n),e}function Aw(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function Sw(t,e){let n=null,i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;let o=t.fieldMask;if(n){let a=Aw(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];o.length>0&&(c=o.map(d=>l.includes(d)?`generationConfig.${d}`:d));let f=[];a&&f.push(a),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}var ls=class extends Je{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let c=Cw(this.apiClient,e);a=U("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;let f=Sw(c,e.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>ww(d))}}};function Rw(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Pw(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);let a=r(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function xw(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Pw(n,e)),e}function Mw(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Dw(t){let e={},n=r(t,["textInput"]);n!=null&&s(e,["textInput"],n);let i=r(t,["output"]);return i!=null&&s(e,["output"],i),e}function Nw(t){let e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=r(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Dw(o))),s(e,["examples","examples"],i)}return e}function Vw(t,e){let n={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=r(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let o=r(t,["epochCount"]);e!==void 0&&o!=null&&s(e,["tuningTask","hyperparameters","epochCount"],o);let a=r(t,["learningRateMultiplier"]);if(a!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=r(t,["batchSize"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","batchSize"],l);let c=r(t,["learningRate"]);if(e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function bw(t){let e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=r(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);let o=r(t,["trainingDataset"]);o!=null&&s(e,["tuningTask","trainingData"],Nw(o));let a=r(t,["config"]);return a!=null&&s(e,["config"],Vw(a,e)),e}function kw(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Fw(t,e){let n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);let o=r(t,["pageToken"]);e!==void 0&&o!=null&&s(e,["_query","pageToken"],o);let a=r(t,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),n}function Lw(t){let e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Fw(n,e)),e}function Uw(t){let e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],n);let i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function qw(t,e){let n={},i=r(t,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);let o=r(t,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Bw(t,e){let n={},i=r(t,["gcsUri"]);i!=null&&s(n,["validationDatasetUri"],i);let o=r(t,["vertexDatasetResource"]);return e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o),n}function Ow(t,e){let n={},i=r(t,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],Bw(i,n));let o=r(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&s(e,["tunedModelDisplayName"],o);let a=r(t,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);let l=r(t,["epochCount"]);e!==void 0&&l!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);let c=r(t,["learningRateMultiplier"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);let f=r(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);let d=r(t,["preTunedModelCheckpointId"]);d!=null&&s(n,["preTunedModel","checkpointId"],d);let h=r(t,["adapterSize"]);if(e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let m=r(t,["labels"]);return e!==void 0&&m!=null&&s(e,["labels"],m),n}function Gw(t){let e={},n=r(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);let i=r(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);let o=r(t,["trainingDataset"]);o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],qw(o,e));let a=r(t,["config"]);return a!=null&&s(e,["config"],Ow(a,e)),e}function $w(t){let e={},n=r(t,["name"]);n!=null&&s(e,["model"],n);let i=r(t,["name"]);return i!=null&&s(e,["endpoint"],i),e}function Xd(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["state"]);o!=null&&s(e,["state"],Cd(o));let a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=r(t,["tuningTask","startTime"]);l!=null&&s(e,["startTime"],l);let c=r(t,["tuningTask","completeTime"]);c!=null&&s(e,["endTime"],c);let f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);let d=r(t,["description"]);d!=null&&s(e,["description"],d);let h=r(t,["baseModel"]);h!=null&&s(e,["baseModel"],h);let m=r(t,["_self"]);m!=null&&s(e,["tunedModel"],$w(m));let y=r(t,["customBaseModel"]);y!=null&&s(e,["customBaseModel"],y);let I=r(t,["experiment"]);I!=null&&s(e,["experiment"],I);let P=r(t,["labels"]);P!=null&&s(e,["labels"],P);let M=r(t,["outputUri"]);M!=null&&s(e,["outputUri"],M);let D=r(t,["pipelineJob"]);D!=null&&s(e,["pipelineJob"],D);let F=r(t,["serviceAccount"]);F!=null&&s(e,["serviceAccount"],F);let b=r(t,["tunedModelDisplayName"]);return b!=null&&s(e,["tunedModelDisplayName"],b),e}function Hw(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Xd(l))),s(e,["tuningJobs"],a)}return e}function zw(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["metadata"]);o!=null&&s(e,["metadata"],o);let a=r(t,["done"]);a!=null&&s(e,["done"],a);let l=r(t,["error"]);return l!=null&&s(e,["error"],l),e}function Kw(t){let e={},n=r(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);let i=r(t,["epoch"]);i!=null&&s(e,["epoch"],i);let o=r(t,["step"]);o!=null&&s(e,["step"],o);let a=r(t,["endpoint"]);return a!=null&&s(e,["endpoint"],a),e}function Jw(t){let e={},n=r(t,["model"]);n!=null&&s(e,["model"],n);let i=r(t,["endpoint"]);i!=null&&s(e,["endpoint"],i);let o=r(t,["checkpoints"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Kw(l))),s(e,["checkpoints"],a)}return e}function us(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["name"]);i!=null&&s(e,["name"],i);let o=r(t,["state"]);o!=null&&s(e,["state"],Cd(o));let a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);let l=r(t,["startTime"]);l!=null&&s(e,["startTime"],l);let c=r(t,["endTime"]);c!=null&&s(e,["endTime"],c);let f=r(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);let d=r(t,["error"]);d!=null&&s(e,["error"],d);let h=r(t,["description"]);h!=null&&s(e,["description"],h);let m=r(t,["baseModel"]);m!=null&&s(e,["baseModel"],m);let y=r(t,["tunedModel"]);y!=null&&s(e,["tunedModel"],Jw(y));let I=r(t,["preTunedModel"]);I!=null&&s(e,["preTunedModel"],I);let P=r(t,["supervisedTuningSpec"]);P!=null&&s(e,["supervisedTuningSpec"],P);let M=r(t,["tuningDataStats"]);M!=null&&s(e,["tuningDataStats"],M);let D=r(t,["encryptionSpec"]);D!=null&&s(e,["encryptionSpec"],D);let F=r(t,["partnerModelTuningSpec"]);F!=null&&s(e,["partnerModelTuningSpec"],F);let b=r(t,["customBaseModel"]);b!=null&&s(e,["customBaseModel"],b);let k=r(t,["experiment"]);k!=null&&s(e,["experiment"],k);let O=r(t,["labels"]);O!=null&&s(e,["labels"],O);let q=r(t,["outputUri"]);q!=null&&s(e,["outputUri"],q);let $=r(t,["pipelineJob"]);$!=null&&s(e,["pipelineJob"],$);let w=r(t,["serviceAccount"]);w!=null&&s(e,["serviceAccount"],w);let v=r(t,["tunedModelDisplayName"]);return v!=null&&s(e,["tunedModelDisplayName"],v),e}function Ww(t){let e={},n=r(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);let i=r(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);let o=r(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>us(l))),s(e,["tuningJobs"],a)}return e}var cs=class extends Je{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new It(Et.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel},o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),o=await this.tuneMldevInternal(i),a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Dr.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=kw(e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>us(h))}else{let d=Rw(e);return c=U("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>Xd(h))}}async listInternal(e){var n,i,o,a;let l,c="",f={};if(this.apiClient.isVertexAI()){let d=Lw(e);return c=U("tuningJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=Ww(h),y=new eo;return Object.assign(y,m),y})}else{let d=xw(e);return c=U("tunedModels",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{let y=m;return y.sdkHttpResponse={headers:h.headers},y})),l.then(h=>{let m=Hw(h),y=new eo;return Object.assign(y,m),y})}}async cancel(e){var n,i,o,a;let l="",c={};if(this.apiClient.isVertexAI()){let f=Uw(e);l=U("{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let f=Mw(e);l=U("{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Gw(e);return a=U("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>us(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=bw(e);return a=U("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{let h=d;return h.sdkHttpResponse={headers:f.headers},h})),o.then(f=>zw(f))}}};var ds=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},Qw=1024*1024*8,Yw=3,Xw=1e3,Zw=2,Mr="x-goog-upload-status";async function jw(t,e,n){var i,o,a;let l=0,c=0,f=new Jn(new Response),d="upload";for(l=t.size;c<l;){let m=Math.min(Qw,l-c),y=t.slice(c,c+m);c+m>=l&&(d+=", finalize");let I=0,P=Xw;for(;I<Yw&&(f=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[Mr]));)I++,await tA(P),P=P*Zw;if(c+=m,((o=f?.headers)===null||o===void 0?void 0:o[Mr])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let h=await f?.json();if(((a=f?.headers)===null||a===void 0?void 0:a[Mr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function eA(t){return{size:t.size,type:t.type}}function tA(t){return new Promise(e=>setTimeout(e,t))}var fs=class{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jw(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eA(e)}};var hs=class{create(e,n,i){return new ps(e,n,i)}},ps=class{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var yd="x-goog-api-key",ms=class{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(yd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yd,this.apiKey)}}};var nA="gl-node/",so=class{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let i=Om(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;let o=new ms(this.apiKey);this.apiClient=new es({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:nA+"web",uploader:new fs,downloader:new ds}),this.models=new ss(this.apiClient),this.live=new os(this.apiClient,o,new hs),this.batches=new Hr(this.apiClient),this.chats=new Kr(this.models,this.apiClient),this.caches=new zr(this.apiClient),this.files=new Qr(this.apiClient),this.operations=new as(this.apiClient),this.authTokens=new ls(this.apiClient),this.tunings=new cs(this.apiClient)}};var Ws={};Lm(Ws,{FirebaseError:()=>Se,SDK_VERSION:()=>ei,_DEFAULT_ENTRY_NAME:()=>Ge,_addComponent:()=>on,_addOrOverwriteComponent:()=>$s,_apps:()=>ut,_clearComponents:()=>cS,_components:()=>nn,_getProvider:()=>ct,_isFirebaseApp:()=>Hs,_isFirebaseServerApp:()=>zs,_isFirebaseServerAppSettings:()=>Pf,_registerComponent:()=>Re,_removeServiceInstance:()=>Rf,_serverApps:()=>tn,deleteApp:()=>To,getApp:()=>ti,getApps:()=>hS,initializeApp:()=>rn,initializeServerApp:()=>fS,onLog:()=>Ks,registerVersion:()=>oe,setLogLevel:()=>Js});var Zd=()=>{};var tf=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},iA=function(t){let e=[],n=0,i=0;for(;n<t.length;){let o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){let a=t[n++],l=t[n++],c=t[n++],f=((o&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{let a=t[n++],l=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|l&63)}}return e.join("")},nf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){let a=t[o],l=o+1<t.length,c=l?t[o+1]:0,f=o+2<t.length,d=f?t[o+2]:0,h=a>>2,m=(a&3)<<4|c>>4,y=(c&15)<<2|d>>6,I=d&63;f||(I=64,l||(y=64)),i.push(n[h],n[m],n[y],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){let a=n[t.charAt(o++)],c=o<t.length?n[t.charAt(o)]:0;++o;let d=o<t.length?n[t.charAt(o)]:64;++o;let m=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||c==null||d==null||m==null)throw new Cs;let y=a<<2|c>>4;if(i.push(y),d!==64){let I=c<<4&240|d>>2;if(i.push(I),m!==64){let P=d<<6&192|m;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Cs=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oA=function(t){let e=tf(t);return nf.encodeByteArray(e,!0)},Qn=function(t){return oA(t).replace(/\./g,"")},As=function(t){try{return nf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yn(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!rA(n)||(t[n]=Yn(t[n],e[n]));return t}function rA(t){return t!=="__proto__"}function co(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var sA=()=>co().__FIREBASE_DEFAULTS__,aA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&As(t[1]);return e&&JSON.parse(e)},Ss=()=>{try{return Zd()||sA()||aA()||lA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uA=t=>Ss()?.emulatorHosts?.[t],of=t=>{let e=uA(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},fo=()=>Ss()?.config;var uo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rf(t){return(await fetch(t,{credentials:"include"})).ok}function sf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Qn(JSON.stringify(n)),Qn(JSON.stringify(l)),""].join(".")}var Wn={};function cA(){let t={prod:[],emulator:[]};for(let e of Object.keys(Wn))Wn[e]?t.emulator.push(e):t.prod.push(e);return t}function dA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var jd=!1;function af(t,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||Wn[t]===e||Wn[t]||jd)return;Wn[t]=e;function n(y){return`__firebase__banner__${y}`}let i="__firebase__banner",a=cA().prod.length>0;function l(){let y=document.getElementById(i);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,I){y.setAttribute("width","24"),y.setAttribute("id",I),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{jd=!0,l()},y}function h(y,I){y.setAttribute("id",I),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){let y=dA(i),I=n("text"),P=document.getElementById(I)||document.createElement("span"),M=n("learnmore"),D=document.getElementById(M)||document.createElement("a"),F=n("preprendIcon"),b=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let k=y.element;c(k),h(D,M);let O=d();f(b,F),k.append(b,P,D,O),document.body.appendChild(k)}a?(P.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function lf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fA(){let t=Ss()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uf(){return typeof window<"u"||Rs()}function Rs(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function cf(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function df(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xn(){try{return typeof indexedDB=="object"}catch{return!1}}function po(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function ff(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var hA="FirebaseError",Se=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hA,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}},be=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],l=a?pA(a,i):"Error",c=`${this.serviceName}: ${l} (${o}).`;return new Se(o,c,i)}};function pA(t,e){return t.replace(mA,(n,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var mA=/\{\$([^}]+)}/g;function Ps(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wt(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let o of n){if(!i.includes(o))return!1;let a=t[o],l=e[o];if(ef(a)&&ef(l)){if(!wt(a,l))return!1}else if(a!==l)return!1}for(let o of i)if(!n.includes(o))return!1;return!0}function ef(t){return t!==null&&typeof t=="object"}function hf(t,e){let n=new ws(t,e);return n.subscribe.bind(n)}var ws=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Is),o.error===void 0&&(o.error=Is),o.complete===void 0&&(o.complete=Is);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gA(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Is(){}var yA=1e3,_A=2,TA=14400*1e3,vA=.5;function xs(t,e=yA,n=_A){let i=e*Math.pow(n,t),o=Math.round(vA*i*(Math.random()-.5)*2);return Math.min(TA,i+o)}function lt(t){return t&&t._delegate?t._delegate:t}var ye=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var At="[DEFAULT]";var Ms=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new uo;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IA(e))try{this.getOrInitializeService({instanceIdentifier:At})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(n);try{let a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=At){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=At){return this.instances.has(e)}getOptions(e=At){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[a,l]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(o)}return o}onInit(e,n){let i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:EA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=At){return this.component?this.component.multipleInstances?e:At:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function EA(t){return t===At?void 0:t}function IA(t){return t.instantiationMode==="EAGER"}var Zn=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ms(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Ds=[],J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));var pf={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},CA=J.INFO,wA={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},AA=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),o=wA[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Be=class{constructor(e){this.name=e,this._logLevel=CA,this._logHandler=AA,this._userLogHandler=null,Ds.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}};function mf(t){Ds.forEach(e=>{e.setLogLevel(t)})}function gf(t,e){for(let n of Ds){let i=null;e&&e.level&&(i=pf[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(o,a,...l)=>{let c=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(i??o.logLevel)&&t({level:J[a].toLowerCase(),message:c,args:l,type:o.name})}}}var SA=(t,e)=>e.some(n=>t instanceof n),yf,_f;function RA(){return yf||(yf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PA(){return _f||(_f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Tf=new WeakMap,Vs=new WeakMap,vf=new WeakMap,Ns=new WeakMap,ks=new WeakMap;function xA(t){let e=new Promise((n,i)=>{let o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Oe(t.result)),o()},l=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Tf.set(n,t)}).catch(()=>{}),ks.set(e,t),e}function MA(t){if(Vs.has(t))return;let e=new Promise((n,i)=>{let o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),o()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Vs.set(t,e)}var bs={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oe(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ef(t){bs=t(bs)}function DA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(mo(this),e,...n);return vf.set(i,e.sort?e.sort():[e]),Oe(i)}:PA().includes(t)?function(...e){return t.apply(mo(this),e),Oe(Tf.get(this))}:function(...e){return Oe(t.apply(mo(this),e))}}function NA(t){return typeof t=="function"?DA(t):(t instanceof IDBTransaction&&MA(t),SA(t,RA())?new Proxy(t,bs):t)}function Oe(t){if(t instanceof IDBRequest)return xA(t);if(Ns.has(t))return Ns.get(t);let e=NA(t);return e!==t&&(Ns.set(t,e),ks.set(e,t)),e}var mo=t=>ks.get(t);function go(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){let l=indexedDB.open(t,e),c=Oe(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Oe(l.result),f.oldVersion,f.newVersion,Oe(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var VA=["get","getKey","getAll","getAllKeys","count"],bA=["put","add","delete","clear"],Fs=new Map;function If(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fs.get(e))return Fs.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,o=bA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||VA.includes(n)))return;let a=async function(l,...c){let f=this.transaction(l,o?"readwrite":"readonly"),d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),o&&f.done]))[0]};return Fs.set(e,a),a}Ef(t=>({...t,get:(e,n,i)=>If(e,n)||t.get(e,n,i),has:(e,n)=>!!If(e,n)||t.has(e,n)}));var Us=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kA(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function kA(t){return t.getComponent()?.type==="VERSION"}var yo="@firebase/app",qs="0.14.4";var Qe=new Be("@firebase/app"),FA="@firebase/app-compat",LA="@firebase/analytics-compat",UA="@firebase/analytics",qA="@firebase/app-check-compat",BA="@firebase/app-check",OA="@firebase/auth",GA="@firebase/auth-compat",$A="@firebase/database",HA="@firebase/data-connect",zA="@firebase/database-compat",KA="@firebase/functions",JA="@firebase/functions-compat",WA="@firebase/installations",QA="@firebase/installations-compat",YA="@firebase/messaging",XA="@firebase/messaging-compat",ZA="@firebase/performance",jA="@firebase/performance-compat",eS="@firebase/remote-config",tS="@firebase/remote-config-compat",nS="@firebase/storage",iS="@firebase/storage-compat",oS="@firebase/firestore",rS="@firebase/ai",sS="@firebase/firestore-compat",aS="firebase",lS="12.4.0";var Ge="[DEFAULT]",uS={[yo]:"fire-core",[FA]:"fire-core-compat",[UA]:"fire-analytics",[LA]:"fire-analytics-compat",[BA]:"fire-app-check",[qA]:"fire-app-check-compat",[OA]:"fire-auth",[GA]:"fire-auth-compat",[$A]:"fire-rtdb",[HA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[KA]:"fire-fn",[JA]:"fire-fn-compat",[WA]:"fire-iid",[QA]:"fire-iid-compat",[YA]:"fire-fcm",[XA]:"fire-fcm-compat",[ZA]:"fire-perf",[jA]:"fire-perf-compat",[eS]:"fire-rc",[tS]:"fire-rc-compat",[nS]:"fire-gcs",[iS]:"fire-gcs-compat",[oS]:"fire-fst",[sS]:"fire-fst-compat",[rS]:"fire-vertex","fire-js":"fire-js",[aS]:"fire-js-all"};var ut=new Map,tn=new Map,nn=new Map;function on(t,e){try{t.container.addComponent(e)}catch(n){Qe.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $s(t,e){t.container.addOrOverwriteComponent(e)}function Re(t){let e=t.name;if(nn.has(e))return Qe.debug(`There were multiple attempts to register component ${e}.`),!1;nn.set(e,t);for(let n of ut.values())on(n,t);for(let n of tn.values())on(n,t);return!0}function ct(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rf(t,e,n=Ge){ct(t,e).clearInstance(n)}function Hs(t){return t.options!==void 0}function Pf(t){return Hs(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function zs(t){return t==null?!1:t.settings!==void 0}function cS(){nn.clear()}var dS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xe=new be("app","Firebase",dS);var _o=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ye("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xe.create("app-deleted",{appName:this._name})}};function Cf(t,e){let n=As(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}let o=JSON.parse(n).exp*1e3,a=new Date().getTime();o-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}var Bs=class extends _o{constructor(e,n,i,o){let a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,o);else{let c=e;super(c.options,l,o)}this._serverConfig={automaticDataCollectionEnabled:a,...n},this._serverConfig.authIdToken&&Cf(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Cf(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,oe(yo,qs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){To(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw xe.create("server-app-deleted")}};var ei=lS;function rn(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i={name:Ge,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw xe.create("bad-app-name",{appName:String(o)});if(n||(n=fo()),!n)throw xe.create("no-options");let a=ut.get(o);if(a){if(wt(n,a.options)&&wt(i,a.config))return a;throw xe.create("duplicate-app",{appName:o})}let l=new Zn(o);for(let f of nn.values())l.addComponent(f);let c=new _o(n,i,l);return ut.set(o,c),c}function fS(t,e={}){if(uf()&&!Rs())throw xe.create("invalid-server-app-environment");let n,i=e||{};if(t&&(Hs(t)?n=t.options:Pf(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=fo()),!n)throw xe.create("no-options");let o={...i,...n};o.releaseOnDeref!==void 0&&delete o.releaseOnDeref;let a=h=>[...h].reduce((m,y)=>Math.imul(31,m)+y.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw xe.create("finalization-registry-not-supported",{});let l=""+a(JSON.stringify(o)),c=tn.get(l);if(c)return c.incRefCount(i.releaseOnDeref),c;let f=new Zn(l);for(let h of nn.values())f.addComponent(h);let d=new Bs(n,i,l,f);return tn.set(l,d),d}function ti(t=Ge){let e=ut.get(t);if(!e&&t===Ge&&fo())return rn();if(!e)throw xe.create("no-app",{appName:t});return e}function hS(){return Array.from(ut.values())}async function To(t){let e=!1,n=t.name;ut.has(n)?(e=!0,ut.delete(n)):tn.has(n)&&t.decRefCount()<=0&&(tn.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function oe(t,e,n){let i=uS[t]??t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qe.warn(l.join(" "));return}Re(new ye(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Ks(t,e){if(t!==null&&typeof t!="function")throw xe.create("invalid-log-argument");gf(t,e)}function Js(t){mf(t)}var pS="firebase-heartbeat-database",mS=1,jn="firebase-heartbeat-store",Ls=null;function xf(){return Ls||(Ls=go(pS,mS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jn)}catch(n){console.warn(n)}}}}).catch(t=>{throw xe.create("idb-open",{originalErrorMessage:t.message})})),Ls}async function gS(t){try{let n=(await xf()).transaction(jn),i=await n.objectStore(jn).get(Mf(t));return await n.done,i}catch(e){if(e instanceof Se)Qe.warn(e.message);else{let n=xe.create("idb-get",{originalErrorMessage:e?.message});Qe.warn(n.message)}}}async function wf(t,e){try{let i=(await xf()).transaction(jn,"readwrite");await i.objectStore(jn).put(e,Mf(t)),await i.done}catch(n){if(n instanceof Se)Qe.warn(n.message);else{let i=xe.create("idb-set",{originalErrorMessage:n?.message});Qe.warn(i.message)}}}function Mf(t){return`${t.name}!${t.options.appId}`}var yS=1024,_S=30,Os=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Gs(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Af();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>_S){let o=vS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qe.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Af(),{heartbeatsToSend:n,unsentEntries:i}=TS(this._heartbeatsCache.heartbeats),o=Qn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Qe.warn(e),""}}};function Af(){return new Date().toISOString().substring(0,10)}function TS(t,e=yS){let n=[],i=t.slice();for(let o of t){let a=n.find(l=>l.agent===o.agent);if(a){if(a.dates.push(o.date),Sf(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Sf(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Gs=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xn()?po().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await gS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return wf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return wf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Sf(t){return Qn(JSON.stringify({version:2,heartbeats:t})).length}function vS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function ES(t){Re(new ye("platform-logger",e=>new Us(e),"PRIVATE")),Re(new ye("heartbeat",e=>new Os(e),"PRIVATE")),oe(yo,qs,t),oe(yo,qs,"esm2020"),oe("fire-js","")}ES("");var IS="firebase",CS="12.4.0";oe(IS,CS,"app");var Vf="@firebase/installations",Zs="0.6.19";var bf=1e4,kf=`w:${Zs}`,Ff="FIS_v2",wS="https://firebaseinstallations.googleapis.com/v1",AS=3600*1e3,SS="installations",RS="Installations";var PS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rt=new be(SS,RS,PS);function Lf(t){return t instanceof Se&&t.code.includes("request-failed")}function Uf({projectId:t}){return`${wS}/projects/${t}/installations`}function qf(t){return{token:t.token,requestStatus:2,expiresIn:MS(t.expiresIn),creationTime:Date.now()}}async function Bf(t,e){let i=(await e.json()).error;return Rt.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Of({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xS(t,{refreshToken:e}){let n=Of(t);return n.append("Authorization",DS(e)),n}async function Gf(t){let e=await t();return e.status>=500&&e.status<600?t():e}function MS(t){return Number(t.replace("s","000"))}function DS(t){return`${Ff} ${t}`}async function NS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let i=Uf(t),o=Of(t),a=e.getImmediate({optional:!0});if(a){let d=await a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let l={fid:n,authVersion:Ff,appId:t.appId,sdkVersion:kf},c={method:"POST",headers:o,body:JSON.stringify(l)},f=await Gf(()=>fetch(i,c));if(f.ok){let d=await f.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:qf(d.authToken)}}else throw await Bf("Create Installation",f)}function $f(t){return new Promise(e=>{setTimeout(e,t)})}function VS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var bS=/^[cdef][\w-]{21}$/,Xs="";function kS(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=FS(t);return bS.test(n)?n:Xs}catch{return Xs}}function FS(t){return VS(t).substr(0,22)}function Eo(t){return`${t.appName}!${t.appId}`}var Hf=new Map;function zf(t,e){let n=Eo(t);Kf(n,e),LS(n,e)}function Kf(t,e){let n=Hf.get(t);if(n)for(let i of n)i(e)}function LS(t,e){let n=US();n&&n.postMessage({key:t,fid:e}),qS()}var St=null;function US(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=t=>{Kf(t.data.key,t.data.fid)}),St}function qS(){Hf.size===0&&St&&(St.close(),St=null)}var BS="firebase-installations-database",OS=1,Pt="firebase-installations-store",Qs=null;function js(){return Qs||(Qs=go(BS,OS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pt)}}})),Qs}async function vo(t,e){let n=Eo(t),o=(await js()).transaction(Pt,"readwrite"),a=o.objectStore(Pt),l=await a.get(n);return await a.put(e,n),await o.done,(!l||l.fid!==e.fid)&&zf(t,e.fid),e}async function Jf(t){let e=Eo(t),i=(await js()).transaction(Pt,"readwrite");await i.objectStore(Pt).delete(e),await i.done}async function Io(t,e){let n=Eo(t),o=(await js()).transaction(Pt,"readwrite"),a=o.objectStore(Pt),l=await a.get(n),c=e(l);return c===void 0?await a.delete(n):await a.put(c,n),await o.done,c&&(!l||l.fid!==c.fid)&&zf(t,c.fid),c}async function ea(t){let e,n=await Io(t.appConfig,i=>{let o=GS(i),a=$S(t,o);return e=a.registrationPromise,a.installationEntry});return n.fid===Xs?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function GS(t){let e=t||{fid:kS(),registrationStatus:0};return Wf(e)}function $S(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let o=Promise.reject(Rt.create("app-offline"));return{installationEntry:e,registrationPromise:o}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=HS(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zS(t)}:{installationEntry:e}}async function HS(t,e){try{let n=await NS(t,e);return vo(t.appConfig,n)}catch(n){throw Lf(n)&&n.customData.serverCode===409?await Jf(t.appConfig):await vo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zS(t){let e=await Df(t.appConfig);for(;e.registrationStatus===1;)await $f(100),e=await Df(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=await ea(t);return i||n}return e}function Df(t){return Io(t,e=>{if(!e)throw Rt.create("installation-not-found");return Wf(e)})}function Wf(t){return KS(t)?{fid:t.fid,registrationStatus:0}:t}function KS(t){return t.registrationStatus===1&&t.registrationTime+bf<Date.now()}async function JS({appConfig:t,heartbeatServiceProvider:e},n){let i=WS(t,n),o=xS(t,n),a=e.getImmediate({optional:!0});if(a){let d=await a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let l={installation:{sdkVersion:kf,appId:t.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},f=await Gf(()=>fetch(i,c));if(f.ok){let d=await f.json();return qf(d)}else throw await Bf("Generate Auth Token",f)}function WS(t,{fid:e}){return`${Uf(t)}/${e}/authTokens:generate`}async function ta(t,e=!1){let n,i=await Io(t.appConfig,a=>{if(!Qf(a))throw Rt.create("not-registered");let l=a.authToken;if(!e&&XS(l))return a;if(l.requestStatus===1)return n=QS(t,e),a;{if(!navigator.onLine)throw Rt.create("app-offline");let c=jS(a);return n=YS(t,c),c}});return n?await n:i.authToken}async function QS(t,e){let n=await Nf(t.appConfig);for(;n.authToken.requestStatus===1;)await $f(100),n=await Nf(t.appConfig);let i=n.authToken;return i.requestStatus===0?ta(t,e):i}function Nf(t){return Io(t,e=>{if(!Qf(e))throw Rt.create("not-registered");let n=e.authToken;return eR(n)?{...e,authToken:{requestStatus:0}}:e})}async function YS(t,e){try{let n=await JS(t,e),i={...e,authToken:n};return await vo(t.appConfig,i),n}catch(n){if(Lf(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Jf(t.appConfig);else{let i={...e,authToken:{requestStatus:0}};await vo(t.appConfig,i)}throw n}}function Qf(t){return t!==void 0&&t.registrationStatus===2}function XS(t){return t.requestStatus===2&&!ZS(t)}function ZS(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+AS}function jS(t){let e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function eR(t){return t.requestStatus===1&&t.requestTime+bf<Date.now()}async function tR(t){let e=t,{installationEntry:n,registrationPromise:i}=await ea(e);return i?i.catch(console.error):ta(e).catch(console.error),n.fid}async function nR(t,e=!1){let n=t;return await iR(n),(await ta(n,e)).token}async function iR(t){let{registrationPromise:e}=await ea(t);e&&await e}function oR(t){if(!t||!t.options)throw Ys("App Configuration");if(!t.name)throw Ys("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Ys(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ys(t){return Rt.create("missing-app-config-values",{valueName:t})}var Yf="installations",rR="installations-internal",sR=t=>{let e=t.getProvider("app").getImmediate(),n=oR(e),i=ct(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},aR=t=>{let e=t.getProvider("app").getImmediate(),n=ct(e,Yf).getImmediate();return{getId:()=>tR(n),getToken:o=>nR(n,o)}};function lR(){Re(new ye(Yf,sR,"PUBLIC")),Re(new ye(rR,aR,"PRIVATE"))}lR();oe(Vf,Zs);oe(Vf,Zs,"esm2020");var Xf="analytics",uR="firebase_id",cR="origin",dR=60*1e3,fR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",la="https://www.googletagmanager.com/gtag/js";var Ae=new Be("@firebase/analytics");var hR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ke=new be("analytics","Analytics",hR);function pR(t){if(!t.startsWith(la)){let e=ke.create("invalid-gtag-resource",{gtagURL:t});return Ae.warn(e.message),""}return t}function oh(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gR(t,e){let n=mR("firebase-js-sdk-policy",{createScriptURL:pR}),i=document.createElement("script"),o=`${la}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function yR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _R(t,e,n,i,o,a){let l=i[o];try{if(l)await e[l];else{let f=(await oh(n)).find(d=>d.measurementId===o);f&&await e[f.appId]}}catch(c){Ae.error(c)}t("config",o,a)}async function TR(t,e,n,i,o){try{let a=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);let c=await oh(n);for(let f of l){let d=c.find(m=>m.measurementId===f),h=d&&e[d.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",i,o||{})}catch(a){Ae.error(a)}}function vR(t,e,n,i){async function o(a,...l){try{if(a==="event"){let[c,f]=l;await TR(t,e,n,c,f)}else if(a==="config"){let[c,f]=l;await _R(t,e,n,i,c,f)}else if(a==="consent"){let[c,f]=l;t("consent",c,f)}else if(a==="get"){let[c,f,d]=l;t("get",c,f,d)}else if(a==="set"){let[c]=l;t("set",c)}else t(a,...l)}catch(c){Ae.error(c)}}return o}function ER(t,e,n,i,o){let a=function(...l){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=vR(a,t,e,n),{gtagCore:a,wrappedGtag:window[o]}}function IR(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(la)&&n.src.includes(t))return n;return null}var CR=30,wR=1e3,ia=class{constructor(e={},n=wR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},rh=new ia;function AR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function SR(t){let{appId:e,apiKey:n}=t,i={method:"GET",headers:AR(n)},o=fR.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let l="";try{let c=await a.json();c.error?.message&&(l=c.error.message)}catch{}throw ke.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function RR(t,e=rh,n){let{appId:i,apiKey:o,measurementId:a}=t.options;if(!i)throw ke.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw ke.create("no-api-key")}let l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new oa;return setTimeout(async()=>{c.abort()},n!==void 0?n:dR),sh({appId:i,apiKey:o,measurementId:a},l,c,e)}async function sh(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=rh){let{appId:a,measurementId:l}=t;try{await PR(i,e)}catch(c){if(l)return Ae.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:l};throw c}try{let c=await SR(t);return o.deleteThrottleMetadata(a),c}catch(c){let f=c;if(!xR(f)){if(o.deleteThrottleMetadata(a),l)return Ae.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:a,measurementId:l};throw c}let d=Number(f?.customData?.httpStatus)===503?xs(n,o.intervalMillis,CR):xs(n,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return o.setThrottleMetadata(a,h),Ae.debug(`Calling attemptFetch again in ${d} millis`),sh(t,h,i,o)}}function PR(t,e){return new Promise((n,i)=>{let o=Math.max(e-Date.now(),0),a=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(a),i(ke.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xR(t){if(!(t instanceof Se)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var oa=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var ra;async function MR(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{let a=await e,l={...i,send_to:a};t("event",n,l)}}async function DR(t,e,n,i){if(i&&i.global){let o={};for(let a of Object.keys(n))o[`user_properties.${a}`]=n[a];return t("set",o),Promise.resolve()}else{let o=await e;t("config",o,{update:!0,user_properties:n})}}var sa;function NR(t){sa=t}function VR(t){ra=t}async function bR(){if(Xn())try{await po()}catch(t){return Ae.warn(ke.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Ae.warn(ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kR(t,e,n,i,o,a,l){let c=RR(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ae.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ae.error(y)),e.push(c);let f=bR().then(y=>{if(y)return i.getId()}),[d,h]=await Promise.all([c,f]);IR(a)||gR(a,d.measurementId),sa&&(o("consent","default",sa),NR(void 0)),o("js",new Date);let m=l?.config??{};return m[cR]="firebase",m.update=!0,h!=null&&(m[uR]=h),o("config",d.measurementId,m),ra&&(o("set",ra),VR(void 0)),d.measurementId}var aa=class{constructor(e){this.app=e}_delete(){return delete sn[this.app.options.appId],Promise.resolve()}},sn={},Zf=[],jf={},na="dataLayer",FR="gtag",eh,ua,th=!1;function LR(){let t=[];if(cf()&&t.push("This is a browser extension environment."),ff()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=ke.create("invalid-analytics-context",{errorInfo:e});Ae.warn(n.message)}}function UR(t,e,n){LR();let i=t.options.appId;if(!i)throw ke.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ae.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ke.create("no-api-key");if(sn[i]!=null)throw ke.create("already-exists",{id:i});if(!th){yR(na);let{wrappedGtag:a,gtagCore:l}=ER(sn,Zf,jf,na,FR);ua=a,eh=l,th=!0}return sn[i]=kR(t,Zf,jf,e,eh,na,n),new aa(t)}function qR(t,e,n){t=lt(t),DR(ua,sn[t.app.options.appId],e,n).catch(i=>Ae.error(i))}function BR(t,e,n,i){t=lt(t),MR(ua,sn[t.app.options.appId],e,n,i).catch(o=>Ae.error(o))}var nh="@firebase/analytics",ih="0.10.19";function OR(){Re(new ye(Xf,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return UR(i,o,n)},"PUBLIC")),Re(new ye("analytics-internal",t,"PRIVATE")),oe(nh,ih),oe(nh,ih,"esm2020");function t(e){try{let n=e.getProvider(Xf).getImmediate();return{logEvent:(i,o,a)=>BR(n,i,o,a),setUserProperties:(i,o)=>qR(n,i,o)}}catch(n){throw ke.create("interop-component-reg-failed",{reason:n})}}}OR();var GR={apiKey:"AIzaSyCr4M9P3l4tDs5menc6gFEj8Uqxnoqx394",authDomain:"notestaker-c0265.firebaseapp.com",projectId:"notestaker-c0265",storageBucket:"notestaker-c0265.firebasestorage.app",messagingSenderId:"569413967619",appId:"1:569413967619:web:877077431ea1c993501336",measurementId:"G-905PV5XC6Q"},$R=rn(GR),ah=$R;var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uh={};var Co,ch;(function(){var t;function e(w,v){function T(){}T.prototype=v.prototype,w.F=v.prototype,w.prototype=new T,w.prototype.constructor=w,w.D=function(A,C,S){for(var E=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)E[ge-2]=arguments[ge];return v.prototype[C].apply(A,E)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(w,v,T){T||(T=0);let A=Array(16);if(typeof v=="string")for(var C=0;C<16;++C)A[C]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(C=0;C<16;++C)A[C]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=w.g[0],T=w.g[1],C=w.g[2];let S=w.g[3],E;E=v+(S^T&(C^S))+A[0]+3614090360&4294967295,v=T+(E<<7&4294967295|E>>>25),E=S+(C^v&(T^C))+A[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=C+(T^S&(v^T))+A[2]+606105819&4294967295,C=S+(E<<17&4294967295|E>>>15),E=T+(v^C&(S^v))+A[3]+3250441966&4294967295,T=C+(E<<22&4294967295|E>>>10),E=v+(S^T&(C^S))+A[4]+4118548399&4294967295,v=T+(E<<7&4294967295|E>>>25),E=S+(C^v&(T^C))+A[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=C+(T^S&(v^T))+A[6]+2821735955&4294967295,C=S+(E<<17&4294967295|E>>>15),E=T+(v^C&(S^v))+A[7]+4249261313&4294967295,T=C+(E<<22&4294967295|E>>>10),E=v+(S^T&(C^S))+A[8]+1770035416&4294967295,v=T+(E<<7&4294967295|E>>>25),E=S+(C^v&(T^C))+A[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=C+(T^S&(v^T))+A[10]+4294925233&4294967295,C=S+(E<<17&4294967295|E>>>15),E=T+(v^C&(S^v))+A[11]+2304563134&4294967295,T=C+(E<<22&4294967295|E>>>10),E=v+(S^T&(C^S))+A[12]+1804603682&4294967295,v=T+(E<<7&4294967295|E>>>25),E=S+(C^v&(T^C))+A[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=C+(T^S&(v^T))+A[14]+2792965006&4294967295,C=S+(E<<17&4294967295|E>>>15),E=T+(v^C&(S^v))+A[15]+1236535329&4294967295,T=C+(E<<22&4294967295|E>>>10),E=v+(C^S&(T^C))+A[1]+4129170786&4294967295,v=T+(E<<5&4294967295|E>>>27),E=S+(T^C&(v^T))+A[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=C+(v^T&(S^v))+A[11]+643717713&4294967295,C=S+(E<<14&4294967295|E>>>18),E=T+(S^v&(C^S))+A[0]+3921069994&4294967295,T=C+(E<<20&4294967295|E>>>12),E=v+(C^S&(T^C))+A[5]+3593408605&4294967295,v=T+(E<<5&4294967295|E>>>27),E=S+(T^C&(v^T))+A[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=C+(v^T&(S^v))+A[15]+3634488961&4294967295,C=S+(E<<14&4294967295|E>>>18),E=T+(S^v&(C^S))+A[4]+3889429448&4294967295,T=C+(E<<20&4294967295|E>>>12),E=v+(C^S&(T^C))+A[9]+568446438&4294967295,v=T+(E<<5&4294967295|E>>>27),E=S+(T^C&(v^T))+A[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=C+(v^T&(S^v))+A[3]+4107603335&4294967295,C=S+(E<<14&4294967295|E>>>18),E=T+(S^v&(C^S))+A[8]+1163531501&4294967295,T=C+(E<<20&4294967295|E>>>12),E=v+(C^S&(T^C))+A[13]+2850285829&4294967295,v=T+(E<<5&4294967295|E>>>27),E=S+(T^C&(v^T))+A[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=C+(v^T&(S^v))+A[7]+1735328473&4294967295,C=S+(E<<14&4294967295|E>>>18),E=T+(S^v&(C^S))+A[12]+2368359562&4294967295,T=C+(E<<20&4294967295|E>>>12),E=v+(T^C^S)+A[5]+4294588738&4294967295,v=T+(E<<4&4294967295|E>>>28),E=S+(v^T^C)+A[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=C+(S^v^T)+A[11]+1839030562&4294967295,C=S+(E<<16&4294967295|E>>>16),E=T+(C^S^v)+A[14]+4259657740&4294967295,T=C+(E<<23&4294967295|E>>>9),E=v+(T^C^S)+A[1]+2763975236&4294967295,v=T+(E<<4&4294967295|E>>>28),E=S+(v^T^C)+A[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=C+(S^v^T)+A[7]+4139469664&4294967295,C=S+(E<<16&4294967295|E>>>16),E=T+(C^S^v)+A[10]+3200236656&4294967295,T=C+(E<<23&4294967295|E>>>9),E=v+(T^C^S)+A[13]+681279174&4294967295,v=T+(E<<4&4294967295|E>>>28),E=S+(v^T^C)+A[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=C+(S^v^T)+A[3]+3572445317&4294967295,C=S+(E<<16&4294967295|E>>>16),E=T+(C^S^v)+A[6]+76029189&4294967295,T=C+(E<<23&4294967295|E>>>9),E=v+(T^C^S)+A[9]+3654602809&4294967295,v=T+(E<<4&4294967295|E>>>28),E=S+(v^T^C)+A[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=C+(S^v^T)+A[15]+530742520&4294967295,C=S+(E<<16&4294967295|E>>>16),E=T+(C^S^v)+A[2]+3299628645&4294967295,T=C+(E<<23&4294967295|E>>>9),E=v+(C^(T|~S))+A[0]+4096336452&4294967295,v=T+(E<<6&4294967295|E>>>26),E=S+(T^(v|~C))+A[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=C+(v^(S|~T))+A[14]+2878612391&4294967295,C=S+(E<<15&4294967295|E>>>17),E=T+(S^(C|~v))+A[5]+4237533241&4294967295,T=C+(E<<21&4294967295|E>>>11),E=v+(C^(T|~S))+A[12]+1700485571&4294967295,v=T+(E<<6&4294967295|E>>>26),E=S+(T^(v|~C))+A[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=C+(v^(S|~T))+A[10]+4293915773&4294967295,C=S+(E<<15&4294967295|E>>>17),E=T+(S^(C|~v))+A[1]+2240044497&4294967295,T=C+(E<<21&4294967295|E>>>11),E=v+(C^(T|~S))+A[8]+1873313359&4294967295,v=T+(E<<6&4294967295|E>>>26),E=S+(T^(v|~C))+A[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=C+(v^(S|~T))+A[6]+2734768916&4294967295,C=S+(E<<15&4294967295|E>>>17),E=T+(S^(C|~v))+A[13]+1309151649&4294967295,T=C+(E<<21&4294967295|E>>>11),E=v+(C^(T|~S))+A[4]+4149444226&4294967295,v=T+(E<<6&4294967295|E>>>26),E=S+(T^(v|~C))+A[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=C+(v^(S|~T))+A[2]+718787259&4294967295,C=S+(E<<15&4294967295|E>>>17),E=T+(S^(C|~v))+A[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+S&4294967295}i.prototype.v=function(w,v){v===void 0&&(v=w.length);let T=v-this.blockSize,A=this.C,C=this.h,S=0;for(;S<v;){if(C==0)for(;S<=T;)o(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(A[C++]=w.charCodeAt(S++),C==this.blockSize){o(this,A),C=0;break}}else for(;S<v;)if(A[C++]=w[S++],C==this.blockSize){o(this,A),C=0;break}}this.h=C,this.o+=v},i.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var T=w.length-8;T<w.length;++T)w[T]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)w[v++]=this.g[T]>>>A&255;return w};function a(w,v){var T=c;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=v(w)}function l(w,v){this.h=v;let T=[],A=!0;for(let C=w.length-1;C>=0;C--){let S=w[C]|0;A&&S==v||(T[C]=S,A=!1)}this.g=T}var c={};function f(w){return-128<=w&&w<128?a(w,function(v){return new l([v|0],v<0?-1:0)}):new l([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return D(d(-w));let v=[],T=1;for(let A=0;w>=T;A++)v[A]=w/T|0,T*=4294967296;return new l(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return D(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let T=d(Math.pow(v,8)),A=m;for(let S=0;S<w.length;S+=8){var C=Math.min(8,w.length-S);let E=parseInt(w.substring(S,S+C),v);C<8?(C=d(Math.pow(v,C)),A=A.j(C).add(d(E))):(A=A.j(T),A=A.add(d(E)))}return A}var m=f(0),y=f(1),I=f(16777216);t=l.prototype,t.m=function(){if(M(this))return-D(this).m();let w=0,v=1;for(let T=0;T<this.g.length;T++){let A=this.i(T);w+=(A>=0?A:4294967296+A)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(M(this))return"-"+D(this).toString(w);let v=d(Math.pow(w,6));var T=this;let A="";for(;;){let C=O(T,v).g;T=F(T,C.j(v));let S=((T.g.length>0?T.g[0]:T.h)>>>0).toString(w);if(T=C,P(T))return S+A;for(;S.length<6;)S="0"+S;A=S+A}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}t.l=function(w){return w=F(this,w),M(w)?-1:P(w)?0:1};function D(w){let v=w.g.length,T=[];for(let A=0;A<v;A++)T[A]=~w.g[A];return new l(T,~w.h).add(y)}t.abs=function(){return M(this)?D(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),T=[],A=0;for(let C=0;C<=v;C++){let S=A+(this.i(C)&65535)+(w.i(C)&65535),E=(S>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);A=E>>>16,S&=65535,E&=65535,T[C]=E<<16|S}return new l(T,T[T.length-1]&-2147483648?-1:0)};function F(w,v){return w.add(D(v))}t.j=function(w){if(P(this)||P(w))return m;if(M(this))return M(w)?D(this).j(D(w)):D(D(this).j(w));if(M(w))return D(this.j(D(w)));if(this.l(I)<0&&w.l(I)<0)return d(this.m()*w.m());let v=this.g.length+w.g.length,T=[];for(var A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let C=0;C<w.g.length;C++){let S=this.i(A)>>>16,E=this.i(A)&65535,ge=w.i(C)>>>16,fe=w.i(C)&65535;T[2*A+2*C]+=E*fe,b(T,2*A+2*C),T[2*A+2*C+1]+=S*fe,b(T,2*A+2*C+1),T[2*A+2*C+1]+=E*ge,b(T,2*A+2*C+1),T[2*A+2*C+2]+=S*ge,b(T,2*A+2*C+2)}for(w=0;w<v;w++)T[w]=T[2*w+1]<<16|T[2*w];for(w=v;w<2*v;w++)T[w]=0;return new l(T,0)};function b(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function k(w,v){this.g=w,this.h=v}function O(w,v){if(P(v))throw Error("division by zero");if(P(w))return new k(m,m);if(M(w))return v=O(D(w),v),new k(D(v.g),D(v.h));if(M(v))return v=O(w,D(v)),new k(D(v.g),v.h);if(w.g.length>30){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var T=y,A=v;A.l(w)<=0;)T=q(T),A=q(A);var C=$(T,1),S=$(A,1);for(A=$(A,2),T=$(T,2);!P(A);){var E=S.add(A);E.l(w)<=0&&(C=C.add(T),S=E),A=$(A,1),T=$(T,1)}return v=F(w,C.j(v)),new k(C,v)}for(C=m;w.l(v)>=0;){for(T=Math.max(1,Math.floor(w.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),S=d(T),E=S.j(v);M(E)||E.l(w)>0;)T-=A,S=d(T),E=S.j(v);P(S)&&(S=y),C=C.add(S),w=F(w,E)}return new k(C,w)}t.B=function(w){return O(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)&w.i(A);return new l(T,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)|w.i(A);return new l(T,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)^w.i(A);return new l(T,this.h^w.h)};function q(w){let v=w.g.length+1,T=[];for(let A=0;A<v;A++)T[A]=w.i(A)<<1|w.i(A-1)>>>31;return new l(T,w.h)}function $(w,v){let T=v>>5;v%=32;let A=w.g.length-T,C=[];for(let S=0;S<A;S++)C[S]=v>0?w.i(S+T)>>>v|w.i(S+T+1)<<32-v:w.i(S+T);return new l(C,w.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ch=uh.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=h,Co=uh.Integer=l}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});var wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={};var ca,HR,an,da,ni,Ao,fa,ha,pa;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wo=="object"&&wo];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function o(u,p){if(p)e:{var g=i;u=u.split(".");for(var _=0;_<u.length-1;_++){var R=u[_];if(!(R in g))break e;g=g[R]}u=u[u.length-1],_=g[u],p=p(_),p!=_&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var g=[],_;for(_ in p)Object.prototype.hasOwnProperty.call(p,_)&&g.push([_,p[_]]);return g}});var a=a||{},l=this||self;function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function f(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){return d=f,d.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function m(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(_,R,x){for(var L=Array(arguments.length-2),H=2;H<arguments.length;H++)L[H-2]=arguments[H];return p.prototype[R].apply(_,L)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function I(u){let p=u.length;if(p>0){let g=Array(p);for(let _=0;_<p;_++)g[_]=u[_];return g}return[]}function P(u,p){for(let _=1;_<arguments.length;_++){let R=arguments[_];var g=typeof R;if(g=g!="object"?g:R?Array.isArray(R)?"array":g:"null",g=="array"||g=="object"&&typeof R.length=="number"){g=u.length||0;let x=R.length||0;u.length=g+x;for(let L=0;L<x;L++)u[g+L]=R[L]}else u.push(R)}}class M{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function D(u){l.setTimeout(()=>{throw u},0)}function F(){var u=w;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,g){let _=k.get();_.set(p,g),this.h?this.h.next=_:this.g=_,this.h=_}}var k=new M(()=>new O,u=>u.reset());class O{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let q,$=!1,w=new b,v=()=>{let u=Promise.resolve(void 0);q=()=>{u.then(T)}};function T(){for(var u;u=F();){try{u.h.call(u.g)}catch(g){D(g)}var p=k;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}$=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};l.addEventListener("test",g,p),l.removeEventListener("test",g,p)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function ge(u,p){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}m(ge,C),ge.prototype.init=function(u,p){let g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),xn=0;function sm(u,p,g,_,R){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!_,this.ha=R,this.key=++xn,this.da=this.fa=!1}function Ri(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pi(u,p,g){for(let _ in u)p.call(g,u[_],_,u)}function am(u,p){for(let g in u)p.call(void 0,u[g],g,u)}function ou(u){let p={};for(let g in u)p[g]=u[g];return p}let ru="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function su(u,p){let g,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(g in _)u[g]=_[g];for(let x=0;x<ru.length;x++)g=ru[x],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function xi(u){this.src=u,this.g={},this.h=0}xi.prototype.add=function(u,p,g,_,R){let x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);let L=rr(u,p,_,R);return L>-1?(p=u[L],g||(p.fa=!1)):(p=new sm(p,this.src,x,!!_,R),p.fa=g,u.push(p)),p};function or(u,p){let g=p.type;if(g in u.g){var _=u.g[g],R=Array.prototype.indexOf.call(_,p,void 0),x;(x=R>=0)&&Array.prototype.splice.call(_,R,1),x&&(Ri(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function rr(u,p,g,_){for(let R=0;R<u.length;++R){let x=u[R];if(!x.da&&x.listener==p&&x.capture==!!g&&x.ha==_)return R}return-1}var sr="closure_lm_"+(Math.random()*1e6|0),ar={};function au(u,p,g,_,R){if(_&&_.once)return uu(u,p,g,_,R);if(Array.isArray(p)){for(let x=0;x<p.length;x++)au(u,p[x],g,_,R);return null}return g=dr(g),u&&u[fe]?u.J(p,g,c(_)?!!_.capture:!!_,R):lu(u,p,g,!1,_,R)}function lu(u,p,g,_,R,x){if(!p)throw Error("Invalid event type");let L=c(R)?!!R.capture:!!R,H=ur(u);if(H||(u[sr]=H=new xi(u)),g=H.add(p,g,_,L,x),g.proxy)return g;if(_=lm(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)S||(R=L),R===void 0&&(R=!1),u.addEventListener(p.toString(),_,R);else if(u.attachEvent)u.attachEvent(du(p.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function lm(){function u(g){return p.call(u.src,u.listener,g)}let p=um;return u}function uu(u,p,g,_,R){if(Array.isArray(p)){for(let x=0;x<p.length;x++)uu(u,p[x],g,_,R);return null}return g=dr(g),u&&u[fe]?u.K(p,g,c(_)?!!_.capture:!!_,R):lu(u,p,g,!0,_,R)}function cu(u,p,g,_,R){if(Array.isArray(p))for(var x=0;x<p.length;x++)cu(u,p[x],g,_,R);else _=c(_)?!!_.capture:!!_,g=dr(g),u&&u[fe]?(u=u.i,x=String(p).toString(),x in u.g&&(p=u.g[x],g=rr(p,g,_,R),g>-1&&(Ri(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[x],u.h--)))):u&&(u=ur(u))&&(p=u.g[p.toString()],u=-1,p&&(u=rr(p,g,_,R)),(g=u>-1?p[u]:null)&&lr(g))}function lr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[fe])or(p.i,u);else{var g=u.type,_=u.proxy;p.removeEventListener?p.removeEventListener(g,_,u.capture):p.detachEvent?p.detachEvent(du(g),_):p.addListener&&p.removeListener&&p.removeListener(_),(g=ur(p))?(or(g,u),g.h==0&&(g.src=null,p[sr]=null)):Ri(u)}}}function du(u){return u in ar?ar[u]:ar[u]="on"+u}function um(u,p){if(u.da)u=!0;else{p=new ge(p,this);let g=u.listener,_=u.ha||u.src;u.fa&&lr(u),u=g.call(_,p)}return u}function ur(u){return u=u[sr],u instanceof xi?u:null}var cr="__closure_events_fn_"+(Math.random()*1e9>>>0);function dr(u){return typeof u=="function"?u:(u[cr]||(u[cr]=function(p){return u.handleEvent(p)}),u[cr])}function _e(){A.call(this),this.i=new xi(this),this.M=this,this.G=null}m(_e,A),_e.prototype[fe]=!0,_e.prototype.removeEventListener=function(u,p,g,_){cu(this,u,p,g,_)};function Ce(u,p){var g,_=u.G;if(_)for(g=[];_;_=_.G)g.push(_);if(u=u.M,_=p.type||p,typeof p=="string")p=new C(p,u);else if(p instanceof C)p.target=p.target||u;else{var R=p;p=new C(_,u),su(p,R)}R=!0;let x,L;if(g)for(L=g.length-1;L>=0;L--)x=p.g=g[L],R=Mi(x,_,!0,p)&&R;if(x=p.g=u,R=Mi(x,_,!0,p)&&R,R=Mi(x,_,!1,p)&&R,g)for(L=0;L<g.length;L++)x=p.g=g[L],R=Mi(x,_,!1,p)&&R}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var u=this.i;for(let p in u.g){let g=u.g[p];for(let _=0;_<g.length;_++)Ri(g[_]);delete u.g[p],u.h--}}this.G=null},_e.prototype.J=function(u,p,g,_){return this.i.add(String(u),p,!1,g,_)},_e.prototype.K=function(u,p,g,_){return this.i.add(String(u),p,!0,g,_)};function Mi(u,p,g,_){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let R=!0;for(let x=0;x<p.length;++x){let L=p[x];if(L&&!L.da&&L.capture==g){let H=L.listener,ue=L.ha||L.src;L.fa&&or(u.i,L),R=H.call(ue,_)!==!1&&R}}return R&&!_.defaultPrevented}function cm(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:l.setTimeout(u,p||0)}function fu(u){u.g=cm(()=>{u.g=null,u.i&&(u.i=!1,fu(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class dm extends A{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:fu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(u){A.call(this),this.h=u,this.g={}}m(Mn,A);var hu=[];function pu(u){Pi(u.g,function(p,g){this.g.hasOwnProperty(g)&&lr(p)},u),u.g={}}Mn.prototype.N=function(){Mn.Z.N.call(this),pu(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fr=l.JSON.stringify,fm=l.JSON.parse,hm=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function mu(){}function gu(){}var Dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hr(){C.call(this,"d")}m(hr,C);function pr(){C.call(this,"c")}m(pr,C);var mt={},yu=null;function Di(){return yu=yu||new _e}mt.Ia="serverreachability";function _u(u){C.call(this,mt.Ia,u)}m(_u,C);function Nn(u){let p=Di();Ce(p,new _u(p))}mt.STAT_EVENT="statevent";function Tu(u,p){C.call(this,mt.STAT_EVENT,u),this.stat=p}m(Tu,C);function we(u){let p=Di();Ce(p,new Tu(p,u))}mt.Ja="timingevent";function vu(u,p){C.call(this,mt.Ja,u),this.size=p}m(vu,C);function Vn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function bn(){this.g=!0}bn.prototype.ua=function(){this.g=!1};function pm(u,p,g,_,R,x){u.info(function(){if(u.g)if(x){var L="",H=x.split("&");for(let X=0;X<H.length;X++){var ue=H[X].split("=");if(ue.length>1){let he=ue[0];ue=ue[1];let qe=he.split("_");L=qe.length>=2&&qe[1]=="type"?L+(he+"="+ue+"&"):L+(he+"=redacted&")}}}else L=null;else L=x;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+p+`
`+g+`
`+L})}function mm(u,p,g,_,R,x,L){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+p+`
`+g+`
`+x+" "+L})}function $t(u,p,g,_){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ym(u,g)+(_?" "+_:"")})}function gm(u,p){u.info(function(){return"TIMEOUT: "+p})}bn.prototype.info=function(){};function ym(u,p){if(!u.g)return p;if(!p)return null;try{let x=JSON.parse(p);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var g=x[u];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var R=_[0];if(R!="noop"&&R!="stop"&&R!="close")for(let L=1;L<_.length;L++)_[L]=""}}}}return fr(x)}catch{return p}}var Ni={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Eu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Iu;function mr(){}m(mr,mu),mr.prototype.g=function(){return new XMLHttpRequest},Iu=new mr;function kn(u){return encodeURIComponent(String(u))}function _m(u){var p=1;u=u.split(":");let g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function tt(u,p,g,_){this.j=u,this.i=p,this.l=g,this.S=_||1,this.V=new Mn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cu}function Cu(){this.i=null,this.g="",this.h=!1}var wu={},gr={};function yr(u,p,g){u.M=1,u.A=bi(Ue(p)),u.u=g,u.R=!0,Au(u,null)}function Au(u,p){u.F=Date.now(),Vi(u),u.B=Ue(u.A);var g=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),Uu(g.i,"t",_),u.C=0,g=u.j.L,u.h=new Cu,u.g=nc(u.j,g?p:null,!u.u),u.P>0&&(u.O=new dm(d(u.Y,u,u.g),u.P)),p=u.V,g=u.g,_=u.ba;var R="readystatechange";Array.isArray(R)||(R&&(hu[0]=R.toString()),R=hu);for(let x=0;x<R.length;x++){let L=au(g,R[x],_||p.handleEvent,!1,p.h||p);if(!L)break;p.g[L.key]=L}p=u.J?ou(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Nn(),pm(u.i,u.v,u.B,u.l,u.S,u.u)}tt.prototype.ba=function(u){u=u.target;let p=this.O;p&&ot(u)==3?p.j():this.Y(u)},tt.prototype.Y=function(u){try{if(u==this.g)e:{let H=ot(this.g),ue=this.g.ya(),X=this.g.ca();if(!(H<3)&&(H!=3||this.g&&(this.h.h||this.g.la()||zu(this.g)))){this.K||H!=4||ue==7||(ue==8||X<=0?Nn(3):Nn(2)),_r(this);var p=this.g.ca();this.X=p;var g=Tm(this);if(this.o=p==200,mm(this.i,this.v,this.B,this.l,this.S,H,p),this.o){if(this.U&&!this.L){t:{if(this.g){var _,R=this.g;if((_=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_)){var x=_;break t}}x=null}if(u=x)$t(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tr(this,u);else{this.o=!1,this.m=3,we(12),gt(this),Fn(this);break e}}if(this.R){u=!0;let he;for(;!this.K&&this.C<g.length;)if(he=vm(this,g),he==gr){H==4&&(this.m=4,we(14),u=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(he==wu){this.m=4,we(15),$t(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else $t(this.i,this.l,he,null),Tr(this,he);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),H!=4||g.length!=0||this.h.h||(this.m=1,we(16),u=!1),this.o=this.o&&u,!u)$t(this.i,this.l,g,"[Invalid Chunked Response]"),gt(this),Fn(this);else if(g.length>0&&!this.W){this.W=!0;var L=this.j;L.g==this&&L.aa&&!L.P&&(L.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Sr(L),L.P=!0,we(11))}}else $t(this.i,this.l,g,null),Tr(this,g);H==4&&gt(this),this.o&&!this.K&&(H==4?Zu(this.j,this):(this.o=!1,Vi(this)))}else bm(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),gt(this),Fn(this)}}}catch{}finally{}};function Tm(u){if(!Su(u))return u.g.la();let p=zu(u.g);if(p==="")return"";let g="",_=p.length,R=ot(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gt(u),Fn(u),"";u.h.i=new l.TextDecoder}for(let x=0;x<_;x++)u.h.h=!0,g+=u.h.i.decode(p[x],{stream:!(R&&x==_-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function Su(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function vm(u,p){var g=u.C,_=p.indexOf(`
`,g);return _==-1?gr:(g=Number(p.substring(g,_)),isNaN(g)?wu:(_+=1,_+g>p.length?gr:(p=p.slice(_,_+g),u.C=_+g,p)))}tt.prototype.cancel=function(){this.K=!0,gt(this)};function Vi(u){u.T=Date.now()+u.H,Ru(u,u.H)}function Ru(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Vn(d(u.aa,u),p)}function _r(u){u.D&&(l.clearTimeout(u.D),u.D=null)}tt.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(gm(this.i,this.B),this.M!=2&&(Nn(),we(17)),gt(this),this.m=2,Fn(this)):Ru(this,this.T-u)};function Fn(u){u.j.I==0||u.K||Zu(u.j,u)}function gt(u){_r(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,pu(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Tr(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||vr(g.h,u))){if(!u.L&&vr(g.h,u)&&g.I==3){try{var _=g.Ba.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Bi(g),Ui(g);else break e;Ar(g),we(18)}}else g.xa=R[1],0<g.xa-g.K&&R[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Vn(d(g.Va,g),6e3));Mu(g.h)<=1&&g.ta&&(g.ta=void 0)}else _t(g,11)}else if((u.L||g.g==u)&&Bi(g),!E(p))for(R=g.Ba.g.parse(p),p=0;p<R.length;p++){let X=R[p],he=X[0];if(!(he<=g.K))if(g.K=he,X=X[1],g.I==2)if(X[0]=="c"){g.M=X[1],g.ba=X[2];let qe=X[3];qe!=null&&(g.ka=qe,g.j.info("VER="+g.ka));let Tt=X[4];Tt!=null&&(g.za=Tt,g.j.info("SVER="+g.za));let rt=X[5];rt!=null&&typeof rt=="number"&&rt>0&&(_=1.5*rt,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;let st=u.g;if(st){let Gi=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var x=_.h;x.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Er(x,x.h),x.h=null))}if(_.G){let Rr=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;Rr&&(_.wa=Rr,j(_.J,_.G,Rr))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var L=u;if(_.na=tc(_,_.L?_.ba:null,_.W),L.L){Du(_.h,L);var H=L,ue=_.O;ue&&(H.H=ue),H.D&&(_r(H),Vi(H)),_.g=L}else Yu(_);g.i.length>0&&qi(g)}else X[0]!="stop"&&X[0]!="close"||_t(g,7);else g.I==3&&(X[0]=="stop"||X[0]=="close"?X[0]=="stop"?_t(g,7):wr(g):X[0]!="noop"&&g.l&&g.l.qa(X),g.A=0)}}Nn(4)}catch{}}var Em=class{constructor(u,p){this.g=u,this.map=p}};function Pu(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mu(u){return u.h?1:u.g?u.g.size:0}function vr(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Er(u,p){u.g?u.g.add(p):u.h=p}function Du(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Pu.prototype.cancel=function(){if(this.i=Nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Nu(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let g of u.g.values())p=p.concat(g.G);return p}return I(u.i)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){let _=u[g].indexOf("="),R,x=null;_>=0?(R=u[g].substring(0,_),x=u[g].substring(_+1)):R=u[g],p(R,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function nt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof nt?(this.l=u.l,Ln(this,u.j),this.o=u.o,this.g=u.g,Un(this,u.u),this.h=u.h,Ir(this,qu(u.i)),this.m=u.m):u&&(p=String(u).match(Vu))?(this.l=!1,Ln(this,p[1]||"",!0),this.o=qn(p[2]||""),this.g=qn(p[3]||"",!0),Un(this,p[4]),this.h=qn(p[5]||"",!0),Ir(this,p[6]||"",!0),this.m=qn(p[7]||"")):(this.l=!1,this.i=new On(null,this.l))}nt.prototype.toString=function(){let u=[];var p=this.j;p&&u.push(Bn(p,bu,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Bn(p,bu,!0),"@"),u.push(kn(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Bn(g,g.charAt(0)=="/"?Am:wm,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Bn(g,Rm)),u.join("")},nt.prototype.resolve=function(u){let p=Ue(this),g=!!u.j;g?Ln(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var _=u.h;if(g)Un(p,u.u);else if(g=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var R=p.h.lastIndexOf("/");R!=-1&&(_=p.h.slice(0,R+1)+_)}if(R=_,R==".."||R==".")_="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){_=R.lastIndexOf("/",0)==0,R=R.split("/");let x=[];for(let L=0;L<R.length;){let H=R[L++];H=="."?_&&L==R.length&&x.push(""):H==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),_&&L==R.length&&x.push("")):(x.push(H),_=!0)}_=x.join("/")}else _=R}return g?p.h=_:g=u.i.toString()!=="",g?Ir(p,qu(u.i)):g=!!u.m,g&&(p.m=u.m),p};function Ue(u){return new nt(u)}function Ln(u,p,g){u.j=g?qn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Un(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Ir(u,p,g){p instanceof On?(u.i=p,Pm(u.i,u.l)):(g||(p=Bn(p,Sm)),u.i=new On(p,u.l))}function j(u,p,g){u.i.set(p,g)}function bi(u){return j(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function qn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bn(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,Cm),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Cm(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bu=/[#\/\?@]/g,wm=/[#\?:]/g,Am=/[#\?]/g,Sm=/[#\?@]/g,Rm=/#/g;function On(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function yt(u){u.g||(u.g=new Map,u.h=0,u.i&&Im(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=On.prototype,t.add=function(u,p){yt(this),this.i=null,u=Ht(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function ku(u,p){yt(u),p=Ht(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Fu(u,p){return yt(u),p=Ht(u,p),u.g.has(p)}t.forEach=function(u,p){yt(this),this.g.forEach(function(g,_){g.forEach(function(R){u.call(p,R,_,this)},this)},this)};function Lu(u,p){yt(u);let g=[];if(typeof p=="string")Fu(u,p)&&(g=g.concat(u.g.get(Ht(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return yt(this),this.i=null,u=Ht(this,u),Fu(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=Lu(this,u),u.length>0?String(u[0]):p):p};function Uu(u,p,g){ku(u,p),g.length>0&&(u.i=null,u.g.set(Ht(u,p),I(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(let _=0;_<p.length;_++){var g=p[_];let R=kn(g);g=Lu(this,g);for(let x=0;x<g.length;x++){let L=R;g[x]!==""&&(L+="="+kn(g[x])),u.push(L)}}return this.i=u.join("&")};function qu(u){let p=new On;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Ht(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Pm(u,p){p&&!u.j&&(yt(u),u.i=null,u.g.forEach(function(g,_){let R=_.toLowerCase();_!=R&&(ku(this,_),Uu(this,R,g))},u)),u.j=p}function xm(u,p){let g=new bn;if(l.Image){let _=new Image;_.onload=h(it,g,"TestLoadImage: loaded",!0,p,_),_.onerror=h(it,g,"TestLoadImage: error",!1,p,_),_.onabort=h(it,g,"TestLoadImage: abort",!1,p,_),_.ontimeout=h(it,g,"TestLoadImage: timeout",!1,p,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else p(!1)}function Mm(u,p){let g=new bn,_=new AbortController,R=setTimeout(()=>{_.abort(),it(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:_.signal}).then(x=>{clearTimeout(R),x.ok?it(g,"TestPingServer: ok",!0,p):it(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(R),it(g,"TestPingServer: error",!1,p)})}function it(u,p,g,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(g)}catch{}}function Dm(){this.g=new hm}function ki(u){this.i=u.Sb||null,this.h=u.ab||!1}m(ki,mu),ki.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(u,p){_e.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Fi,_e),t=Fi.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,$n(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||l).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gn(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Gn(this):$n(this),this.readyState==3&&Bu(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Gn(this))},t.Na=function(u){this.g&&(this.response=u,Gn(this))},t.ga=function(){this.g&&Gn(this)};function Gn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,$n(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function $n(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ou(u){let p="";return Pi(u,function(g,_){p+=_,p+=":",p+=g,p+=`\r
`}),p}function Cr(u,p,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ou(g),typeof u=="string"?g!=null&&kn(g):j(u,p,g))}function te(u){_e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(te,_e);var Nm=/^https?$/i,Vm=["POST","PUT"];t=te.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Iu.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(x){Gu(this,x);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)g.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let x of _.keys())g.set(x,_.get(x));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(x=>x.toLowerCase()=="content-type"),R=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(Vm,p,void 0)>=0)||_||R||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,L]of g)this.g.setRequestHeader(x,L);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(x){Gu(this,x)}};function Gu(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,$u(u),Li(u)}function $u(u){u.A||(u.A=!0,Ce(u,"complete"),Ce(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ce(this,"complete"),Ce(this,"abort"),Li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),te.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hu(this):this.Xa())},t.Xa=function(){Hu(this)};function Hu(u){if(u.h&&typeof a<"u"){if(u.v&&ot(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ce(u,"readystatechange"),ot(u)==4){u.h=!1;try{let x=u.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var _;if(_=x===0){let L=String(u.D).match(Vu)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),_=!Nm.test(L?L.toLowerCase():"")}g=_}if(g)Ce(u,"complete"),Ce(u,"success");else{u.o=6;try{var R=ot(u)>2?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.ca()+"]",$u(u)}}finally{Li(u)}}}}function Li(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let g=u.g;u.g=null,p||Ce(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ot(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ot(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),fm(p)}};function zu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bm(u){let p={};u=(u.g&&ot(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(E(u[_]))continue;var g=_m(u[_]);let R=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let x=p[R]||[];p[R]=x,x.push(g)}am(p,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function Ku(u){this.za=0,this.i=[],this.j=new bn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hn("baseRetryDelayMs",5e3,u),this.Za=Hn("retryDelaySeedMs",1e4,u),this.Ta=Hn("forwardChannelMaxRetries",2,u),this.va=Hn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Pu(u&&u.concurrentRequestLimit),this.Ba=new Dm,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ku.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,_){we(0),this.W=u,this.H=p||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=tc(this,null,this.W),qi(this)};function wr(u){if(Ju(u),u.I==3){var p=u.V++,g=Ue(u.J);if(j(g,"SID",u.M),j(g,"RID",p),j(g,"TYPE","terminate"),zn(u,g),p=new tt(u,u.j,p),p.M=2,p.A=bi(Ue(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&l.Image&&(new Image().src=p.A,g=!0),g||(p.g=nc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Vi(p)}ec(u)}function Ui(u){u.g&&(Sr(u),u.g.cancel(),u.g=null)}function Ju(u){Ui(u),u.v&&(l.clearTimeout(u.v),u.v=null),Bi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function qi(u){if(!xu(u.h)&&!u.m){u.m=!0;var p=u.Ea;q||v(),$||(q(),$=!0),w.add(p,u),u.D=0}}function km(u,p){return Mu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Vn(d(u.Ea,u,p),ju(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let R=new tt(this,this.j,u),x=this.o;if(this.U&&(x?(x=ou(x),su(x,this.U)):x=this.U),this.u!==null||this.R||(R.J=x,x=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Qu(this,R,p),g=Ue(this.J),j(g,"RID",u),j(g,"CVER",22),this.G&&j(g,"X-HTTP-Session-Id",this.G),zn(this,g),x&&(this.R?p="headers="+kn(Ou(x))+"&"+p:this.u&&Cr(g,this.u,x)),Er(this.h,R),this.Ra&&j(g,"TYPE","init"),this.S?(j(g,"$req",p),j(g,"SID","null"),R.U=!0,yr(R,g,null)):yr(R,g,p),this.I=2}}else this.I==3&&(u?Wu(this,u):this.i.length==0||xu(this.h)||Wu(this))};function Wu(u,p){var g;p?g=p.l:g=u.V++;let _=Ue(u.J);j(_,"SID",u.M),j(_,"RID",g),j(_,"AID",u.K),zn(u,_),u.u&&u.o&&Cr(_,u.u,u.o),g=new tt(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Qu(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Er(u.h,g),yr(g,_,p)}function zn(u,p){u.H&&Pi(u.H,function(g,_){j(p,_,g)}),u.l&&Pi({},function(g,_){j(p,_,g)})}function Qu(u,p,g){g=Math.min(u.i.length,g);let _=u.l?d(u.l.Ka,u.l,u):null;e:{var R=u.i;let H=-1;for(;;){let ue=["count="+g];H==-1?g>0?(H=R[0].g,ue.push("ofs="+H)):H=0:ue.push("ofs="+H);let X=!0;for(let he=0;he<g;he++){var x=R[he].g;let qe=R[he].map;if(x-=H,x<0)H=Math.max(0,R[he].g-100),X=!1;else try{x="req"+x+"_"||"";try{var L=qe instanceof Map?qe:Object.entries(qe);for(let[Tt,rt]of L){let st=rt;c(rt)&&(st=fr(rt)),ue.push(x+Tt+"="+encodeURIComponent(st))}}catch(Tt){throw ue.push(x+"type="+encodeURIComponent("_badmap")),Tt}}catch{_&&_(qe)}}if(X){L=ue.join("&");break e}}L=void 0}return u=u.i.splice(0,g),p.G=u,L}function Yu(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;q||v(),$||(q(),$=!0),w.add(p,u),u.A=0}}function Ar(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Vn(d(u.Da,u),ju(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Vn(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Ui(this),Xu(this))};function Sr(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function Xu(u){u.g=new tt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Ue(u.na);j(p,"RID","rpc"),j(p,"SID",u.M),j(p,"AID",u.K),j(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&j(p,"TO",u.ia),j(p,"TYPE","xmlhttp"),zn(u,p),u.u&&u.o&&Cr(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=bi(Ue(p)),g.u=null,g.R=!0,Au(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ui(this),Ar(this),we(19))};function Bi(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Zu(u,p){var g=null;if(u.g==p){Bi(u),Sr(u),u.g=null;var _=2}else if(vr(u.h,p))g=p.G,Du(u.h,p),_=1;else return;if(u.I!=0){if(p.o)if(_==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var R=u.D;_=Di(),Ce(_,new vu(_,g)),qi(u)}else Yu(u);else if(R=p.m,R==3||R==0&&p.X>0||!(_==1&&km(u,p)||_==2&&Ar(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),R){case 1:_t(u,5);break;case 4:_t(u,10);break;case 3:_t(u,6);break;default:_t(u,2)}}}function ju(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function _t(u,p){if(u.j.info("Error code "+p),p==2){var g=d(u.bb,u),_=u.Ua;let R=!_;_=new nt(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ln(_,"https"),bi(_),R?xm(_.toString(),g):Mm(_.toString(),g)}else we(2);u.I=0,u.l&&u.l.pa(p),ec(u),Ju(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function ec(u){if(u.I=0,u.ja=[],u.l){let p=Nu(u.h);(p.length!=0||u.i.length!=0)&&(P(u.ja,p),P(u.ja,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.oa()}}function tc(u,p,g){var _=g instanceof nt?Ue(g):new nt(g);if(_.g!="")p&&(_.g=p+"."+_.g),Un(_,_.u);else{var R=l.location;_=R.protocol,p=p?p+"."+R.hostname:R.hostname,R=+R.port;let x=new nt(null);_&&Ln(x,_),p&&(x.g=p),R&&Un(x,R),g&&(x.h=g),_=x}return g=u.G,p=u.wa,g&&p&&j(_,g,p),j(_,"VER",u.ka),zn(u,_),_}function nc(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new te(new ki({ab:g})):new te(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}t=ic.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oi(){}Oi.prototype.g=function(u,p){return new Pe(u,p)};function Pe(u,p){_e.call(this),this.g=new Ku(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new zt(this)}m(Pe,_e),Pe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pe.prototype.close=function(){wr(this.g)},Pe.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=fr(u),u=g);p.i.push(new Em(p.Ya++,u)),p.I==3&&qi(p)},Pe.prototype.N=function(){this.g.l=null,delete this.j,wr(this.g),delete this.g,Pe.Z.N.call(this)};function oc(u){hr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}m(oc,hr);function rc(){pr.call(this),this.status=1}m(rc,pr);function zt(u){this.g=u}m(zt,ic),zt.prototype.ra=function(){Ce(this.g,"a")},zt.prototype.qa=function(u){Ce(this.g,new oc(u))},zt.prototype.pa=function(u){Ce(this.g,new rc)},zt.prototype.oa=function(){Ce(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,Pe.prototype.send=Pe.prototype.o,Pe.prototype.open=Pe.prototype.m,Pe.prototype.close=Pe.prototype.close,pa=Ye.createWebChannelTransport=function(){return new Oi},ha=Ye.getStatEventTarget=function(){return Di()},fa=Ye.Event=mt,Ao=Ye.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,ni=Ye.ErrorCode=Ni,Eu.COMPLETE="complete",da=Ye.EventType=Eu,gu.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",_e.prototype.listen=_e.prototype.J,an=Ye.WebChannel=gu,HR=Ye.FetchXmlHttpFactory=ki,te.prototype.listenOnce=te.prototype.K,te.prototype.getLastError=te.prototype.Ha,te.prototype.getLastErrorCode=te.prototype.ya,te.prototype.getStatus=te.prototype.ca,te.prototype.getResponseJson=te.prototype.La,te.prototype.getResponseText=te.prototype.la,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Fa,ca=Ye.XhrIo=te}).apply(typeof wo<"u"?wo:typeof self<"u"?self:typeof window<"u"?window:{});var dh="@firebase/firestore",fh="4.9.2";var pe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");var Rn="12.3.0";var kt=new Be("@firebase/firestore");function ln(){return kt.logLevel}function B(t,...e){if(kt.logLevel<=J.DEBUG){let n=e.map($l);kt.debug(`Firestore (${Rn}): ${t}`,...n)}}function Ft(t,...e){if(kt.logLevel<=J.ERROR){let n=e.map($l);kt.error(`Firestore (${Rn}): ${t}`,...n)}}function jo(t,...e){if(kt.logLevel<=J.WARN){let n=e.map($l);kt.warn(`Firestore (${Rn}): ${t}`,...n)}}function $l(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function z(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,zh(t,i,n)}function zh(t,e,n){let i=`FIRESTORE (${Rn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ft(i),new Error(i)}function ie(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||zh(e,o,i)}function Z(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Se{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xe=class{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}};var No=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ta=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pe.UNAUTHENTICATED)))}shutdown(){}},va=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}},Ea=class{constructor(e){this.t=e,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0,42304);let i=this.i,o=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve(),a=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xe,e.enqueueRetryable((()=>o(this.currentUser)))};let l=()=>{let f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},c=f=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){let f=this.t.getImmediate({optional:!0});f?c(f):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xe)}}),0),l()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ie(typeof i.accessToken=="string",31837,{l:i}),new No(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new pe(e)}},Ia=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ca=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Ia(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Vo=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wa=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ie(this.o===void 0,3512);let i=a=>{a.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let l=a.token!==this.m;return this.m=a.token,B("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};let o=a=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){let a=this.V.getImmediate({optional:!0});a?o(a):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vo(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vo(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function zR(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var ui=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let o=zR(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%62))}return i}};function Y(t,e){return t<e?-1:t>e?1:0}function Aa(t,e){let n=Math.min(t.length,e.length);for(let i=0;i<n;i++){let o=t.charAt(i),a=e.charAt(i);if(o!==a)return ma(o)===ma(a)?Y(o,a):ma(o)?1:-1}return Y(t.length,e.length)}var KR=55296,JR=57343;function ma(t){let e=t.charCodeAt(0);return e>=KR&&e<=JR}function mn(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}var hh="__name__",bo=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&z(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let o=0;o<i;o++){let a=t.compareSegments(e.get(o),n.get(o));if(a!==0)return a}return Y(e.length,n.length)}static compareSegments(e,n){let i=t.isNumericId(e),o=t.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?t.extractNumericId(e).compare(t.extractNumericId(n)):Aa(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Co.fromString(e.substring(4,e.length-2))}},ce=class t extends bo{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new G(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new t(n)}static emptyPath(){return new t([])}},WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Me=class t extends bo{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return WR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hh}static keyField(){return new t([hh])}static fromServerFormat(e){let n=[],i="",o=0,a=()=>{if(i.length===0)throw new G(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},l=!1;for(;o<e.length;){let c=e[o];if(c==="\\"){if(o+1===e.length)throw new G(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new G(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else c==="`"?(l=!l,o++):c!=="."||l?(i+=c,o++):(a(),o++)}if(a(),l)throw new G(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(ce.fromString(e))}static fromName(e){return new t(ce.fromString(e).popFirst(5))}static empty(){return new t(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ce(e.slice()))}};function QR(t,e,n){if(!n)throw new G(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YR(t,e,n,i){if(e===!0&&i===!0)throw new G(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ph(t){if(!K.isDocumentKey(t))throw new G(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kh(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function Sa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Hl(t);throw new G(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function le(t,e){let n={typeString:t};return e&&(n.value=e),n}function Ei(t,e){if(!Kh(t))throw new G(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let i in e)if(e[i]){let o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}let l=t[i];if(o&&typeof l!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new G(N.INVALID_ARGUMENT,n);return!0}var mh=-62135596800,gh=1e6,de=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*gh);return new t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mh)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gh}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ei(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-mh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};de._jsonSchemaVersion="firestore/timestamp/1.0",de._jsonSchema={type:le("string",de._jsonSchemaVersion),seconds:le("number"),nanoseconds:le("number")};var ne=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new de(0,0))}static max(){return new t(new de(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ci=-1,Ra=class{constructor(e,n,i,o){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=o}};Ra.UNKNOWN_ID=-1;function XR(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=ne.fromTimestamp(i===1e9?new de(n+1,0):new de(n,i));return new Lt(o,K.empty(),e)}function ZR(t){return new Lt(t.readTime,t.key,ci)}var Lt=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(ne.min(),K.empty(),ci)}static max(){return new t(ne.max(),K.empty(),ci)}};function jR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:Y(t.largestBatchId,e.largestBatchId))}var e0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pa=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function zl(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==e0)throw t;B("LocalStore","Unexpectedly lost primary lease")}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):t.reject(n)}static resolve(e){return new t(((n,i)=>{n(e)}))}static reject(e){return new t(((n,i)=>{i(e)}))}static waitFor(e){return new t(((n,i)=>{let o=0,a=0,l=!1;e.forEach((c=>{++o,c.next((()=>{++a,l&&a===o&&n()}),(f=>i(f)))})),l=!0,a===o&&n()}))}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next((o=>o?t.resolve(o):i()));return n}static forEach(e,n){let i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new t(((i,o)=>{let a=e.length,l=new Array(a),c=0;for(let f=0;f<a;f++){let d=f;n(e[d]).next((h=>{l[d]=h,++c,c===a&&i(l)}),(h=>o(h)))}}))}static doWhile(e,n){return new t(((i,o)=>{let a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}};function t0(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ii(t){return t.name==="IndexedDbTransactionError"}var di=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};di.ce=-1;var Kl=-1;function Jl(t){return t==null}function fi(t){return t===0&&1/t==-1/0}function n0(t){return typeof t=="number"&&Number.isInteger(t)&&!fi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jh="";function i0(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yh(e)),e=o0(t.get(n),e);return yh(e)}function o0(t,e){let n=e,i=t.length;for(let o=0;o<i;o++){let a=t.charAt(o);switch(a){case"\0":n+="";break;case Jh:n+="";break;default:n+=a}}return n}function yh(t){return t+Jh+""}var r0="remoteDocuments",Wh="owner";var Qh="mutationQueues";var Yh="mutations";var Xh="documentMutations",s0="remoteDocumentsV14";var Zh="remoteDocumentGlobal";var jh="targets";var ep="targetDocuments";var tp="targetGlobal",np="collectionParents";var ip="clientMetadata";var op="bundles";var rp="namedQueries";var a0="indexConfiguration";var l0="indexState";var u0="indexEntries";var sp="documentOverlays";var c0="globals";var d0=[Qh,Yh,Xh,r0,jh,Wh,tp,ep,ip,Zh,np,op,rp],Ox=[...d0,sp],f0=[Qh,Yh,Xh,s0,jh,Wh,tp,ep,ip,Zh,np,op,rp,sp],h0=f0,p0=[...h0,a0,l0,u0];var Gx=[...p0,c0];function _h(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pn(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ap(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||ze.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){let e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cn(this.root,e,this.comparator,!1)}getReverseIterator(){return new cn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cn(this.root,e,this.comparator,!0)}},cn=class{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ze=class t{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??t.RED,this.left=o??t.EMPTY,this.right=a??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new t(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this,a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return t.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,i,o,a){return this}insert(e,n,i){return new ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ie=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ko(this.data.getIterator())}getIteratorFrom(e){return new ko(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((n=>{e.push(n)})),e}toString(){let e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ko=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var He=class t{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ie(Me.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mn(this.fields,e.fields,((n,i)=>n.isEqual(i)))}};var xa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new xa("Invalid base64 string: "+a):a}})(e);return new t(n)}static fromUint8Array(e){let n=(function(o){let a="";for(let l=0;l<o.length;++l)a+=String.fromCharCode(o[l]);return a})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var m0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dt(t){if(ie(!!t,39018),typeof t=="string"){let e=0,n=m0.exec(t);if(ie(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ae(t.seconds),nanos:ae(t.nanos)}}function ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ut(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}var lp="server_timestamp",up="__type__",cp="__previous_value__",dp="__local_write_time__";function Wl(t){return(t?.mapValue?.fields||{})[up]?.stringValue===lp}function Ql(t){let e=t.mapValue.fields[cp];return Wl(e)?Ql(e):e}function Fo(t){let e=dt(t.mapValue.fields[dp].timestampValue);return new de(e.seconds,e.nanos)}var Ma=class{constructor(e,n,i,o,a,l,c,f,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=h}},Lo="(default)",Da=class t{constructor(e,n){this.projectId=e,this.database=n||Lo}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Lo}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yl="__type__",fp="__max__",So={mapValue:{fields:{__type__:{stringValue:fp}}}},Xl="__vector__",hi="value";function qt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wl(t)?4:pp(t)?9007199254740991:hp(t)?10:11:z(28295,{value:t})}function Ke(t,e){if(t===e)return!0;let n=qt(t);if(n!==qt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;let l=dt(o.timestampValue),c=dt(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return Ut(o.bytesValue).isEqual(Ut(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return ae(o.geoPointValue.latitude)===ae(a.geoPointValue.latitude)&&ae(o.geoPointValue.longitude)===ae(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return ae(o.integerValue)===ae(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){let l=ae(o.doubleValue),c=ae(a.doubleValue);return l===c?fi(l)===fi(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return mn(t.arrayValue.values||[],e.arrayValue.values||[],Ke);case 10:case 11:return(function(o,a){let l=o.mapValue.fields||{},c=a.mapValue.fields||{};if(_h(l)!==_h(c))return!1;for(let f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Ke(l[f],c[f])))return!1;return!0})(t,e);default:return z(52216,{left:t})}}function pi(t,e){return(t.values||[]).find((n=>Ke(n,e)))!==void 0}function gn(t,e){if(t===e)return 0;let n=qt(t),i=qt(e);if(n!==i)return Y(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return(function(a,l){let c=ae(a.integerValue||a.doubleValue),f=ae(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return Th(t.timestampValue,e.timestampValue);case 4:return Th(Fo(t),Fo(e));case 5:return Aa(t.stringValue,e.stringValue);case 6:return(function(a,l){let c=Ut(a),f=Ut(l);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){let c=a.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){let h=Y(c[d],f[d]);if(h!==0)return h}return Y(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){let c=Y(ae(a.latitude),ae(l.latitude));return c!==0?c:Y(ae(a.longitude),ae(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vh(t.arrayValue,e.arrayValue);case 10:return(function(a,l){let c=a.fields||{},f=l.fields||{},d=c[hi]?.arrayValue,h=f[hi]?.arrayValue,m=Y(d?.values?.length||0,h?.values?.length||0);return m!==0?m:vh(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===So.mapValue&&l===So.mapValue)return 0;if(a===So.mapValue)return 1;if(l===So.mapValue)return-1;let c=a.fields||{},f=Object.keys(c),d=l.fields||{},h=Object.keys(d);f.sort(),h.sort();for(let m=0;m<f.length&&m<h.length;++m){let y=Aa(f[m],h[m]);if(y!==0)return y;let I=gn(c[f[m]],d[h[m]]);if(I!==0)return I}return Y(f.length,h.length)})(t.mapValue,e.mapValue);default:throw z(23264,{he:n})}}function Th(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Y(t,e);let n=dt(t),i=dt(e),o=Y(n.seconds,i.seconds);return o!==0?o:Y(n.nanos,i.nanos)}function vh(t,e){let n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){let a=gn(n[o],i[o]);if(a)return a}return Y(n.length,i.length)}function yn(t){return Na(t)}function Na(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let i=dt(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ut(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return K.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(let a of n.values||[])o?o=!1:i+=",",i+=Na(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){let i=Object.keys(n.fields||{}).sort(),o="{",a=!0;for(let l of i)a?a=!1:o+=",",o+=`${l}:${Na(n.fields[l])}`;return o+"}"})(t.mapValue):z(61005,{value:t})}function xo(t){switch(qt(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ql(t);return e?16+xo(e):16;case 5:return 2*t.stringValue.length;case 6:return Ut(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+xo(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let o=0;return Pn(i.fields,((a,l)=>{o+=a.length+xo(l)})),o})(t.mapValue);default:throw z(13486,{value:t})}}function Va(t){return!!t&&"integerValue"in t}function Zl(t){return!!t&&"arrayValue"in t}function Mo(t){return!!t&&"mapValue"in t}function hp(t){return(t?.mapValue?.fields||{})[Yl]?.stringValue===Xl}function oi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){let e={mapValue:{fields:{}}};return Pn(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=oi(i))),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oi(t.arrayValue.values[n]);return e}return{...t}}function pp(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fp}var Hx={mapValue:{fields:{[Yl]:{stringValue:Xl},[hi]:{arrayValue:{}}}}};var $e=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oi(n)}setAll(e){let n=Me.emptyPath(),i={},o=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){let f=this.getFieldsMap(n);this.applyChanges(f,i,o),i={},o=[],n=c.popLast()}l?i[c.lastSegment()]=oi(l):o.push(c.lastSegment())}));let a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){let n=this.field(e.popLast());Mo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ke(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Mo(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Pn(n,((o,a)=>e[o]=a));for(let o of i)delete e[o]}clone(){return new t(oi(this.value))}};function mp(t){let e=[];return Pn(t.fields,((n,i)=>{let o=new Me([n]);if(Mo(i)){let a=mp(i.mapValue).fields;if(a.length===0)e.push(o);else for(let l of a)e.push(o.child(l))}else e.push(o)})),new He(e)}var _n=class t{constructor(e,n,i,o,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),$e.empty(),0)}static newFoundDocument(e,n,i,o){return new t(e,1,n,ne.min(),i,o,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),$e.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),$e.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$e.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tn=class{constructor(e,n){this.position=e,this.inclusive=n}};function Eh(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){let a=e[o],l=t.position[o];if(a.field.isKeyField()?i=K.comparator(K.fromName(l.referenceValue),n.key):i=gn(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ih(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ke(t.position[n],e.position[n]))return!1;return!0}var vn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function g0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Uo=class{},me=class t extends Uo{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ka(e,n,i):n==="array-contains"?new Ua(e,i):n==="in"?new qa(e,i):n==="not-in"?new Ba(e,i):n==="array-contains-any"?new Oa(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Fa(e,i):new La(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gn(n,this.value)):n!==null&&qt(this.value)===qt(n)&&this.matchesComparison(gn(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ft=class t extends Uo{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return gp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function gp(t){return t.op==="and"}function yp(t){return y0(t)&&gp(t)}function y0(t){for(let e of t.filters)if(e instanceof ft)return!1;return!0}function ba(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+yn(t.value);if(yp(t))return t.filters.map((e=>ba(e))).join(",");{let e=t.filters.map((n=>ba(n))).join(",");return`${t.op}(${e})`}}function _p(t,e){return t instanceof me?(function(i,o){return o instanceof me&&i.op===o.op&&i.field.isEqual(o.field)&&Ke(i.value,o.value)})(t,e):t instanceof ft?(function(i,o){return o instanceof ft&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,l,c)=>a&&_p(l,o.filters[c])),!0):!1})(t,e):void z(19439)}function Tp(t){return t instanceof me?(function(n){return`${n.field.canonicalString()} ${n.op} ${yn(n.value)}`})(t):t instanceof ft?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tp).join(" ,")+"}"})(t):"Filter"}var ka=class extends me{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},Fa=class extends me{constructor(e,n){super(e,"in",n),this.keys=vp("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}},La=class extends me{constructor(e,n){super(e,"not-in",n),this.keys=vp("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}};function vp(t,e){return(e.arrayValue?.values||[]).map((n=>K.fromName(n.referenceValue)))}var Ua=class extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Zl(n)&&pi(n.arrayValue,this.value)}},qa=class extends me{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&pi(this.value.arrayValue,n)}},Ba=class extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(pi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pi(this.value.arrayValue,n)}},Oa=class extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Zl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>pi(this.value.arrayValue,i)))}};var Ga=class{constructor(e,n=null,i=[],o=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}};function Ch(t,e=null,n=[],i=[],o=null,a=null,l=null){return new Ga(t,e,n,i,o,a,l)}function jl(t){let e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>ba(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Jl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>yn(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>yn(i))).join(",")),e.Te=n}return e.Te}function eu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_p(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ih(t.startAt,e.startAt)&&Ih(t.endAt,e.endAt)}var En=class{constructor(e,n=null,i=[],o=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function _0(t,e,n,i,o,a,l,c){return new En(t,e,n,i,o,a,l,c)}function T0(t){return new En(t)}function wh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function v0(t){return t.collectionGroup!==null}function ri(t){let e=Z(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ie(Me.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new vn(a,i))})),n.has(Me.keyField().canonicalString())||e.Ie.push(new vn(Me.keyField(),i))}return e.Ie}function Mt(t){let e=Z(t);return e.Ee||(e.Ee=E0(e,ri(t))),e.Ee}function E0(t,e){if(t.limitType==="F")return Ch(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{let a=o.dir==="desc"?"asc":"desc";return new vn(o.field,a)}));let n=t.endAt?new Tn(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Tn(t.startAt.position,t.startAt.inclusive):null;return Ch(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function $a(t,e,n){return new En(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ep(t,e){return eu(Mt(t),Mt(e))&&t.limitType===e.limitType}function Ip(t){return`${jl(Mt(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>Tp(o))).join(", ")}]`),Jl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>yn(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>yn(o))).join(",")),`Target(${i})`})(Mt(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&(function(i,o){let a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):K.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(let a of ri(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(let a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(l,c,f){let d=Eh(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,ri(i),o)||i.endAt&&!(function(l,c,f){let d=Eh(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,ri(i),o))})(t,e)}function I0(t){return(e,n)=>{let i=!1;for(let o of ri(t)){let a=C0(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function C0(t,e,n){let i=t.field.isKeyField()?K.comparator(e.key,n.key):(function(a,l,c){let f=l.data.field(a),d=c.data.field(a);return f!==null&&d!==null?gn(f,d):z(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return z(19790,{direction:t.dir})}}var je=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pn(this.inner,((n,i)=>{for(let[o,a]of i)e(o,a)}))}isEmpty(){return ap(this.inner)}size(){return this.innerSize}};var w0=new Ne(K.comparator);function qo(){return w0}var Cp=new Ne(K.comparator);function Ro(...t){let e=Cp;for(let n of t)e=e.insert(n.key,n);return e}function wp(t){let e=Cp;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function xt(){return si()}function Ap(){return si()}function si(){return new je((t=>t.toString()),((t,e)=>t.isEqual(e)))}var A0=new Ne(K.comparator),S0=new Ie(K.comparator);function Ee(...t){let e=S0;for(let n of t)e=e.add(n);return e}var R0=new Ie(Y);function P0(){return R0}function nu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fi(e)?"-0":e}}function Sp(t){return{integerValue:""+t}}function x0(t,e){return n0(e)?Sp(e):nu(t,e)}var In=class{constructor(){this._=void 0}};function M0(t,e,n){return t instanceof Cn?(function(o,a){let l={fields:{[up]:{stringValue:lp},[dp]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Wl(a)&&(a=Ql(a)),a&&(l.fields[cp]=a),{mapValue:l}})(n,e):t instanceof Bt?Pp(t,e):t instanceof Ot?xp(t,e):(function(o,a){let l=Rp(o,a),c=Ah(l)+Ah(o.Ae);return Va(l)&&Va(o.Ae)?Sp(c):nu(o.serializer,c)})(t,e)}function D0(t,e,n){return t instanceof Bt?Pp(t,e):t instanceof Ot?xp(t,e):n}function Rp(t,e){return t instanceof wn?(function(i){return Va(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}var Cn=class extends In{},Bt=class extends In{constructor(e){super(),this.elements=e}};function Pp(t,e){let n=Mp(e);for(let i of t.elements)n.some((o=>Ke(o,i)))||n.push(i);return{arrayValue:{values:n}}}var Ot=class extends In{constructor(e){super(),this.elements=e}};function xp(t,e){let n=Mp(e);for(let i of t.elements)n=n.filter((o=>!Ke(o,i)));return{arrayValue:{values:n}}}var wn=class extends In{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function Ah(t){return ae(t.integerValue||t.doubleValue)}function Mp(t){return Zl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function N0(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof Bt&&o instanceof Bt||i instanceof Ot&&o instanceof Ot?mn(i.elements,o.elements,Ke):i instanceof wn&&o instanceof wn?Ke(i.Ae,o.Ae):i instanceof Cn&&o instanceof Cn})(t.transform,e.transform)}var Ha=class{constructor(e,n){this.version=e,this.transformResults=n}},Dt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Do(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var An=class{};function Dp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bo(t.key,Dt.none()):new Gt(t.key,t.data,Dt.none());{let n=t.data,i=$e.empty(),o=new Ie(Me.comparator);for(let a of e.fields)if(!o.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),o=o.add(a)}return new et(t.key,i,new He(o.toArray()),Dt.none())}}function V0(t,e,n){t instanceof Gt?(function(o,a,l){let c=o.value.clone(),f=Rh(o.fieldTransforms,a,l.transformResults);c.setAll(f),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof et?(function(o,a,l){if(!Do(o.precondition,a))return void a.convertToUnknownDocument(l.version);let c=Rh(o.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(Np(o)),f.setAll(c),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(o,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function ai(t,e,n,i){return t instanceof Gt?(function(a,l,c,f){if(!Do(a.precondition,l))return c;let d=a.value.clone(),h=Ph(a.fieldTransforms,f,l);return d.setAll(h),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof et?(function(a,l,c,f){if(!Do(a.precondition,l))return c;let d=Ph(a.fieldTransforms,f,l),h=l.data;return h.setAll(Np(a)),h.setAll(d),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((m=>m.field)))})(t,e,n,i):(function(a,l,c){return Do(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function b0(t,e){let n=null;for(let i of t.fieldTransforms){let o=e.data.field(i.field),a=Rp(i.transform,o||null);a!=null&&(n===null&&(n=$e.empty()),n.set(i.field,a))}return n||null}function Sh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&mn(i,o,((a,l)=>N0(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Gt=class extends An{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}},et=class extends An{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}};function Np(t){let e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}})),e}function Rh(t,e,n){let i=new Map;ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){let a=t[o],l=a.transform,c=e.data.field(a.field);i.set(a.field,D0(l,c,n[o]))}return i}function Ph(t,e,n){let i=new Map;for(let o of t){let a=o.transform,l=n.data.field(o.field);i.set(o.field,M0(a,l,e))}return i}var Bo=class extends An{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},za=class extends An{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ka=class{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){let a=this.mutations[o];a.key.isEqual(e.key)&&V0(a,e,i[o])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=ai(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=ai(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Ap();return this.mutations.forEach((o=>{let a=e.get(o.key),l=a.overlayedDocument,c=this.applyToLocalView(l,a.mutatedFields);c=n.has(o.key)?null:c;let f=Dp(l,c);f!==null&&i.set(o.key,f),l.isValidDocument()||l.convertToNoDocument(ne.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ee())}isEqual(e){return this.batchId===e.batchId&&mn(this.mutations,e.mutations,((n,i)=>Sh(n,i)))&&mn(this.baseMutations,e.baseMutations,((n,i)=>Sh(n,i)))}},Ja=class t{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ie(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return A0})(),a=e.mutations;for(let l=0;l<a.length;l++)o=o.insert(a[l].key,i[l].version);return new t(e,n,i,o)}};var Wa=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var re,W;function k0(t){switch(t){case N.OK:return z(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function F0(t){if(t===void 0)return Ft("GRPC error has no .code"),N.UNKNOWN;switch(t){case re.OK:return N.OK;case re.CANCELLED:return N.CANCELLED;case re.UNKNOWN:return N.UNKNOWN;case re.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case re.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case re.INTERNAL:return N.INTERNAL;case re.UNAVAILABLE:return N.UNAVAILABLE;case re.UNAUTHENTICATED:return N.UNAUTHENTICATED;case re.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case re.NOT_FOUND:return N.NOT_FOUND;case re.ALREADY_EXISTS:return N.ALREADY_EXISTS;case re.PERMISSION_DENIED:return N.PERMISSION_DENIED;case re.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case re.ABORTED:return N.ABORTED;case re.OUT_OF_RANGE:return N.OUT_OF_RANGE;case re.UNIMPLEMENTED:return N.UNIMPLEMENTED;case re.DATA_LOSS:return N.DATA_LOSS;default:return z(39323,{code:t})}}(W=re||(re={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var zx=new Co([4294967295,4294967295],0);var Qa=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ya(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U0(t,e){return Ya(t,e.toTimestamp())}function fn(t){return ie(!!t,49232),ne.fromTimestamp((function(n){let i=dt(n);return new de(i.seconds,i.nanos)})(t))}function Vp(t,e){return Xa(t,e).canonicalString()}function Xa(t,e){let n=(function(o){return new ce(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function q0(t){let e=ce.fromString(t);return ie(J0(e),10190,{key:e.toString()}),e}function Za(t,e){return Vp(t.databaseId,e.path)}function B0(t){let e=q0(t);return e.length===4?ce.emptyPath():G0(e)}function O0(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G0(t){return ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xh(t,e,n){return{name:Za(t,e),fields:n.value.mapValue.fields}}function $0(t,e){let n;if(e instanceof Gt)n={update:xh(t,e.key,e.value)};else if(e instanceof Bo)n={delete:Za(t,e.key)};else if(e instanceof et)n={update:xh(t,e.key,e.data),updateMask:K0(e.fieldMask)};else{if(!(e instanceof za))return z(16599,{Vt:e.type});n={verify:Za(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){let c=l.transform;if(c instanceof Cn)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bt)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ot)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wn)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw z(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:U0(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:z(27497)})(t,e.precondition)),n}function H0(t,e){return t&&t.length>0?(ie(e!==void 0,14353),t.map((n=>(function(o,a){let l=o.updateTime?fn(o.updateTime):fn(a);return l.isEqual(ne.min())&&(l=fn(a)),new Ha(l,o.transformResults||[])})(n,e)))):[]}function z0(t){let e=B0(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,o=null;if(i>0){ie(i===1,65062);let h=n.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(m){let y=bp(m);return y instanceof ft&&yp(y)?y.getFilters():[y]})(n.where));let l=[];n.orderBy&&(l=(function(m){return m.map((y=>(function(P){return new vn(un(P.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(y)))})(n.orderBy));let c=null;n.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,Jl(y)?null:y})(n.limit));let f=null;n.startAt&&(f=(function(m){let y=!!m.before,I=m.values||[];return new Tn(I,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){let y=!m.before,I=m.values||[];return new Tn(I,y)})(n.endAt)),_0(e,o,l,a,c,"F",f,d)}function bp(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=un(n.unaryFilter.field);return me.create(i,"==",{doubleValue:NaN});case"IS_NULL":let o=un(n.unaryFilter.field);return me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let a=un(n.unaryFilter.field);return me.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let l=un(n.unaryFilter.field);return me.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(t):t.fieldFilter!==void 0?(function(n){return me.create(un(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ft.create(n.compositeFilter.filters.map((i=>bp(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(n.compositeFilter.op))})(t):z(30097,{filter:t})}function un(t){return Me.fromServerFormat(t.fieldPath)}function K0(t){let e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function J0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ja=class{constructor(e){this.yt=e}};function W0(t){let e=z0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$a(e,e.limit,"L"):e}var Oo=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ae(e.integerValue));else if("doubleValue"in e){let i=ae(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),fi(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=dt(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ut(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?pp(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):hp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let i=e.fields||{};this.Ft(n,55);for(let o of Object.keys(i))this.Ot(o,n),this.Ct(i[o],n)}kt(e,n){let i=e.fields||{};this.Ft(n,53);let o=hi,a=i[o].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ae(a)),this.Ot(o,n),this.Ct(i[o],n)}Qt(e,n){let i=e.values||[];this.Ft(n,50);for(let o of i)this.Ct(o,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach((i=>{this.Ft(n,60),this.Ut(i,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Oo.Kt=new Oo;var el=class{constructor(){this.Cn=new tl}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Lt.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Lt.min())}updateCollectionGroup(e,n,i){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},tl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Ie(ce.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){let n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ie(ce.comparator)).toArray()}};var Kx=new Uint8Array(0);var Mh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kp=41943040,Fe=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}};Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(kp,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);var mi=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var Dh="LruGarbageCollector",Q0=1048576;function Nh([t,e],[n,i]){let o=Y(t,n);return o===0?Y(e,i):o}var nl=class{constructor(e){this.Ir=e,this.buffer=new Ie(Nh),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();Nh(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},il=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(Dh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ii(n)?B(Dh,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.Vr(3e5)}))}},ol=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return V.resolve(di.ce);let i=new nl(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Mh)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mh):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,a,l,c,f,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),o=this.params.maximumSequenceNumbersToCollect):o=m,l=Date.now(),this.nthSequenceNumber(e,o)))).next((m=>(i=m,c=Date.now(),this.removeTargets(e,i,n)))).next((m=>(a=m,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((m=>(d=Date.now(),ln()<=J.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-h}ms
	Determined least recently used ${o} in `+(c-l)+`ms
	Removed ${a} targets in `+(f-c)+`ms
	Removed ${m} documents in `+(d-f)+`ms
Total Duration: ${d-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:m}))))}};function Y0(t,e){return new ol(t,e)}var rl=class{constructor(){this.changes=new je((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?V.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sl=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var al=class{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&ai(i.mutation,o,He.empty(),de.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ee()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ee()){let o=xt();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let l=Ro();return a.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){let i=xt();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ee())))}populateOverlays(e,n,i){let o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,o){let a=qo(),l=si(),c=(function(){return si()})();return n.forEach(((f,d)=>{let h=i.get(d.key);o.has(d.key)&&(h===void 0||h.mutation instanceof et)?a=a.insert(d.key,d):h!==void 0?(l.set(d.key,h.mutation.getFieldMask()),ai(h.mutation,d,h.mutation.getFieldMask(),de.now())):l.set(d.key,He.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((d,h)=>l.set(d,h))),n.forEach(((d,h)=>c.set(d,new sl(h,l.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){let i=si(),o=new Ne(((l,c)=>l-c)),a=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(let c of l)c.keys().forEach((f=>{let d=n.get(f);if(d===null)return;let h=i.get(f)||He.empty();h=c.applyToLocalView(d,h),i.set(f,h);let m=(o.get(c.batchId)||Ee()).add(f);o=o.insert(c.batchId,m)}))})).next((()=>{let l=[],c=o.getReverseIterator();for(;c.hasNext();){let f=c.getNext(),d=f.key,h=f.value,m=Ap();h.forEach((y=>{if(!a.has(y)){let I=Dp(n.get(y),i.get(y));I!==null&&m.set(y,I),a=a.add(y)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(l){return K.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{let l=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):V.resolve(xt()),c=ci,f=a;return l.next((d=>V.forEach(d,((h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next((y=>{f=f.insert(h,y)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,f,d,Ee()))).next((h=>({batchId:c,changes:wp(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next((i=>{let o=Ro();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){let a=n.collectionGroup,l=Ro();return this.indexManager.getCollectionParents(e,a).next((c=>V.forEach(c,(f=>{let d=(function(m,y){return new En(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,i,o).next((h=>{h.forEach(((m,y)=>{l=l.insert(m,y)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((l=>{a.forEach(((f,d)=>{let h=d.getKey();l.get(h)===null&&(l=l.insert(h,_n.newInvalidDocument(h)))}));let c=Ro();return l.forEach(((f,d)=>{let h=a.get(f);h!==void 0&&ai(h.mutation,d,He.empty(),de.now()),tu(n,d)&&(c=c.insert(f,d))})),c}))}};var ll=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:fn(o.createTime)}})(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:W0(o.bundledQuery),readTime:fn(o.readTime)}})(n)),V.resolve()}};var ul=class{constructor(){this.overlays=new Ne(K.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let i=xt();return V.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.St(e,n,a)})),V.resolve()}removeOverlaysForBatchId(e,n,i){let o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),V.resolve()}getOverlaysForCollection(e,n,i){let o=xt(),a=n.length+1,l=new K(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){let f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return V.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new Ne(((d,h)=>d-h)),l=this.overlays.getIterator();for(;l.hasNext();){let d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let h=a.get(d.largestBatchId);h===null&&(h=xt(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=xt(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=o)););return V.resolve(c)}St(e,n,i){let o=this.overlays.get(i.key);if(o!==null){let l=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Wa(n,i));let a=this.qr.get(n);a===void 0&&(a=Ee(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}};var cl=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}};var gi=class{constructor(){this.Qr=new Ie(se.$r),this.Ur=new Ie(se.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let i=new se(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new se(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){let n=new K(new ce([])),i=new se(n,e),o=new se(n,e+1),a=[];return this.Ur.forEachInRange([i,o],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new K(new ce([])),i=new se(n,e),o=new se(n,e+1),a=Ee();return this.Ur.forEachInRange([i,o],(l=>{a=a.add(l.key)})),a}containsKey(e){let n=new se(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},se=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||Y(e.Yr,n.Yr)}static Kr(e,n){return Y(e.Yr,n.Yr)||K.comparator(e.key,n.key)}};var dl=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ie(se.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){let a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let l=new Ka(a,n,i,o);this.mutationQueue.push(l);for(let c of o)this.Zr=this.Zr.add(new se(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(l)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,o=this.ei(i),a=o<0?0:o;return V.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Kl:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new se(n,0),o=new se(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(l=>{let c=this.Xr(l.Yr);a.push(c)})),V.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ie(Y);return n.forEach((o=>{let a=new se(o,0),l=new se(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(c=>{i=i.add(c.Yr)}))})),V.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,o=i.length+1,a=i;K.isDocumentKey(a)||(a=a.child(""));let l=new se(new K(a),0),c=new Ie(Y);return this.Zr.forEachWhile((f=>{let d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===o&&(c=c.add(f.Yr)),!0)}),l),V.resolve(this.ti(c))}ti(e){let n=[];return e.forEach((i=>{let o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return V.forEach(n.mutations,(o=>{let a=new se(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){let i=new se(n,0),o=this.Zr.firstAfterOrEqual(i);return V.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fl=class{constructor(e){this.ri=e,this.docs=(function(){return new Ne(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,o=this.docs.get(i),a=o?o.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return V.resolve(i?i.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let i=qo();return n.forEach((o=>{let a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():_n.newInvalidDocument(o))})),V.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=qo(),l=n.path,c=new K(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){let{key:d,value:{document:h}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||jR(ZR(h),i)<=0||(o.has(h.key)||tu(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return V.resolve(a)}getAllFromCollectionGroup(e,n,i,o){z(9500)}ii(e,n){return V.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new hl(this)}getSize(e){return V.resolve(this.size)}},hl=class extends rl{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var pl=class{constructor(e){this.persistence=e,this.si=new je((n=>jl(n)),eu),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new gi,this.targetCount=0,this.ai=mi.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new mi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,i){let o=0,a=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),o++)})),V.waitFor(a).next((()=>o))}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let i=this.si.get(n)||null;return V.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),V.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);let o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((l=>{a.push(o.markPotentiallyOrphaned(e,l))})),V.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let i=this._i.Hr(n);return V.resolve(i)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}};var Go=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new di(0),this.li=!1,this.li=!0,this.hi=new cl,this.referenceDelegate=e(this),this.Pi=new pl(this),this.indexManager=new el,this.remoteDocumentCache=(function(o){return new fl(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new ja(n),this.Ii=new ll(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ul,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new dl(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);let o=new ml(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,n){return V.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}},ml=class extends Pa{constructor(e){super(),this.currentSequenceNumber=e}},gl=class t{constructor(e){this.persistence=e,this.Ri=new gi,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw z(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),V.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(i=>{let o=K.fromPath(i);return this.gi(e,o).next((a=>{a||n.removeEntry(o,ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},$o=class t{constructor(e,n){this.persistence=e,this.pi=new je((i=>i0(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=Y0(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return V.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?V.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0,o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(l=>this.br(e,l,n).next((c=>{c||(i++,a.removeEntry(l,ne.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),V.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xo(e.data.value)),n}br(e,n,i){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let o=this.pi.get(n);return V.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yl=class t{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ee(),o=Ee();for(let a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new t(e,n.fromCache,i,o)}};var _l=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Tl=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return df()?8:t0(lf())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){let a={result:null};return this.ys(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,n,o,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;let l=new _l;return this.Ss(e,n,l).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>a.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(ln()<=J.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(ln()<=J.DEBUG&&B("QueryEngine","Query:",ii(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ln()<=J.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(n))):V.resolve())}ys(e,n){if(wh(n))return V.resolve(null);let i=Mt(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=$a(n,null,"F"),i=Mt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{let l=Ee(...a);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{let d=this.Ds(n,c);return this.Cs(n,d,l,f.readTime)?this.ys(e,$a(n,null,"F")):this.vs(e,d,n,f)}))))})))))}ws(e,n,i,o){return wh(n)||o.isEqual(ne.min())?V.resolve(null):this.ps.getDocuments(e,i).next((a=>{let l=this.Ds(n,a);return this.Cs(n,l,i,o)?V.resolve(null):(ln()<=J.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ii(n)),this.vs(e,l,n,XR(o,ci)).next((c=>c)))}))}Ds(e,n){let i=new Ie(I0(e));return n.forEach(((o,a)=>{tu(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,n,i){return ln()<=J.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ii(n)),this.ps.getDocumentsMatchingQuery(e,n,Lt.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}};var X0="LocalStore";var vl=class{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ne(Y),this.xs=new je((a=>jl(a)),eu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new al(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}};function Z0(t,e,n,i){return new vl(t,e,n,i)}async function Fp(t,e){let n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{let l=[],c=[],f=Ee();for(let d of o){l.push(d.batchId);for(let h of d.mutations)f=f.add(h.key)}for(let d of a){c.push(d.batchId);for(let h of d.mutations)f=f.add(h.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function j0(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{let o=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,h){let m=d.batch,y=m.keys(),I=V.resolve();return y.forEach((P=>{I=I.next((()=>h.getEntry(f,P))).next((M=>{let D=d.docVersions.get(P);ie(D!==null,48541),M.version.compareTo(D)<0&&(m.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),h.addEntry(M)))}))})),I.next((()=>c.mutationQueue.removeMutationBatch(f,m)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=Ee();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function eP(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function tP(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kl),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}var Ho=class{constructor(){this.activeTargetIds=P0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var El=class{constructor(){this.Mo=new Ho,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ho,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Il=class{Oo(e){}shutdown(){}};var Vh="ConnectivityMonitor",zo=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(Vh,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){B(Vh,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Po=null;function Cl(){return Po===null?Po=(function(){return 268435456+Math.round(2147483648*Math.random())})():Po++,"0x"+Po.toString(16)}var ga="RestConnection",nP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wl=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Lo?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,a){let l=Cl(),c=this.zo(e,n.toUriEncodedString());B(ga,`Sending RPC '${e}' ${l}:`,c,i);let f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);let{host:d}=new URL(c),h=ho(d);return this.Jo(e,c,f,i,h).then((m=>(B(ga,`Received RPC '${e}' ${l}: `,m),m)),(m=>{throw jo(ga,`RPC '${e}' ${l} failed with error: `,m,"url: ",c,"request:",i),m}))}Ho(e,n,i,o,a,l){return this.Go(e,n,i,o,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rn})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,n){let i=nP[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}};var Al=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var ve="WebChannelConnection",Sl=class extends wl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,a){let l=Cl();return new Promise(((c,f)=>{let d=new ca;d.setWithCredentials(!0),d.listenOnce(da.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case ni.NO_ERROR:let m=d.getResponseJson();B(ve,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(m)),c(m);break;case ni.TIMEOUT:B(ve,`RPC '${e}' ${l} timed out`),f(new G(N.DEADLINE_EXCEEDED,"Request time out"));break;case ni.HTTP_ERROR:let y=d.getStatus();if(B(ve,`RPC '${e}' ${l} failed with status:`,y,"response text:",d.getResponseText()),y>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);let P=I?.error;if(P&&P.status&&P.message){let M=(function(F){let b=F.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(b)>=0?b:N.UNKNOWN})(P.status);f(new G(M,P.message))}else f(new G(N.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new G(N.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{B(ve,`RPC '${e}' ${l} completed.`)}}));let h=JSON.stringify(o);B(ve,`RPC '${e}' ${l} sending request:`,o),d.send(n,"POST",h,i,15)}))}T_(e,n,i){let o=Cl(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=pa(),c=ha(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;let h=a.join("");B(ve,`Creating RPC '${e}' stream ${o}: ${h}`,f);let m=l.createWebChannel(h,f);this.I_(m);let y=!1,I=!1,P=new Al({Yo:D=>{I?B(ve,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(y||(B(ve,`Opening RPC '${e}' stream ${o} transport.`),m.open(),y=!0),B(ve,`RPC '${e}' stream ${o} sending:`,D),m.send(D))},Zo:()=>m.close()}),M=(D,F,b)=>{D.listen(F,(k=>{try{b(k)}catch(O){setTimeout((()=>{throw O}),0)}}))};return M(m,an.EventType.OPEN,(()=>{I||(B(ve,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),M(m,an.EventType.CLOSE,(()=>{I||(I=!0,B(ve,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(m))})),M(m,an.EventType.ERROR,(D=>{I||(I=!0,jo(ve,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),P.a_(new G(N.UNAVAILABLE,"The operation could not be completed")))})),M(m,an.EventType.MESSAGE,(D=>{if(!I){let F=D.data[0];ie(!!F,16349);let b=F,k=b?.error||b[0]?.error;if(k){B(ve,`RPC '${e}' stream ${o} received error:`,k);let O=k.status,q=(function(v){let T=re[v];if(T!==void 0)return F0(T)})(O),$=k.message;q===void 0&&(q=N.INTERNAL,$="Unknown error status: "+O+" with message "+k.message),I=!0,P.a_(new G(q,$)),m.close()}else B(ve,`RPC '${e}' stream ${o} received:`,F),P.u_(F)}})),M(c,fa.STAT_EVENT,(D=>{D.stat===Ao.PROXY?B(ve,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Ao.NOPROXY&&B(ve,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}};function ya(){return typeof document<"u"?document:null}function er(t){return new Qa(t,!0)}var Ko=class{constructor(e,n,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&B("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var bh="PersistentStream",Rl=class{constructor(e,n,i,o,a,l,c,f){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ko(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{let o=new G(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){let i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return B(bh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(B(bh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}};var Pl=class extends Rl{constructor(e,n,i,o,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=H0(e.writeResults,e.commitTime),i=fn(e.commitTime);return this.listener.na(i,n)}ra(){let e={};e.database=O0(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map((i=>$0(this.serializer,i)))};this.q_(n)}};var xl=class{},Ml=class extends xl{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,Xa(n,i),o,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(N.UNKNOWN,a.toString())}))}Ho(e,n,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,Xa(n,i),o,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new G(N.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},Dl=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ft(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ci="RemoteStore",Nl=class{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Ai(this)&&(B(Ci,"Restarting streams for network reachability change."),await(async function(f){let d=Z(f);d.Ea.add(4),await wi(d),d.Ra.set("Unknown"),d.Ea.delete(4),await tr(d)})(this))}))})),this.Ra=new Dl(i,o)}};async function tr(t){if(Ai(t))for(let e of t.da)await e(!0)}async function wi(t){for(let e of t.da)await e(!1)}function Ai(t){return Z(t).Ea.size===0}async function Lp(t,e,n){if(!Ii(e))throw e;t.Ea.add(1),await wi(t),t.Ra.set("Offline"),n||(n=()=>eP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{B(Ci,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await tr(t)}))}function Up(t,e){return e().catch((n=>Lp(t,n,e)))}async function nr(t){let e=Z(t),n=ht(e),i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kl;for(;iP(e);)try{let o=await tP(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,oP(e,o)}catch(o){await Lp(e,o)}qp(e)&&Bp(e)}function iP(t){return Ai(t)&&t.Ta.length<10}function oP(t,e){t.Ta.push(e);let n=ht(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qp(t){return Ai(t)&&!ht(t).x_()&&t.Ta.length>0}function Bp(t){ht(t).start()}async function rP(t){ht(t).ra()}async function sP(t){let e=ht(t);for(let n of t.Ta)e.ea(n.mutations)}async function aP(t,e,n){let i=t.Ta.shift(),o=Ja.from(i,e,n);await Up(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await nr(t)}async function lP(t,e){e&&ht(t).X_&&await(async function(i,o){if((function(l){return k0(l)&&l!==N.ABORTED})(o.code)){let a=i.Ta.shift();ht(i).B_(),await Up(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await nr(i)}})(t,e),qp(t)&&Bp(t)}async function kh(t,e){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),B(Ci,"RemoteStore received new credentials");let i=Ai(n);n.Ea.add(3),await wi(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await tr(n)}async function uP(t,e){let n=Z(t);e?(n.Ea.delete(2),await tr(n)):e||(n.Ea.add(2),await wi(n),n.Ra.set("Unknown"))}function ht(t){return t.fa||(t.fa=(function(n,i,o){let a=Z(n);return a.sa(),new Pl(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:rP.bind(null,t),r_:lP.bind(null,t),ta:sP.bind(null,t),na:aP.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await nr(t)):(await t.fa.stop(),t.Ta.length>0&&(B(Ci,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}var Vl=class t{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){let l=Date.now()+i,c=new t(e,n,l,o,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Op(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),Ii(t))return new G(N.UNAVAILABLE,`${e}: ${t}`);throw t}var bl=class{constructor(){this.queries=Fh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){let o=Z(n),a=o.queries;o.queries=Fh(),a.forEach(((l,c)=>{for(let f of c.Sa)f.onError(i)}))})(this,new G(N.ABORTED,"Firestore shutting down"))}};function Fh(){return new je((t=>Ip(t)),Ep)}function cP(t){t.Ca.forEach((e=>{e.next()}))}var Lh,Uh;(Uh=Lh||(Lh={})).Ma="default",Uh.Cache="cache";var dP="SyncEngine";var kl=class{constructor(e,n,i,o,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new je((c=>Ip(c)),Ep),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(K.comparator),this.Au=new Map,this.Ru=new gi,this.Vu={},this.mu=new Map,this.fu=mi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function fP(t,e,n){let i=gP(t);try{let o=await(function(l,c){let f=Z(l),d=de.now(),h=c.reduce(((I,P)=>I.add(P.key)),Ee()),m,y;return f.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=qo(),M=Ee();return f.Ns.getEntries(I,h).next((D=>{P=D,P.forEach(((F,b)=>{b.isValidDocument()||(M=M.add(F))}))})).next((()=>f.localDocuments.getOverlayedDocuments(I,P))).next((D=>{m=D;let F=[];for(let b of c){let k=b0(b,m.get(b.key).overlayedDocument);k!=null&&F.push(new et(b.key,k,mp(k.value.mapValue),Dt.exists(!0)))}return f.mutationQueue.addMutationBatch(I,d,F,c)})).next((D=>{y=D;let F=D.applyToLocalDocumentSet(m,M);return f.documentOverlayCache.saveOverlays(I,D.batchId,F)}))})).then((()=>({batchId:y.batchId,changes:wp(m)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(l,c,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new Ne(Y)),d=d.insert(c,f),l.Vu[l.currentUser.toKey()]=d})(i,o.batchId,n),await ir(i,o.changes),await nr(i.remoteStore)}catch(o){let a=Op(o,"Failed to persist write");n.reject(a)}}function qh(t,e,n){let i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let o=[];i.Tu.forEach(((a,l)=>{let c=l.view.va(e);c.snapshot&&o.push(c.snapshot)})),(function(l,c){let f=Z(l);f.onlineState=c;let d=!1;f.queries.forEach(((h,m)=>{for(let y of m.Sa)y.va(c)&&(d=!0)})),d&&cP(f)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hP(t,e){let n=Z(t),i=e.batch.batchId;try{let o=await j0(n.localStore,e);$p(n,i,null),Gp(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ir(n,o)}catch(o){await zl(o)}}async function pP(t,e,n){let i=Z(t);try{let o=await(function(l,c){let f=Z(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return f.mutationQueue.lookupMutationBatch(d,c).next((m=>(ie(m!==null,37113),h=m.keys(),f.mutationQueue.removeMutationBatch(d,m)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>f.localDocuments.getDocuments(d,h)))}))})(i.localStore,e);$p(i,e,n),Gp(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ir(i,o)}catch(o){await zl(o)}}function Gp(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function $p(t,e,n){let i=Z(t),o=i.Vu[i.currentUser.toKey()];if(o){let a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}async function ir(t,e,n){let i=Z(t),o=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,n).then((d=>{if((d||n)&&i.isPrimaryClient){let h=d?!d.fromCache:n?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,h?"current":"not-current")}if(d){o.push(d);let h=yl.As(f.targetId,d);a.push(h)}})))})),await Promise.all(l),i.Pu.H_(o),await(async function(f,d){let h=Z(f);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>V.forEach(d,(y=>V.forEach(y.Es,(I=>h.persistence.referenceDelegate.addReference(m,y.targetId,I))).next((()=>V.forEach(y.ds,(I=>h.persistence.referenceDelegate.removeReference(m,y.targetId,I)))))))))}catch(m){if(!Ii(m))throw m;B(X0,"Failed to update sequence numbers: "+m)}for(let m of d){let y=m.targetId;if(!m.fromCache){let I=h.Ms.get(y),P=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(P);h.Ms=h.Ms.insert(y,M)}}})(i.localStore,a))}async function mP(t,e){let n=Z(t);if(!n.currentUser.isEqual(e)){B(dP,"User change. New user:",e.toKey());let i=await Fp(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((f=>{f.reject(new G(N.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ir(n,i.Ls)}}function gP(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pP.bind(null,e),e}var Sn=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=er(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Z0(this.persistence,new Tl,e.initialUser,this.serializer)}Cu(e){return new Go(gl.mi,this.serializer)}Du(e){return new El}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Sn.provider={build:()=>new Sn};var Fl=class extends Sn{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ie(this.persistence.referenceDelegate instanceof $o,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new il(i,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Fe.withCacheSize(this.cacheSizeBytes):Fe.DEFAULT;return new Go((i=>$o.mi(i,n)),this.serializer)}};var yi=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qh(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await uP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bl})()}createDatastore(e){let n=er(e.databaseInfo.databaseId),i=(function(a){return new Sl(a)})(e.databaseInfo);return(function(a,l,c,f){return new Ml(a,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,l,c){return new Nl(i,o,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>qh(this.syncEngine,n,0)),(function(){return zo.v()?new zo:new Il})())}createSyncEngine(e,n){return(function(o,a,l,c,f,d,h){let m=new kl(o,a,l,c,f,d);return h&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){let i=Z(n);B(Ci,"RemoteStore shutting down."),i.Ea.add(5),await wi(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};yi.provider={build:()=>new yi};var pt="FirestoreClient",Ll=class{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=pe.UNAUTHENTICATED,this.clientId=ui.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{B(pt,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(B(pt,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Op(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};async function _a(t,e){t.asyncQueue.verifyOperationInProgress(),B(pt,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Fp(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Bh(t,e){t.asyncQueue.verifyOperationInProgress();let n=await yP(t);B(pt,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>kh(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>kh(e.remoteStore,o))),t._onlineComponents=e}async function yP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(pt,"Using user provided OfflineComponentProvider");try{await _a(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===N.FAILED_PRECONDITION||o.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await _a(t,new Sn)}}else B(pt,"Using default OfflineComponentProvider"),await _a(t,new Fl(void 0));return t._offlineComponents}async function _P(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(pt,"Using user provided OnlineComponentProvider"),await Bh(t,t._uninitializedComponentsProvider._online)):(B(pt,"Using default OnlineComponentProvider"),await Bh(t,new yi))),t._onlineComponents}function TP(t){return _P(t).then((e=>e.syncEngine))}function Hp(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Oh=new Map;var zp="firestore.googleapis.com",Gh=!0,Jo=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zp,this.ssl=Gh}else this.host=e.host,this.ssl=e.ssl??Gh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kp;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q0)throw new G(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hp(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_i=class{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jo(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Ta;switch(i.type){case"firstParty":return new Ca(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let i=Oh.get(n);i&&(B("ComponentProvider","Removing Datastore"),Oh.delete(n),i.terminate())})(this),Promise.resolve()}};function vP(t,e,n,i={}){t=Sa(t,_i);let o=ho(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;o&&(rf(`https://${c}`),af("Firestore",!0)),a.host!==zp&&a.host!==c&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f={...a,host:c,ssl:o,emulatorOptions:i};if(!wt(f,l)&&(t._setSettings(f),i.mockUserToken)){let d,h;if(typeof i.mockUserToken=="string")d=i.mockUserToken,h=pe.MOCK_USER;else{d=sf(i.mockUserToken,t._app?.options.projectId);let m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new G(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pe(m)}t._authCredentials=new va(new No(d,h))}}var Ul=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},De=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ei(n,t._jsonSchema))return new t(e,i||null,new K(ce.fromString(n.referencePath)))}};De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:le("string",De._jsonSchemaVersion),referencePath:le("string")};var Ti=class t extends Ul{constructor(e,n,i){super(e,n,T0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Kp(t,e,...n){if(t=lt(t),arguments.length===1&&(e=ui.newId()),QR("doc","path",e),t instanceof _i){let i=ce.fromString(e,...n);return ph(i),new De(t,null,new K(i))}{if(!(t instanceof De||t instanceof Ti))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ce.fromString(e,...n));return ph(i),new De(t.firestore,t instanceof Ti?t.converter:null,new K(i))}}var $h="AsyncQueue",Wo=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ko(this,"async_queue_retry"),this._c=()=>{let i=ya();i&&B($h,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let n=ya();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=ya();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let n=new Xe;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ii(e))throw e;B($h,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ft("INTERNAL UNHANDLED ERROR: ",Hh(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let o=Vl.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&z(47125,{Pc:Hh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function Hh(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Qo=class extends _i{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Wo,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Wo(e),this._firestoreClient=void 0,await e}}};function Jp(t,e){let n=typeof t=="object"?t:ti(),i=typeof t=="string"?t:e||Lo,o=ct(n,"firestore").getImmediate({identifier:i});if(!o._initialized){let a=of("firestore");a&&vP(o,...a)}return o}function EP(t){if(t._terminated)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IP(t),t._firestoreClient}function IP(t){let e=t._freezeSettings(),n=(function(o,a,l,c){return new Ma(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Hp(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ll(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(o){let a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(t._componentsProvider))}var Nt=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ze.fromBase64String(e))}catch(n){throw new G(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ei(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Nt._jsonSchemaVersion="firestore/bytes/1.0",Nt._jsonSchema={type:le("string",Nt._jsonSchemaVersion),bytes:le("string")};var vi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yo=class{constructor(e){this._methodName=e}};var Vt=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Ei(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Vt._jsonSchemaVersion="firestore/geoPoint/1.0",Vt._jsonSchema={type:le("string",Vt._jsonSchemaVersion),latitude:le("number"),longitude:le("number")};var bt=class t{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ei(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new t(e.vectorValues);throw new G(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};bt._jsonSchemaVersion="firestore/vectorValue/1.0",bt._jsonSchema={type:le("string",bt._jsonSchemaVersion),vectorValues:le("object")};var CP=/^__.*__$/,ql=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new et(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gt(e,this.data,n,this.fieldTransforms)}};function Wp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ac:t})}}var Bl=class t{constructor(e,n,i,o,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){let n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xo(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wp(this.Ac)&&CP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Ol=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||er(e)}Cc(e,n,i,o=!1){return new Bl({Ac:e,methodName:n,Dc:i,path:Me.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wP(t){let e=t._freezeSettings(),n=er(t._databaseId);return new Ol(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AP(t,e,n,i,o,a={}){let l=t.Cc(a.merge||a.mergeFields?2:0,e,n,o);Zp("Data must be an object, but it was:",l,i);let c=Yp(i,l),f,d;if(a.merge)f=new He(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){let h=[];for(let m of a.mergeFields){let y=SP(e,m,n);if(!l.contains(y))throw new G(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);PP(h,y)||h.push(y)}f=new He(h),d=l.fieldTransforms.filter((m=>f.covers(m.field)))}else f=null,d=l.fieldTransforms;return new ql(new $e(c),f,d)}function Qp(t,e){if(Xp(t=lt(t)))return Zp("Unsupported field value:",e,t),Yp(t,e);if(t instanceof Yo)return(function(i,o){if(!Wp(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);let a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){let a=[],l=0;for(let c of i){let f=Qp(c,o.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return x0(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let a=de.fromDate(i);return{timestampValue:Ya(o.serializer,a)}}if(i instanceof de){let a=new de(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ya(o.serializer,a)}}if(i instanceof Vt)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nt)return{bytesValue:L0(o.serializer,i._byteString)};if(i instanceof De){let a=o.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw o.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof bt)return(function(l,c){return{mapValue:{fields:{[Yl]:{stringValue:Xl},[hi]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return nu(c.serializer,d)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Hl(i)}`)})(t,e)}function Yp(t,e){let n={};return ap(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pn(t,((i,o)=>{let a=Qp(o,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Xp(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof de||t instanceof Vt||t instanceof Nt||t instanceof De||t instanceof Yo||t instanceof bt)}function Zp(t,e,n){if(!Xp(n)||!Kh(n)){let i=Hl(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function SP(t,e,n){if((e=lt(e))instanceof vi)return e._internalPath;if(typeof e=="string")return jp(t,e);throw Xo("Field path arguments must be of type string or ",t,!1,void 0,n)}var RP=new RegExp("[~\\*/\\[\\]]");function jp(t,e,n){if(e.search(RP)>=0)throw Xo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vi(...e.split("."))._internalPath}catch{throw Xo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xo(t,e,n,i,o){let a=i&&!i.isEmpty(),l=o!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${o}`),f+=")"),new G(N.INVALID_ARGUMENT,c+t+f)}function PP(t,e){return t.some((n=>n.isEqual(e)))}var Zo=class{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(em("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Gl=class extends Zo{data(){return super.data()}};function em(t,e){return typeof e=="string"?jp(t,e):e instanceof vi?e._internalPath:e._delegate._internalPath}function xP(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var dn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hn=class t extends Zo{constructor(e,n,i,o,a,l){super(e,n,i,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new pn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(em("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",hn._jsonSchema={type:le("string",hn._jsonSchemaVersion),bundleSource:le("string","DocumentSnapshot"),bundleName:le("string"),bundle:le("string")};var pn=class extends hn{data(e={}){return super.data(e)}},li=class t{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new dn(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){let e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new pn(this._firestore,this._userDataWriter,i.key,i,new dn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map((c=>{let f=new pn(o._firestore,o._userDataWriter,c.doc.key,c.doc,new dn(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{let f=new pn(o._firestore,o._userDataWriter,c.doc.key,c.doc,new dn(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter),d=-1,h=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),h=l.indexOf(c.doc.key)),{type:MP(c.type),doc:f,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ui.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function MP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}li._jsonSchemaVersion="firestore/querySnapshot/1.0",li._jsonSchema={type:le("string",li._jsonSchemaVersion),bundleSource:le("string","QuerySnapshot"),bundleName:le("string"),bundle:le("string")};function tm(t,e,n){t=Sa(t,De);let i=Sa(t.firestore,Qo),o=xP(t.converter,e,n);return DP(i,[AP(wP(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Dt.none())])}function DP(t,e){return(function(i,o){let a=new Xe;return i.asyncQueue.enqueueAndForget((async()=>fP(await TP(i),o,a))),a.promise})(EP(t),e)}(function(e,n=!0){(function(o){Rn=o})(ei),Re(new ye("firestore",((i,{instanceIdentifier:o,options:a})=>{let l=i.getProvider("app").getImmediate(),c=new Qo(new Ea(i.getProvider("auth-internal")),new wa(l,i.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(d.options.projectId,h)})(l,o),l);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),oe(dh,fh,e),oe(dh,fh,"esm2020")})();var iu=class{constructor(e,n){this._delegate=e,this.firebase=n,on(e,new ye("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),To(this._delegate)))}_getService(e,n=Ge){this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ge){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){on(this._delegate,e)}_addOrOverwriteComponent(e){$s(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var NP={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},nm=new be("app-compat","Firebase",NP);function VP(t){let e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:oe,setLogLevel:Js,onLog:Ks,apps:null,SDK_VERSION:ei,INTERNAL:{registerComponent:c,removeApp:i,useAsService:f,modularAPIs:Ws}};n.default=n,Object.defineProperty(n,"apps",{get:l});function i(d){delete e[d]}function o(d){if(d=d||Ge,!Ps(e,d))throw nm.create("no-app",{appName:d});return e[d]}o.App=t;function a(d,h={}){let m=rn(d,h);if(Ps(e,m.name))return e[m.name];let y=new t(m,n);return e[m.name]=y,y}function l(){return Object.keys(e).map(d=>e[d])}function c(d){let h=d.name,m=h.replace("-compat","");if(Re(d)&&d.type==="PUBLIC"){let y=(I=o())=>{if(typeof I[m]!="function")throw nm.create("invalid-app-argument",{appName:h});return I[m]()};d.serviceProps!==void 0&&Yn(y,d.serviceProps),n[m]=y,t.prototype[m]=function(...I){return this._getService.bind(this,h).apply(this,d.multipleInstances?I:[])}}return d.type==="PUBLIC"?n[m]:null}function f(d,h){return h==="serverAuth"?null:h}return n}function om(){let t=VP(iu);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:om,extendNamespace:e,createSubscribe:hf,ErrorFactory:be,deepExtend:Yn};function e(n){Yn(t,n)}return t}var bP=om();var im=new Be("@firebase/app-compat"),kP="@firebase/app-compat",FP="0.5.4";function LP(t){oe(kP,FP,t)}try{let t=co();if(t.firebase!==void 0){im.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&im.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var Si=bP;LP();var UP="firebase",qP="12.4.0";Si.registerVersion(UP,qP,"app-compat");var rm="AIzaSyAyI2s5OQhC8UciKz148cmBvH04lPEfTqg";var BP=Jp(ah);async function OP(t){await tm(Kp(BP,`users/${userId}/notes`),{notes:t.output,Timestamp:Si.firestore.FieldValue.serverTimestamp(),source:t.typeOf||"unknown",device:"chrome-extension",synced:!0})}async function GP(t){if("Proofreader"in self){console.log("Yeah we have proofReader");let e={expectedInputLanguages:["en"],monitor(l){l.addEventListener("downloadprogress",c=>{console.log(`Downloaded ${c.loaded*100} % `)})}},n=await Proofreader.availability();if(console.log(n),n==="unavailable"){console.log("Proofreader is unavailable");return}let o=await(await Proofreader.create(e)).proofread(t),{correctedInput:a}=o;return a}}async function $P(t){"Summarizer"in self&&console.log("Yeah it is installed");let e={sharedContext:"Make well written informative notes",type:"key-points",format:"markdown",length:"long",monitor(a){a.addEventListener("downloadprogress",l=>{console.log(`Downloaded ${l.loaded*100} % `)})}};if(await Summarizer.availability()==="unavailable"){console.log("Not downloaded");return}let o=await(await Summarizer.create(e)).summarize(t,{context:"This article should be intended to well infomative about the user interest."});return console.log("summry will be: ",o),o}async function HP(t){"Writer"in self&&console.log("Yeah dude it is working");let e={sharedContext:"Write a well detailed information about the topics",expectedInputLanguages:["en","ja","es"],expectedContextLanguages:["en","ja","es"],outputLanguage:"en",tone:"casual",format:"markdown",length:"medium",monitor(a){a.addEventListener("downloadprogress",l=>{console.log(`Downloaded ${l.loaded*100}%`)})}};if(await Writer.availability()==="unavailable")return;let o=await(await Writer.create(e)).write(t,{context:"Give response with well meaning and deep in context"});console.log("Response via writer api: ",o)}var zP=rm;async function KP(t){try{let i=(await new so({apiKey:zP}).models.generateContent({model:"gemini-2.5-flash",contents:[{inlineData:{mimeType:"image/png",data:t.base64Data}},{text:`Extract and summarize key information from this screenshot as concise bullet-point notes for a notes-taking app. Focus on main elements like text, code, structure, and actions. Output only in bullet points, starting each with.Make proper study material notes so that user could understand what's going on the image.

Example input: Screenshot of a code editor with a function called "helloWorld".
Example output:
- Function name: helloWorld
- Purpose: Prints a greeting
- Language: JavaScript

Now, extract notes from this screenshot:`}],config:{thinkingConfig:{thinkingBudget:1024}}})).text;console.log("Here is respo txt: ",i);let o=GP(i),a=$P(o),l=HP(a);console.log(l),t.synced===!0&&(console.log("we wiil add it to firebase cloud"),data_to_stored={output:l,typeOf:t.data_type},OP(data_to_stored))}catch(e){console.error("AI Error:",e.message)}}chrome.runtime.onMessage.addListener((t,e,n)=>{if(t.action==="captureScreen"){console.log("Updataed message that we getting: ",t),console.log("Message received");let i=t.data.split(",")[1];console.log("Base64 snippet:",i.substring(0,50)+"...");let o={base64Data:i,data_type:t.type,synced:t.synced};KP(o)}return!0});
/*! Bundled license information:

@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/analytics/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
firebase/compat/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/analytics/dist/esm/index.esm.js:
@firebase/app-compat/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.esm.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
